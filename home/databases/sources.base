filters:
  and:
    - file.inFolder("sources")
    - '!file.hasTag("mark/log")'
    - or:
        - '!this.file.hasTag("system/category")'
        - or:
            - file.hasTag("category/" + this.file.name.replace(" ", "_"))
            - category.contains(link(this.file.name))
formulas:
  type: file.tags.filter(value.startsWith("#source/"))[0].replace(/^.*\//, '')
  kanban: if(status.contains("âš›"), "â‘  âš› Atom", if(status.contains("ğŸŸ¦"), "â‘¡ ğŸŸ¦ In Progress", if(status.contains("ğŸŸ¥"), "â‘¢ ğŸŸ¥ ToDo", "â‘£ Other")))
  scientificity: if(scientificity.contains("ğŸ…°ï¸"), "â‘  ğŸ…°ï¸ primary research", if(scientificity.contains("ğŸ…±ï¸"), "â‘¡ ğŸ…±ï¸ secondary research", if(scientificity.contains("ğŸ‘“"), "â‘¢ ğŸ‘“ expert/industry", if(scientificity.contains("ğŸ“¢"), "â‘£ ğŸ“¢ popular science/journalism", if(scientificity.contains("ğŸ’¬"), "â‘¤ ğŸ’¬ opinion/unverified", "â‘¥ Other")))))
  rating: if(rating.contains("ğŸŒ•"), "â‘  ğŸŒ• masterpiece", if(rating.contains("ğŸŒ”"), "â‘¡ ğŸŒ” great", if(rating.contains("ğŸŒ“"), "â‘¢ ğŸŒ“ good", if(rating.contains("ğŸŒ’"), "â‘£ ğŸŒ’ mediocre", if(rating.contains("ğŸŒ‘"), "â‘¤ ğŸŒ‘ poor", "â‘¥ Other")))))
  backlinks: file.backlinks.length
  outlinks: file.links.length
  created_relative: created.relative()
  updated_relative: updated.relative()
  category_status: if(!category.isEmpty(), "âœ…", "âŒ")
  category_type_valid: if(category.isEmpty(), "âœ…", if(list(category).filter(value.asFile().hasTag("system/category")).length == list(category).length, "âœ…", "âŒ"))
  meta_type_valid: if(meta.isEmpty(), "âœ…", if(list(meta).filter(value.asFile().hasTag("system/high/meta")).length == list(meta).length, "âœ…", "âŒ"))
  problem_type_valid: if(problem.isEmpty(), "âœ…", if(list(problem).filter(value.asFile().hasTag("system/high/problem")).length == list(problem).length, "âœ…", "âŒ"))
  creator_type_valid: if(creator.isEmpty(), "âœ…", if(list(creator).filter(value.asFile().tags.filter(value.startsWith("#creator/") || value.startsWith("#contact/")).length > 0).length == list(creator).length, "âœ…", "âŒ"))
  production_type_valid: if(production.isEmpty(), "âœ…", if(list(production).filter(value.asFile().tags.filter(value.startsWith("#production/")).length > 0).length == list(production).length, "âœ…", "âŒ"))
properties:
  formula.type:
    displayName: ğŸ—„ï¸ type
  note.zotero:
    displayName: ğŸ‡¿
  note.addition:
    displayName: â•
  note.status:
    displayName: ğŸ’¯
  note.scientificity:
    displayName: ğŸ…°ï¸
  note.rating:
    displayName: ğŸŒ•ï¸
  note.category:
    displayName: ğŸ—ºï¸ category
  note.meta:
    displayName: ğŸ” meta
  note.problem:
    displayName: âš¡ problem
  note.creator:
    displayName: ğŸ‘¨ creator
  note.production:
    displayName: ğŸ¬ production
  note.url:
    displayName: ğŸ”— url
  note.genre:
    displayName: ğŸ­ Genre
  note.published:
    displayName: ğŸ—“ï¸ Year
  file.name:
    displayName: ğŸ”¤ title
  formula.backlinks:
    displayName: ğŸ”½
  formula.outlinks:
    displayName: â¬†ï¸
  formula.created_relative:
    displayName: ğŸ†• created
  formula.updated_relative:
    displayName: ğŸ”„ updated
  formula.category_status:
    displayName: structure
  formula.category_type_valid:
    displayName: type
  formula.meta_type_valid:
    displayName: ğŸ·ï¸
  formula.problem_type_valid:
    displayName: ğŸ·ï¸
  formula.creator_type_valid:
    displayName: ğŸ·ï¸
  formula.production_type_valid:
    displayName: ğŸ·ï¸
views:
  - type: table
    name: "ğŸ“Š All: Short View"
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.kanban
        direction: ASC
      - property: formula.created_relative
        direction: DESC
    limit: 28
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: "ğŸ“Š All: Extended View"
    order:
      - formula.backlinks
      - formula.outlinks
      - formula.created_relative
      - formula.updated_relative
      - formula.type
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.kanban
        direction: ASC
      - property: formula.created_relative
        direction: DESC
    limit: 28
    columnSize:
      file.name: 530
      formula.backlinks: 1
      formula.outlinks: 1
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
      formula.created_relative: 140
      formula.updated_relative: 140
  - type: table
    name: â€”â€”â€”
    filters:
      and:
        - "false"
    order:
      - file.name
  - type: table
    name: "ğŸ“‹ Workflow: Kanban (v)"
    filters:
      or:
        - status.contains("âš›")
        - status.contains("ğŸŸ¦")
        - status.contains("ğŸŸ¥")
    groupBy:
      property: formula.kanban
      direction: ASC
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: priority
        direction: ASC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: board-view
    name: "ğŸ“‹ Workflow: Kanban (h)"
    order:
      - file.name
      - formula.type
      - scientificity
      - category
    groupProperty: note.status
    hideEmptyGroups: false
    hiddenGroups:
      - ğŸ’¡
      - ğŸ§ 
      - ğŸ–
      - ğŸ”
      - ğŸ“¦
      - ğŸ“‹
      - âš™ï¸
      - ğŸ“¢
      - Empty Group
      - â„
      - â¬›
      - ğŸŸ©
    groupOrder:
      - ğŸŸ¥
      - ğŸŸ¦
      - âš›
    colorCells: false
    colorHeaders: true
    colorCards: true
    hideEmptySubGroups: true
    iconProperty: note.status
  - type: table
    name: "ğŸ—„ï¸ Workflow: Group By Type"
    filters:
      or:
        - status.contains("âš›")
        - status.contains("ğŸŸ¦")
        - status.contains("ğŸŸ¥")
    groupBy:
      property: formula.type
      direction: ASC
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.kanban
        direction: ASC
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: â€”â€”â€”
    filters:
      and:
        - "false"
    order:
      - file.name
  - type: table
    name: "ğŸŸ¥ Status: To Do"
    filters:
      and:
        - status.contains("ğŸŸ¥")
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: "ğŸŸ¦ Status: In Progress"
    filters:
      or:
        - status.contains("ğŸŸ¦")
        - status.contains("âš›")
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: status
        direction: ASC
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: "ğŸŸ© Status: Done"
    filters:
      and:
        - status.contains("ğŸŸ©")
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: "â¬› Status: Drop"
    filters:
      and:
        - status.contains("â¬›")
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: â€”â€”â€”
    filters:
      and:
        - "false"
    order:
      - file.name
  - type: table
    name: "ğŸ…°ï¸ Group: By Scientificity"
    groupBy:
      property: formula.scientificity
      direction: ASC
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.kanban
        direction: ASC
      - property: status
        direction: DESC
      - property: formula.rating
        direction: ASC
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: "ğŸŒ• Group: By Rating"
    groupBy:
      property: formula.rating
      direction: ASC
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.kanban
        direction: ASC
      - property: status
        direction: DESC
      - property: formula.scientificity
        direction: ASC
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: "ğŸ—ºï¸ Group: By Category"
    groupBy:
      property: category
      direction: ASC
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.kanban
        direction: ASC
      - property: status
        direction: DESC
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: "ğŸ” Group: By Meta"
    groupBy:
      property: meta
      direction: ASC
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.kanban
        direction: ASC
      - property: status
        direction: DESC
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: "âš¡ Group: By Problem"
    groupBy:
      property: problem
      direction: ASC
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.kanban
        direction: ASC
      - property: status
        direction: DESC
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: "ğŸ‘¨ Group: By Creator"
    groupBy:
      property: creator
      direction: ASC
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.kanban
        direction: ASC
      - property: status
        direction: DESC
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: "ğŸ¬ Group: By Production"
    groupBy:
      property: production
      direction: ASC
    order:
      - file.name
      - addition
      - zotero
      - status
      - scientificity
      - rating
      - category
      - meta
      - problem
      - creator
      - production
      - url
    sort:
      - property: formula.kanban
        direction: ASC
      - property: status
        direction: DESC
      - property: formula.created_relative
        direction: DESC
    columnSize:
      file.name: 530
      note.addition: 90
      note.zotero: 1
      note.status: 1
      note.scientificity: 1
      note.rating: 1
  - type: table
    name: â€”â€”â€”
    filters:
      and:
        - "false"
    order:
      - file.name
  - type: cards
    name: "ğŸ–¼ï¸ Gallery: Covers"
    filters:
      and:
        - cover != null
    groupBy:
      property: formula.type
      direction: ASC
    order:
      - file.name
    sort:
      - property: formula.created_relative
        direction: DESC
    image: note.cover
    imageFit: contain
    imageAspectRatio: 1.4
  - type: cards
    name: "ğŸ–¼ï¸ Gallery: Genres"
    filters:
      and:
        - cover != null
        - genre != null
    groupBy:
      property: genre
      direction: ASC
    order:
      - file.name
    sort:
      - property: formula.created_relative
        direction: DESC
    image: note.cover
    imageFit: contain
    imageAspectRatio: 1.4
  - type: table
    name: â€”â€”â€”
    filters:
      and:
        - "false"
    order:
      - file.name
  - type: table
    name: âœ… Structure Validation
    filters:
      or:
        - formula.category_type_valid == "âŒ"
        - formula.meta_type_valid == "âŒ"
        - formula.problem_type_valid == "âŒ"
        - formula.creator_type_valid == "âŒ"
        - formula.production_type_valid == "âŒ"
    order:
      - file.name
      - formula.category_type_valid
      - category
      - formula.meta_type_valid
      - meta
      - formula.problem_type_valid
      - problem
      - formula.creator_type_valid
      - creator
      - formula.production_type_valid
      - production
    sort:
      - property: formula.category_type_valid
        direction: DESC
      - property: formula.meta_type_valid
        direction: DESC
      - property: formula.problem_type_valid
        direction: DESC
      - property: formula.creator_type_valid
        direction: DESC
      - property: formula.production_type_valid
        direction: DESC
      - property: file.name
        direction: ASC
    columnSize:
      file.name: 350
      formula.category_type_valid: 70
      formula.meta_type_valid: 1
      formula.problem_type_valid: 1
      formula.creator_type_valid: 1
      formula.production_type_valid: 1
      note.category: 180
      note.meta: 180
      note.problem: 180
      note.creator: 180
      note.production: 180
