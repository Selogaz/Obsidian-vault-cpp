Идиома Not Versioned Interface используется для обеспечения безопасности многопоточного кода. Она основана на принципе, что если класс не изменяет свое внутреннее состояние, то он является потокобезопасным.

Для реализации идиомы NVI необходимо следовать нескольким правилам:
1. Все методы доступа к закрытым членам должны быть виртуальными. Это гарантирует, что при вызове метода будет вызываться правильная реализация, независимо от того, какой класс был создан.
2. Не должно быть никаких изменяющих состояние методов. Все методы должны быть const-квалифицированными, чтобы гарантировать, что они не изменяют внутреннее состояние объекта.
3. Не должно быть операторов присваивания или премещений. Эти операторы могут изменять внутреннее состояние объекта, что нарушает принцип потокобезопасности.
4. Если класс реализует интерфейс с виртуальными методами, то он должен быть полиморфным классом. Это означает, что он должен иметь базовый класс или быть наследником от класса с виртуальными функциями.

Соблюдение этих правил позволяет создавать потокобезопасные классы, которые могут использоваться в многопоточных приложениях без риска возникновения проблем с безопасностью.
[[C++]] [[Многопоточность]] [[Безопасность]] [[virtual]] [[Интерфейс]] [[Наследование]] [[Конструктор копирования]] 