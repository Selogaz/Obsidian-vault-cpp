std::shared_ptr

Данные не удаляются до тех пор, пока не исчезнет последний указатель на эти данные. В деструкторе shared_ptr ведется счетчик ссылок.

Несколько таких указателей могут указывать на ресурс. Память будет освобождена, когда последний shared_ptr перестанет ссылаться на ресурс(выйдет за пределы видимости)

```c++
#include <iostream>
#include <memory>

int main() {
    // Создание shared_ptr с выделением памяти для int
    std::shared_ptr<int> ptr1 = std::make_shared<int>(42);

    // Создание еще одного shared_ptr, разделяющего память
    std::shared_ptr<int> ptr2 = ptr1;

    // Использование указателей
    std::cout << *ptr1 << " " << *ptr2 << std::endl;

    // Память будет особождена, когда оба shared_ptr уничтожены
    return 0;
} // Память освобождается автоматически при уничтожении последнего shared_ptr
```

[[RAII]] [[Умные указатели]] [[C++]]