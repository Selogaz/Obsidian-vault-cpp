---
tags:
  - note/specific/exact
  - category/english
aliases: []
deck: obsidian::english
created: 2025-11-13T10:41:37+03:00
updated: 2025-11-14T18:10:05+03:00
---

**Шейдеры**
—
```toc
```

# Определение

Программа, запускаемая на видеокарте. На вход получает положение пикселя.
Их задача - вычисление цвета каждого отдельного пикселя.

Пример - OpenGL Shading Language - GLSL.

# Основы использования в shadertoy

положение пикселя - `vec2(x,y)` - входной параметр - `fragCoord`
цвет пикселя - `vec4(r,g,b,a)` - выходной параметр - `fragColor`
iResolution - vec3(x,y,z) - глобальная переменная

переход к координатам (-1,1)
```glsl
vec2 uv = fragCoord / iResolution.xy;
uv -= 0.5;
uv *= 2.;
float d = length(uv); 
```

Swizzling - возможность обращения к координатам в любом порядке.
Shadertoy - сайт

abs() и iTime нужно для анимации

# Категории шейдеров

7 категорий шейдеров:
- Для формирования границ объектов 3д мира
	- Вершинные
	- Геометрические
	- Поверхностные
	- Доменные
- Раскраска(освещение, затенение, прозрачность)
	- Пиксельные
	- Лучевые
	- Вычислительные шейдеры(cuda, opencl, генеративные ии)

Текстурирование - натягивание текстур на полигоны

# Компиляция шейдеров

Шейдеры написаны на высокоуровневых языках программирования. И чтобы видеокарта могла их использовать, он переводится в машинный код, понятный видеокарте. Это и есть компиляция шейдеров.

## Компиляция при первом запуске

## Компиляция во время игры

Здесь и появляются фризы.

### Способы уменьшить проблемы при компиляции во время игры

- Лок фпс
- Уменьшить нагрузку на процессор, чтобы он простаивал немного. А когда понадобится подгрузка шейдеров - фриза не будет.
- Уменьшать процессорозависимые настройки
- Купить мощный проц
- Direct Storage API

#### Direct storage API

Выгружает данные c SSD напрямую в видеопамять с минимальным влиянием процессора и ОС.
Пример - игра Forspoken, Diablo 4

## Общие моменты компиляции

Оба типа компиляции используются совместно. Соответственно, там, где фризы от компиляции шейдеров - виновата видеокарта.
Шейдеры компилируются под каждую конкретную видеокарту, драйвер и систему. Поэтому заранее их скомпилировать нельзя.
