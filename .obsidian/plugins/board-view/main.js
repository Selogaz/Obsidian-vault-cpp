/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var de=Object.defineProperty;var so=Object.getOwnPropertyDescriptor;var lo=Object.getOwnPropertyNames;var uo=Object.prototype.hasOwnProperty;var co=(r,t)=>{for(var e in t)de(r,e,{get:t[e],enumerable:!0})},po=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of lo(t))!uo.call(r,n)&&n!==e&&de(r,n,{get:()=>t[n],enumerable:!(o=so(t,n))||o.enumerable});return r};var fo=r=>po(de({},"__esModule",{value:!0}),r);var Ho={};co(Ho,{BASES_VIEW_ID:()=>le,default:()=>ue});module.exports=fo(Ho);var Bt=class{static initialize(){}};var Te=require("obsidian"),Re={columnColors:{}},Lt=class extends Te.PluginSettingTab{constructor(t,e){super(t,e)}display(){let{containerEl:t}=this;t.empty()}};var no=require("obsidian");function H(r){if(!r)return"";let t=r.split(".");return t.length>1?t.slice(1).join("."):r}var ut=class{getFile(t){return C.app.vault.getFileByPath(t)}getPropertyType(t){try{return C.app.metadataTypeManager.properties[t.toLowerCase()].widget||null}catch(e){return null}}async updateFrontmatter(t,e,o){await C.app.fileManager.processFrontMatter(t,n=>{n[e]=o})}getPropertyValues(t){let e;try{e=C.app.metadataCache.getFrontmatterPropertyValuesForKey(t)}catch(o){console.warn("Error getting property values",o)}return e!=null?e:[]}};var C=class{static initialize(t){this.plugin=t,this.app=t.app,this.settings=t.settings,this.propertyManager=new ut}};var se=require("obsidian");var kt=class{constructor(t,e){this.data=t;this.config=e}build(t){var m;let e={},o=[],n=[],i=t.groupProperty,a=t.subGroupProperty,s=new Set(t.hiddenGroups||[]),l=new Set(t.hiddenSubGroups||[]),u={groupPropertyId:i||"",subGroupPropertyId:a,columns:o,rows:n,items:e,cardOptions:t,cardProperties:this.config.getOrder(),columnColors:C.settings.columnColors||{}},c=((m=this.data)==null?void 0:m.data)||[],d=new Map,h=new Map;for(let f of c){let b=B,g=null;if(i){let N=f.getValue(i);N!=null&&N.isTruthy()&&(g=N.data,g===void 0&&(g=N.toString()),b=N.toString())}d.has(b)||d.set(b,g);let P=B,M=null;if(a){let N=f.getValue(a);N!=null&&N.isTruthy()&&(M=N.data,M===void 0&&(M=N.toString()),P=N.toString())}h.has(P)||h.set(P,M)}if(!t.hideEmptyGroups&&i){let b=new ut().getPropertyValues(H(i));for(let g of b)d.has(g)||d.set(g,g);d.has(B)||d.set(B,null)}if(!t.hideEmptySubGroups&&a){let b=new ut().getPropertyValues(H(a));for(let g of b)h.has(g)||h.set(g,g);h.has(B)||h.set(B,null)}let D=this.sortGroups(Array.from(d.keys()),t.groupOrder);for(let f of D)s.has(f)||(o.push({id:f,title:f,rawValue:d.get(f),count:0}),e[f]={});let w=this.sortGroups(Array.from(h.keys()),t.subGroupOrder);for(let f of w)l.has(f)||n.push({id:f,title:f,rawValue:h.get(f),count:0});for(let f of c){let b=B;if(i){let P=f.getValue(i);P!=null&&P.isTruthy()?b=P.toString():b=B}let g=B;if(a){let P=f.getValue(a);P!=null&&P.isTruthy()?g=P.toString():g=B}s.has(b)||a&&l.has(g)||(e[b]||(e[b]={}),e[b][g]||(e[b][g]=[]),e[b][g].push({id:f.file.path,groupId:b,subGroupId:g==="default"?void 0:g,data:f}))}for(let f of o){let b=0;if(e[f.id])for(let g in e[f.id])b+=e[f.id][g].length;f.count=b}for(let f of n){let b=0;for(let g of o)e[g.id]&&e[g.id][f.id]&&(b+=e[g.id][f.id].length);f.count=b}return u}sortGroups(t,e){if(!e||e.length===0)return t.sort();let o=e.filter(i=>t.includes(i)),n=t.filter(i=>!e.includes(i)).sort();return[...o,...n]}};var Ne=require("obsidian");var Ht=class{constructor(){this.pendingNote=null}handleNewNoteClick(t,e,o,n){this.pendingNote={groupValue:t,subGroupValue:e,groupPropertyId:o,subGroupPropertyId:n};let i=document.querySelector(".bases-toolbar-new-item-menu .text-icon-button");i instanceof HTMLElement?i.click():(console.warn("[BoardNoteCreator] New button not found"),this.pendingNote=null)}async processPendingNote(){var t;if(this.pendingNote)try{let e=(t=C.app.workspace._activeEditor)==null?void 0:t.file;e instanceof Ne.TFile?await this.assignGroupValues(e,this.pendingNote.groupValue,this.pendingNote.subGroupValue,this.pendingNote.groupPropertyId,this.pendingNote.subGroupPropertyId):console.warn("[BoardNoteCreator] No active editor file found")}finally{this.pendingNote=null}}async assignGroupValues(t,e,o,n,i){if(n&&e!==null&&e!==B){let a=H(n);await C.propertyManager.updateFrontmatter(t,a,e)}if(i&&o!==void 0&&o!==null&&o!==B){let a=H(i);await C.propertyManager.updateFrontmatter(t,a,o)}}};var ft=require("obsidian");function Me(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);t&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),e.push.apply(e,o)}return e}function Q(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Me(Object(e),!0).forEach(function(o){ho(r,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Me(Object(e)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(e,o))})}return r}function Wt(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wt=function(t){return typeof t}:Wt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(r)}function ho(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function tt(){return tt=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},tt.apply(this,arguments)}function go(r,t){if(r==null)return{};var e={},o=Object.keys(r),n,i;for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&(e[n]=r[n]);return e}function mo(r,t){if(r==null)return{};var e=go(r,t),o,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(n=0;n<i.length;n++)o=i[n],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(r,o)&&(e[o]=r[o])}return e}var bo="1.15.6";function J(r){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(r)}var et=J(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),At=J(/Edge/i),Ae=J(/firefox/i),It=J(/safari/i)&&!J(/chrome/i)&&!J(/android/i),Ce=J(/iP(ad|od|hone)/i),Fe=J(/chrome/i)&&J(/android/i),Ue={capture:!1,passive:!1};function O(r,t,e){r.addEventListener(t,e,!et&&Ue)}function _(r,t,e){r.removeEventListener(t,e,!et&&Ue)}function jt(r,t){if(t){if(t[0]===">"&&(t=t.substring(1)),r)try{if(r.matches)return r.matches(t);if(r.msMatchesSelector)return r.msMatchesSelector(t);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function Ye(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function X(r,t,e,o){if(r){e=e||document;do{if(t!=null&&(t[0]===">"?r.parentNode===e&&jt(r,t):jt(r,t))||o&&r===e)return r;if(r===e)break}while(r=Ye(r))}return null}var Ge=/\s+/g;function Y(r,t,e){if(r&&t)if(r.classList)r.classList[e?"add":"remove"](t);else{var o=(" "+r.className+" ").replace(Ge," ").replace(" "+t+" "," ");r.className=(o+(e?" "+t:"")).replace(Ge," ")}}function v(r,t,e){var o=r&&r.style;if(o){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(e=r.currentStyle),t===void 0?e:e[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=e+(typeof e=="string"?"":"px")}}function vt(r,t){var e="";if(typeof r=="string")e=r;else do{var o=v(r,"transform");o&&o!=="none"&&(e=o+" "+e)}while(!t&&(r=r.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(e)}function We(r,t,e){if(r){var o=r.getElementsByTagName(t),n=0,i=o.length;if(e)for(;n<i;n++)e(o[n],n);return o}return[]}function q(){var r=document.scrollingElement;return r||document.documentElement}function G(r,t,e,o,n){if(!(!r.getBoundingClientRect&&r!==window)){var i,a,s,l,u,c,d;if(r!==window&&r.parentNode&&r!==q()?(i=r.getBoundingClientRect(),a=i.top,s=i.left,l=i.bottom,u=i.right,c=i.height,d=i.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||e)&&r!==window&&(n=n||r.parentNode,!et))do if(n&&n.getBoundingClientRect&&(v(n,"transform")!=="none"||e&&v(n,"position")!=="static")){var h=n.getBoundingClientRect();a-=h.top+parseInt(v(n,"border-top-width")),s-=h.left+parseInt(v(n,"border-left-width")),l=a+i.height,u=s+i.width;break}while(n=n.parentNode);if(o&&r!==window){var D=vt(n||r),w=D&&D.a,m=D&&D.d;D&&(a/=m,s/=w,d/=w,c/=m,l=a+c,u=s+d)}return{top:a,left:s,bottom:l,right:u,width:d,height:c}}}function xe(r,t,e){for(var o=at(r,!0),n=G(r)[t];o;){var i=G(o)[e],a=void 0;if(e==="top"||e==="left"?a=n>=i:a=n<=i,!a)return o;if(o===q())break;o=at(o,!1)}return!1}function yt(r,t,e,o){for(var n=0,i=0,a=r.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==y.ghost&&(o||a[i]!==y.dragged)&&X(a[i],e.draggable,r,!1)){if(n===t)return a[i];n++}i++}return null}function _e(r,t){for(var e=r.lastElementChild;e&&(e===y.ghost||v(e,"display")==="none"||t&&!jt(e,t));)e=e.previousElementSibling;return e||null}function $(r,t){var e=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==y.clone&&(!t||jt(r,t))&&e++;return e}function Be(r){var t=0,e=0,o=q();if(r)do{var n=vt(r),i=n.a,a=n.d;t+=r.scrollLeft*i,e+=r.scrollTop*a}while(r!==o&&(r=r.parentNode));return[t,e]}function vo(r,t){for(var e in r)if(r.hasOwnProperty(e)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===r[e][o])return Number(e)}return-1}function at(r,t){if(!r||!r.getBoundingClientRect)return q();var e=r,o=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var n=v(e);if(e.clientWidth<e.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return q();if(o||t)return e;o=!0}}while(e=e.parentNode);return q()}function yo(r,t){if(r&&t)for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function ce(r,t){return Math.round(r.top)===Math.round(t.top)&&Math.round(r.left)===Math.round(t.left)&&Math.round(r.height)===Math.round(t.height)&&Math.round(r.width)===Math.round(t.width)}var Tt;function $e(r,t){return function(){if(!Tt){var e=arguments,o=this;e.length===1?r.call(o,e[0]):r.apply(o,e),Tt=setTimeout(function(){Tt=void 0},t)}}}function wo(){clearTimeout(Tt),Tt=void 0}function Ke(r,t,e){r.scrollLeft+=t,r.scrollTop+=e}function Xe(r){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(r).cloneNode(!0):e?e(r).clone(!0)[0]:r.cloneNode(!0)}function ze(r,t,e){var o={};return Array.from(r.children).forEach(function(n){var i,a,s,l;if(!(!X(n,t.draggable,r,!1)||n.animated||n===e)){var u=G(n);o.left=Math.min((i=o.left)!==null&&i!==void 0?i:1/0,u.left),o.top=Math.min((a=o.top)!==null&&a!==void 0?a:1/0,u.top),o.right=Math.max((s=o.right)!==null&&s!==void 0?s:-1/0,u.right),o.bottom=Math.max((l=o.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var F="Sortable"+new Date().getTime();function Eo(){var r=[],t;return{captureAnimationState:function(){if(r=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(n){if(!(v(n,"display")==="none"||n===y.ghost)){r.push({target:n,rect:G(n)});var i=Q({},r[r.length-1].rect);if(n.thisAnimationDuration){var a=vt(n,!0);a&&(i.top-=a.f,i.left-=a.e)}n.fromRect=i}})}},addAnimationState:function(o){r.push(o)},removeAnimationState:function(o){r.splice(vo(r,{target:o}),1)},animateAll:function(o){var n=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var i=!1,a=0;r.forEach(function(s){var l=0,u=s.target,c=u.fromRect,d=G(u),h=u.prevFromRect,D=u.prevToRect,w=s.rect,m=vt(u,!0);m&&(d.top-=m.f,d.left-=m.e),u.toRect=d,u.thisAnimationDuration&&ce(h,d)&&!ce(c,d)&&(w.top-d.top)/(w.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(l=Do(w,h,D,n.options)),ce(d,c)||(u.prevFromRect=c,u.prevToRect=d,l||(l=n.options.animation),n.animate(u,w,d,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(t),i?t=setTimeout(function(){typeof o=="function"&&o()},a):typeof o=="function"&&o(),r=[]},animate:function(o,n,i,a){if(a){v(o,"transition",""),v(o,"transform","");var s=vt(this.el),l=s&&s.a,u=s&&s.d,c=(n.left-i.left)/(l||1),d=(n.top-i.top)/(u||1);o.animatingX=!!c,o.animatingY=!!d,v(o,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=So(o),v(o,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),v(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){v(o,"transition",""),v(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},a)}}}}function So(r){return r.offsetWidth}function Do(r,t,e,o){return Math.sqrt(Math.pow(t.top-r.top,2)+Math.pow(t.left-r.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*o.animation}var ht=[],pe={initializeByDefault:!0},Gt={mount:function(t){for(var e in pe)pe.hasOwnProperty(e)&&!(e in t)&&(t[e]=pe[e]);ht.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ht.push(t)},pluginEvent:function(t,e,o){var n=this;this.eventCanceled=!1,o.cancel=function(){n.eventCanceled=!0};var i=t+"Global";ht.forEach(function(a){e[a.pluginName]&&(e[a.pluginName][i]&&e[a.pluginName][i](Q({sortable:e},o)),e.options[a.pluginName]&&e[a.pluginName][t]&&e[a.pluginName][t](Q({sortable:e},o)))})},initializePlugins:function(t,e,o,n){ht.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var u=new s(t,e,t.options);u.sortable=t,u.options=t.options,t[l]=u,tt(o,u.defaults)}});for(var i in t.options)if(t.options.hasOwnProperty(i)){var a=this.modifyOption(t,i,t.options[i]);typeof a!="undefined"&&(t.options[i]=a)}},getEventProperties:function(t,e){var o={};return ht.forEach(function(n){typeof n.eventProperties=="function"&&tt(o,n.eventProperties.call(e[n.pluginName],t))}),o},modifyOption:function(t,e,o){var n;return ht.forEach(function(i){t[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[e]=="function"&&(n=i.optionListeners[e].call(t[i.pluginName],o))}),n}};function Co(r){var t=r.sortable,e=r.rootEl,o=r.name,n=r.targetEl,i=r.cloneEl,a=r.toEl,s=r.fromEl,l=r.oldIndex,u=r.newIndex,c=r.oldDraggableIndex,d=r.newDraggableIndex,h=r.originalEvent,D=r.putSortable,w=r.extraEventProperties;if(t=t||e&&e[F],!!t){var m,f=t.options,b="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!et&&!At?m=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(o,!0,!0)),m.to=a||e,m.from=s||e,m.item=n||e,m.clone=i,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=d,m.originalEvent=h,m.pullMode=D?D.lastPutMode:void 0;var g=Q(Q({},w),Gt.getEventProperties(o,t));for(var P in g)m[P]=g[P];e&&e.dispatchEvent(m),f[b]&&f[b].call(t,m)}}var _o=["evt"],V=function(t,e){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=o.evt,i=mo(o,_o);Gt.pluginEvent.bind(y)(t,e,Q({dragEl:p,parentEl:R,ghostEl:E,rootEl:I,nextEl:pt,lastDownEl:$t,cloneEl:T,cloneHidden:it,dragStarted:_t,putSortable:x,activeSortable:y.active,originalEvent:n,oldIndex:bt,oldDraggableIndex:Rt,newIndex:W,newDraggableIndex:nt,hideGhostForTarget:Ze,unhideGhostForTarget:Je,cloneNowHidden:function(){it=!0},cloneNowShown:function(){it=!1},dispatchSortableEvent:function(s){k({sortable:e,name:s,originalEvent:n})}},i))};function k(r){Co(Q({putSortable:x,cloneEl:T,targetEl:p,rootEl:I,oldIndex:bt,oldDraggableIndex:Rt,newIndex:W,newDraggableIndex:nt},r))}var p,R,E,I,pt,$t,T,it,bt,W,Rt,nt,Vt,x,mt=!1,qt=!1,Qt=[],dt,K,fe,he,Le,ke,_t,gt,Nt,Mt=!1,Ft=!1,Kt,L,ge=[],we=!1,Zt=[],te=typeof document!="undefined",Ut=Ce,He=At||et?"cssFloat":"float",Oo=te&&!Fe&&!Ce&&"draggable"in document.createElement("div"),je=function(){if(te){if(et)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),qe=function(t,e){var o=v(t),n=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),i=yt(t,0,e),a=yt(t,1,e),s=i&&v(i),l=a&&v(a),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+G(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+G(a).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=n&&o[He]==="none"||a&&o[He]==="none"&&u+c>n)?"vertical":"horizontal"},Po=function(t,e,o){var n=o?t.left:t.top,i=o?t.right:t.bottom,a=o?t.width:t.height,s=o?e.left:e.top,l=o?e.right:e.bottom,u=o?e.width:e.height;return n===s||i===l||n+a/2===s+u/2},Io=function(t,e){var o;return Qt.some(function(n){var i=n[F].options.emptyInsertThreshold;if(!(!i||_e(n))){var a=G(n),s=t>=a.left-i&&t<=a.right+i,l=e>=a.top-i&&e<=a.bottom+i;if(s&&l)return o=n}}),o},Qe=function(t){function e(i,a){return function(s,l,u,c){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(i==null&&(a||d))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return e(i(s,l,u,c),a)(s,l,u,c);var h=(a?s:l).options.group.name;return i===!0||typeof i=="string"&&i===h||i.join&&i.indexOf(h)>-1}}var o={},n=t.group;(!n||Wt(n)!="object")&&(n={name:n}),o.name=n.name,o.checkPull=e(n.pull,!0),o.checkPut=e(n.put),o.revertClone=n.revertClone,t.group=o},Ze=function(){!je&&E&&v(E,"display","none")},Je=function(){!je&&E&&v(E,"display","")};te&&!Fe&&document.addEventListener("click",function(r){if(qt)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),qt=!1,!1},!0);var ct=function(t){if(p){t=t.touches?t.touches[0]:t;var e=Io(t.clientX,t.clientY);if(e){var o={};for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[F]._onDragOver(o)}}},To=function(t){p&&p.parentNode[F]._isOutsideThisEl(t.target)};function y(r,t){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=t=tt({},t),r[F]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return qe(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:y.supportPointer!==!1&&"PointerEvent"in window&&(!It||Ce),emptyInsertThreshold:5};Gt.initializePlugins(this,r,e);for(var o in e)!(o in t)&&(t[o]=e[o]);Qe(t);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=t.forceFallback?!1:Oo,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?O(r,"pointerdown",this._onTapStart):(O(r,"mousedown",this._onTapStart),O(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(O(r,"dragover",this),O(r,"dragenter",this)),Qt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),tt(this,Eo())}y.prototype={constructor:y,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(gt=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,p):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,o=this.el,n=this.options,i=n.preventOnFilter,a=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,c=n.filter;if(Lo(o),!p&&!(/mousedown|pointerdown/.test(a)&&t.button!==0||n.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&It&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=X(l,n.draggable,o,!1),!(l&&l.animated)&&$t!==l)){if(bt=$(l),Rt=$(l,n.draggable),typeof c=="function"){if(c.call(this,t,l,this)){k({sortable:e,rootEl:u,name:"filter",targetEl:l,toEl:o,fromEl:o}),V("filter",e,{evt:t}),i&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=X(u,d.trim(),o,!1),d)return k({sortable:e,rootEl:d,name:"filter",targetEl:l,fromEl:o,toEl:o}),V("filter",e,{evt:t}),!0}),c)){i&&t.preventDefault();return}n.handle&&!X(u,n.handle,o,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,o){var n=this,i=n.el,a=n.options,s=i.ownerDocument,l;if(o&&!p&&o.parentNode===i){var u=G(o);if(I=i,p=o,R=p.parentNode,pt=p.nextSibling,$t=o,Vt=a.group,y.dragged=p,dt={target:p,clientX:(e||t).clientX,clientY:(e||t).clientY},Le=dt.clientX-u.left,ke=dt.clientY-u.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,p.style["will-change"]="all",l=function(){if(V("delayEnded",n,{evt:t}),y.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Ae&&n.nativeDraggable&&(p.draggable=!0),n._triggerDragStart(t,e),k({sortable:n,name:"choose",originalEvent:t}),Y(p,a.chosenClass,!0)},a.ignore.split(",").forEach(function(c){We(p,c.trim(),me)}),O(s,"dragover",ct),O(s,"mousemove",ct),O(s,"touchmove",ct),a.supportPointer?(O(s,"pointerup",n._onDrop),!this.nativeDraggable&&O(s,"pointercancel",n._onDrop)):(O(s,"mouseup",n._onDrop),O(s,"touchend",n._onDrop),O(s,"touchcancel",n._onDrop)),Ae&&this.nativeDraggable&&(this.options.touchStartThreshold=4,p.draggable=!0),V("delayStart",this,{evt:t}),a.delay&&(!a.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(At||et))){if(y.eventCanceled){this._onDrop();return}a.supportPointer?(O(s,"pointerup",n._disableDelayedDrag),O(s,"pointercancel",n._disableDelayedDrag)):(O(s,"mouseup",n._disableDelayedDrag),O(s,"touchend",n._disableDelayedDrag),O(s,"touchcancel",n._disableDelayedDrag)),O(s,"mousemove",n._delayedDragTouchMoveHandler),O(s,"touchmove",n._delayedDragTouchMoveHandler),a.supportPointer&&O(s,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){p&&me(p),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;_(t,"mouseup",this._disableDelayedDrag),_(t,"touchend",this._disableDelayedDrag),_(t,"touchcancel",this._disableDelayedDrag),_(t,"pointerup",this._disableDelayedDrag),_(t,"pointercancel",this._disableDelayedDrag),_(t,"mousemove",this._delayedDragTouchMoveHandler),_(t,"touchmove",this._delayedDragTouchMoveHandler),_(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?O(document,"pointermove",this._onTouchMove):e?O(document,"touchmove",this._onTouchMove):O(document,"mousemove",this._onTouchMove):(O(p,"dragend",this),O(I,"dragstart",this._onDragStart));try{document.selection?Xt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(o){}},_dragStarted:function(t,e){if(mt=!1,I&&p){V("dragStarted",this,{evt:e}),this.nativeDraggable&&O(document,"dragover",To);var o=this.options;!t&&Y(p,o.dragClass,!1),Y(p,o.ghostClass,!0),y.active=this,t&&this._appendGhost(),k({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(K){this._lastX=K.clientX,this._lastY=K.clientY,Ze();for(var t=document.elementFromPoint(K.clientX,K.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(K.clientX,K.clientY),t!==e);)e=t;if(p.parentNode[F]._isOutsideThisEl(t),e)do{if(e[F]){var o=void 0;if(o=e[F]._onDragOver({clientX:K.clientX,clientY:K.clientY,target:t,rootEl:e}),o&&!this.options.dragoverBubble)break}t=e}while(e=Ye(e));Je()}},_onTouchMove:function(t){if(dt){var e=this.options,o=e.fallbackTolerance,n=e.fallbackOffset,i=t.touches?t.touches[0]:t,a=E&&vt(E,!0),s=E&&a&&a.a,l=E&&a&&a.d,u=Ut&&L&&Be(L),c=(i.clientX-dt.clientX+n.x)/(s||1)+(u?u[0]-ge[0]:0)/(s||1),d=(i.clientY-dt.clientY+n.y)/(l||1)+(u?u[1]-ge[1]:0)/(l||1);if(!y.active&&!mt){if(o&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(E){a?(a.e+=c-(fe||0),a.f+=d-(he||0)):a={a:1,b:0,c:0,d:1,e:c,f:d};var h="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");v(E,"webkitTransform",h),v(E,"mozTransform",h),v(E,"msTransform",h),v(E,"transform",h),fe=c,he=d,K=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!E){var t=this.options.fallbackOnBody?document.body:I,e=G(p,!0,Ut,!0,t),o=this.options;if(Ut){for(L=t;v(L,"position")==="static"&&v(L,"transform")==="none"&&L!==document;)L=L.parentNode;L!==document.body&&L!==document.documentElement?(L===document&&(L=q()),e.top+=L.scrollTop,e.left+=L.scrollLeft):L=q(),ge=Be(L)}E=p.cloneNode(!0),Y(E,o.ghostClass,!1),Y(E,o.fallbackClass,!0),Y(E,o.dragClass,!0),v(E,"transition",""),v(E,"transform",""),v(E,"box-sizing","border-box"),v(E,"margin",0),v(E,"top",e.top),v(E,"left",e.left),v(E,"width",e.width),v(E,"height",e.height),v(E,"opacity","0.8"),v(E,"position",Ut?"absolute":"fixed"),v(E,"zIndex","100000"),v(E,"pointerEvents","none"),y.ghost=E,t.appendChild(E),v(E,"transform-origin",Le/parseInt(E.style.width)*100+"% "+ke/parseInt(E.style.height)*100+"%")}},_onDragStart:function(t,e){var o=this,n=t.dataTransfer,i=o.options;if(V("dragStart",this,{evt:t}),y.eventCanceled){this._onDrop();return}V("setupClone",this),y.eventCanceled||(T=Xe(p),T.removeAttribute("id"),T.draggable=!1,T.style["will-change"]="",this._hideClone(),Y(T,this.options.chosenClass,!1),y.clone=T),o.cloneId=Xt(function(){V("clone",o),!y.eventCanceled&&(o.options.removeCloneOnHide||I.insertBefore(T,p),o._hideClone(),k({sortable:o,name:"clone"}))}),!e&&Y(p,i.dragClass,!0),e?(qt=!0,o._loopId=setInterval(o._emulateDragOver,50)):(_(document,"mouseup",o._onDrop),_(document,"touchend",o._onDrop),_(document,"touchcancel",o._onDrop),n&&(n.effectAllowed="move",i.setData&&i.setData.call(o,n,p)),O(document,"drop",o),v(p,"transform","translateZ(0)")),mt=!0,o._dragStartId=Xt(o._dragStarted.bind(o,e,t)),O(document,"selectstart",o),_t=!0,window.getSelection().removeAllRanges(),It&&v(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,o=t.target,n,i,a,s=this.options,l=s.group,u=y.active,c=Vt===l,d=s.sort,h=x||u,D,w=this,m=!1;if(we)return;function f(Ct,io){V(Ct,w,Q({evt:t,isOwner:c,axis:D?"vertical":"horizontal",revert:a,dragRect:n,targetRect:i,canSort:d,fromSortable:h,target:o,completed:g,onMove:function(Ie,ao){return Yt(I,e,p,n,Ie,G(Ie),t,ao)},changed:P},io))}function b(){f("dragOverAnimationCapture"),w.captureAnimationState(),w!==h&&h.captureAnimationState()}function g(Ct){return f("dragOverCompleted",{insertion:Ct}),Ct&&(c?u._hideClone():u._showClone(w),w!==h&&(Y(p,x?x.options.ghostClass:u.options.ghostClass,!1),Y(p,s.ghostClass,!0)),x!==w&&w!==y.active?x=w:w===y.active&&x&&(x=null),h===w&&(w._ignoreWhileAnimating=o),w.animateAll(function(){f("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(o===p&&!p.animated||o===e&&!o.animated)&&(gt=null),!s.dragoverBubble&&!t.rootEl&&o!==document&&(p.parentNode[F]._isOutsideThisEl(t.target),!Ct&&ct(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),m=!0}function P(){W=$(p),nt=$(p,s.draggable),k({sortable:w,name:"change",toEl:e,newIndex:W,newDraggableIndex:nt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=X(o,s.draggable,e,!0),f("dragOver"),y.eventCanceled)return m;if(p.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||w._ignoreWhileAnimating===o)return g(!1);if(qt=!1,u&&!s.disabled&&(c?d||(a=R!==I):x===this||(this.lastPutMode=Vt.checkPull(this,u,p,t))&&l.checkPut(this,u,p,t))){if(D=this._getDirection(t,o)==="vertical",n=G(p),f("dragOverValid"),y.eventCanceled)return m;if(a)return R=I,b(),this._hideClone(),f("revert"),y.eventCanceled||(pt?I.insertBefore(p,pt):I.appendChild(p)),g(!0);var M=_e(e,s.draggable);if(!M||Ao(t,D,this)&&!M.animated){if(M===p)return g(!1);if(M&&e===t.target&&(o=M),o&&(i=G(o)),Yt(I,e,p,n,o,i,t,!!o)!==!1)return b(),M&&M.nextSibling?e.insertBefore(p,M.nextSibling):e.appendChild(p),R=e,P(),g(!0)}else if(M&&Mo(t,D,this)){var N=yt(e,0,s,!0);if(N===p)return g(!1);if(o=N,i=G(o),Yt(I,e,p,n,o,i,t,!1)!==!1)return b(),e.insertBefore(p,N),R=e,P(),g(!0)}else if(o.parentNode===e){i=G(o);var j=0,st,wt=p.parentNode!==e,U=!Po(p.animated&&p.toRect||n,o.animated&&o.toRect||i,D),Et=D?"top":"left",ot=xe(o,"top","top")||xe(p,"top","top"),St=ot?ot.scrollTop:void 0;gt!==o&&(st=i[Et],Mt=!1,Ft=!U&&s.invertSwap||wt),j=Go(t,o,i,D,U?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ft,gt===o);var Z;if(j!==0){var lt=$(p);do lt-=j,Z=R.children[lt];while(Z&&(v(Z,"display")==="none"||Z===E))}if(j===0||Z===o)return g(!1);gt=o,Nt=j;var Dt=o.nextElementSibling,rt=!1;rt=j===1;var xt=Yt(I,e,p,n,o,i,t,rt);if(xt!==!1)return(xt===1||xt===-1)&&(rt=xt===1),we=!0,setTimeout(No,30),b(),rt&&!Dt?e.appendChild(p):o.parentNode.insertBefore(p,rt?Dt:o),ot&&Ke(ot,0,St-ot.scrollTop),R=p.parentNode,st!==void 0&&!Ft&&(Kt=Math.abs(st-G(o)[Et])),P(),g(!0)}if(e.contains(p))return g(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){_(document,"mousemove",this._onTouchMove),_(document,"touchmove",this._onTouchMove),_(document,"pointermove",this._onTouchMove),_(document,"dragover",ct),_(document,"mousemove",ct),_(document,"touchmove",ct)},_offUpEvents:function(){var t=this.el.ownerDocument;_(t,"mouseup",this._onDrop),_(t,"touchend",this._onDrop),_(t,"pointerup",this._onDrop),_(t,"pointercancel",this._onDrop),_(t,"touchcancel",this._onDrop),_(document,"selectstart",this)},_onDrop:function(t){var e=this.el,o=this.options;if(W=$(p),nt=$(p,o.draggable),V("drop",this,{evt:t}),R=p&&p.parentNode,W=$(p),nt=$(p,o.draggable),y.eventCanceled){this._nulling();return}mt=!1,Ft=!1,Mt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ee(this.cloneId),Ee(this._dragStartId),this.nativeDraggable&&(_(document,"drop",this),_(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),It&&v(document.body,"user-select",""),v(p,"transform",""),t&&(_t&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),E&&E.parentNode&&E.parentNode.removeChild(E),(I===R||x&&x.lastPutMode!=="clone")&&T&&T.parentNode&&T.parentNode.removeChild(T),p&&(this.nativeDraggable&&_(p,"dragend",this),me(p),p.style["will-change"]="",_t&&!mt&&Y(p,x?x.options.ghostClass:this.options.ghostClass,!1),Y(p,this.options.chosenClass,!1),k({sortable:this,name:"unchoose",toEl:R,newIndex:null,newDraggableIndex:null,originalEvent:t}),I!==R?(W>=0&&(k({rootEl:R,name:"add",toEl:R,fromEl:I,originalEvent:t}),k({sortable:this,name:"remove",toEl:R,originalEvent:t}),k({rootEl:R,name:"sort",toEl:R,fromEl:I,originalEvent:t}),k({sortable:this,name:"sort",toEl:R,originalEvent:t})),x&&x.save()):W!==bt&&W>=0&&(k({sortable:this,name:"update",toEl:R,originalEvent:t}),k({sortable:this,name:"sort",toEl:R,originalEvent:t})),y.active&&((W==null||W===-1)&&(W=bt,nt=Rt),k({sortable:this,name:"end",toEl:R,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){V("nulling",this),I=p=R=E=pt=T=$t=it=dt=K=_t=W=nt=bt=Rt=gt=Nt=x=Vt=y.dragged=y.ghost=y.clone=y.active=null,Zt.forEach(function(t){t.checked=!0}),Zt.length=fe=he=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":p&&(this._onDragOver(t),Ro(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,o=this.el.children,n=0,i=o.length,a=this.options;n<i;n++)e=o[n],X(e,a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||Bo(e));return t},sort:function(t,e){var o={},n=this.el;this.toArray().forEach(function(i,a){var s=n.children[a];X(s,this.options.draggable,n,!1)&&(o[i]=s)},this),e&&this.captureAnimationState(),t.forEach(function(i){o[i]&&(n.removeChild(o[i]),n.appendChild(o[i]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return X(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(e===void 0)return o[t];var n=Gt.modifyOption(this,t,e);typeof n!="undefined"?o[t]=n:o[t]=e,t==="group"&&Qe(o)},destroy:function(){V("destroy",this);var t=this.el;t[F]=null,_(t,"mousedown",this._onTapStart),_(t,"touchstart",this._onTapStart),_(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(_(t,"dragover",this),_(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qt.splice(Qt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!it){if(V("hideClone",this),y.eventCanceled)return;v(T,"display","none"),this.options.removeCloneOnHide&&T.parentNode&&T.parentNode.removeChild(T),it=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(it){if(V("showClone",this),y.eventCanceled)return;p.parentNode==I&&!this.options.group.revertClone?I.insertBefore(T,p):pt?I.insertBefore(T,pt):I.appendChild(T),this.options.group.revertClone&&this.animate(p,T),v(T,"display",""),it=!1}}};function Ro(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function Yt(r,t,e,o,n,i,a,s){var l,u=r[F],c=u.options.onMove,d;return window.CustomEvent&&!et&&!At?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=r,l.dragged=e,l.draggedRect=o,l.related=n||t,l.relatedRect=i||G(t),l.willInsertAfter=s,l.originalEvent=a,r.dispatchEvent(l),c&&(d=c.call(u,l,a)),d}function me(r){r.draggable=!1}function No(){we=!1}function Mo(r,t,e){var o=G(yt(e.el,0,e.options,!0)),n=ze(e.el,e.options,E),i=10;return t?r.clientX<n.left-i||r.clientY<o.top&&r.clientX<o.right:r.clientY<n.top-i||r.clientY<o.bottom&&r.clientX<o.left}function Ao(r,t,e){var o=G(_e(e.el,e.options.draggable)),n=ze(e.el,e.options,E),i=10;return t?r.clientX>n.right+i||r.clientY>o.bottom&&r.clientX>o.left:r.clientY>n.bottom+i||r.clientX>o.right&&r.clientY>o.top}function Go(r,t,e,o,n,i,a,s){var l=o?r.clientY:r.clientX,u=o?e.height:e.width,c=o?e.top:e.left,d=o?e.bottom:e.right,h=!1;if(!a){if(s&&Kt<u*n){if(!Mt&&(Nt===1?l>c+u*i/2:l<d-u*i/2)&&(Mt=!0),Mt)h=!0;else if(Nt===1?l<c+Kt:l>d-Kt)return-Nt}else if(l>c+u*(1-n)/2&&l<d-u*(1-n)/2)return xo(t)}return h=h||a,h&&(l<c+u*i/2||l>d-u*i/2)?l>c+u/2?1:-1:0}function xo(r){return $(p)<$(r)?1:-1}function Bo(r){for(var t=r.tagName+r.className+r.src+r.href+r.textContent,e=t.length,o=0;e--;)o+=t.charCodeAt(e);return o.toString(36)}function Lo(r){Zt.length=0;for(var t=r.getElementsByTagName("input"),e=t.length;e--;){var o=t[e];o.checked&&Zt.push(o)}}function Xt(r){return setTimeout(r,0)}function Ee(r){return clearTimeout(r)}te&&O(document,"touchmove",function(r){(y.active||mt)&&r.cancelable&&r.preventDefault()});y.utils={on:O,off:_,css:v,find:We,is:function(t,e){return!!X(t,e,t,!1)},extend:yo,throttle:$e,closest:X,toggleClass:Y,clone:Xe,index:$,nextTick:Xt,cancelNextTick:Ee,detectDirection:qe,getChild:yt,expando:F};y.get=function(r){return r[F]};y.mount=function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(y.utils=Q(Q({},y.utils),o.utils)),Gt.mount(o)})};y.create=function(r,t){return new y(r,t)};y.version=bo;var A=[],Ot,Se,De=!1,be,ve,Jt,Pt;function ko(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return r.prototype={dragStarted:function(e){var o=e.originalEvent;this.sortable.nativeDraggable?O(document,"dragover",this._handleAutoScroll):this.options.supportPointer?O(document,"pointermove",this._handleFallbackAutoScroll):o.touches?O(document,"touchmove",this._handleFallbackAutoScroll):O(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var o=e.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):(_(document,"pointermove",this._handleFallbackAutoScroll),_(document,"touchmove",this._handleFallbackAutoScroll),_(document,"mousemove",this._handleFallbackAutoScroll)),Ve(),zt(),wo()},nulling:function(){Jt=Se=Ot=De=Pt=be=ve=null,A.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,o){var n=this,i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(i,a);if(Jt=e,o||this.options.forceAutoScrollFallback||At||et||It){ye(e,this.options,s,o);var l=at(s,!0);De&&(!Pt||i!==be||a!==ve)&&(Pt&&Ve(),Pt=setInterval(function(){var u=at(document.elementFromPoint(i,a),!0);u!==l&&(l=u,zt()),ye(e,n.options,u,o)},10),be=i,ve=a)}else{if(!this.options.bubbleScroll||at(s,!0)===q()){zt();return}ye(e,this.options,at(s,!1),!1)}}},tt(r,{pluginName:"scroll",initializeByDefault:!0})}function zt(){A.forEach(function(r){clearInterval(r.pid)}),A=[]}function Ve(){clearInterval(Pt)}var ye=$e(function(r,t,e,o){if(t.scroll){var n=(r.touches?r.touches[0]:r).clientX,i=(r.touches?r.touches[0]:r).clientY,a=t.scrollSensitivity,s=t.scrollSpeed,l=q(),u=!1,c;Se!==e&&(Se=e,zt(),Ot=t.scroll,c=t.scrollFn,Ot===!0&&(Ot=at(e,!0)));var d=0,h=Ot;do{var D=h,w=G(D),m=w.top,f=w.bottom,b=w.left,g=w.right,P=w.width,M=w.height,N=void 0,j=void 0,st=D.scrollWidth,wt=D.scrollHeight,U=v(D),Et=D.scrollLeft,ot=D.scrollTop;D===l?(N=P<st&&(U.overflowX==="auto"||U.overflowX==="scroll"||U.overflowX==="visible"),j=M<wt&&(U.overflowY==="auto"||U.overflowY==="scroll"||U.overflowY==="visible")):(N=P<st&&(U.overflowX==="auto"||U.overflowX==="scroll"),j=M<wt&&(U.overflowY==="auto"||U.overflowY==="scroll"));var St=N&&(Math.abs(g-n)<=a&&Et+P<st)-(Math.abs(b-n)<=a&&!!Et),Z=j&&(Math.abs(f-i)<=a&&ot+M<wt)-(Math.abs(m-i)<=a&&!!ot);if(!A[d])for(var lt=0;lt<=d;lt++)A[lt]||(A[lt]={});(A[d].vx!=St||A[d].vy!=Z||A[d].el!==D)&&(A[d].el=D,A[d].vx=St,A[d].vy=Z,clearInterval(A[d].pid),(St!=0||Z!=0)&&(u=!0,A[d].pid=setInterval(function(){o&&this.layer===0&&y.active._onTouchMove(Jt);var Dt=A[this.layer].vy?A[this.layer].vy*s:0,rt=A[this.layer].vx?A[this.layer].vx*s:0;typeof c=="function"&&c.call(y.dragged.parentNode[F],rt,Dt,r,Jt,A[this.layer].el)!=="continue"||Ke(A[this.layer].el,rt,Dt)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==l&&(h=at(h,!1)));De=u}},30),to=function(t){var e=t.originalEvent,o=t.putSortable,n=t.dragEl,i=t.activeSortable,a=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var u=o||i;s();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,d=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(d)&&(a("spill"),this.onSpill({dragEl:n,putSortable:o}))}};function Oe(){}Oe.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var n=yt(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),o&&o.animateAll()},drop:to};tt(Oe,{pluginName:"revertOnSpill"});function Pe(){}Pe.prototype={onSpill:function(t){var e=t.dragEl,o=t.putSortable,n=o||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:to};tt(Pe,{pluginName:"removeOnSpill"});y.mount(new ko);y.mount(Pe,Oe);var eo=y;var oo=require("obsidian");var z=class{static apply(t,e,o="c"){let n=this.COLOR_MAP[e];if(!n){console.warn(`[ColorManager] Unknown color: ${e}`);return}t.classList.add("has-plugin-color"),t.style.setProperty(`--${o}-light`,n.light),t.style.setProperty(`--${o}-dark`,n.dark)}static applyBorderLine(t,e,o="c"){let n=this.COLOR_MAP[e];if(!n){console.warn(`[ColorManager] Unknown color: ${e}`);return}t.classList.add("has-plugin-color-border"),t.style.setProperty(`--${o}-light`,n.light),t.style.setProperty(`--${o}-dark`,n.dark)}static applyCustom(t,e,o="c"){t.classList.add("has-plugin-color"),t.style.setProperty(`--${o}-light`,e.light),t.style.setProperty(`--${o}-dark`,e.dark)}static toRGBA(t,e){let o=t.match(/\d+/g);if(!o||o.length<3)throw new Error(`[ColorManager] Invalid RGB value: ${t}`);let[n,i,a]=o.map(Number);return`rgba(${n}, ${i}, ${a}, ${e})`}static getColorNames(){return Object.keys(this.COLOR_MAP)}};z.COLOR_MAP={grey:{light:"rgb(151, 151, 151)",dark:"rgb(99, 98, 93)"},purple:{light:"rgb(138, 92, 245)",dark:"rgb(107, 78, 129)"},brown:{light:"rgb(139, 69, 19)",dark:"rgba(122, 78, 44, 1)"},blue:{light:"rgb(0, 128, 213)",dark:"rgb(52, 97, 145)"},green:{light:"rgb(33, 148, 94)",dark:"rgb(55, 107, 78)"},yellow:{light:"rgb(200, 180, 80)",dark:"rgba(158, 122, 43, 1)"},red:{light:"rgb(214, 74, 64)",dark:"rgb(150, 74, 69)"}};var oe=require("obsidian");var ee=class{constructor(t){this.options=t.options}render(t,e){var s;let o=e.split(".").slice(1).join("."),n=t.getValue(e);if(n==null)return null;let i=C.propertyManager.getPropertyType(o),a=document.createElement("div");if(e==="file.name"){let l=(s=this.options)==null?void 0:s.iconProperty,u=l?t.getValue(l):null;if(u!=null&&u.isTruthy()){a.classList.add("board-card-file-name-container");let c=document.createElement("span");c.classList.add("board-card-icon"),(0,oe.setIcon)(c,u.toString());let d=document.createElement("div");d.classList.add("metadata-property-value","card-prop","file-name","board-card-file-name"),d.classList.add("clickable"),d.textContent=n.toString(),a.appendChild(c),a.appendChild(d)}else a.classList.add("metadata-property-value","card-prop","file-name","board-card-file-name-no-icon"),a.classList.add("clickable"),a.textContent=n.toString()}else if(e.startsWith("file.")||e.startsWith("formula."))a.classList.add("metadata-property-value","card-prop"),n.renderTo(a,new oe.RenderContext);else if(e.startsWith("note.")){a.classList.add("metadata-property"),a.setAttribute("data-property-key",String(i));let l=document.createElement("div");l.classList.add("metadata-property-value","card-prop"),a.appendChild(l);let u;n.isTruthy()?i==="multitext"||i==="tags"?u=n.data:u=n.toString():u=null;let c={app:C.app,blur:()=>{},key:o,onChange:d=>{d===""&&!n.isTruthy()||C.propertyManager.updateFrontmatter(t.file,o,d)},sourcePath:t.file.path,index:t.file.name};i&&C.app.metadataTypeManager.registeredTypeWidgets[i].render(l,u,c)}return a}};var re=class{constructor(t){this.options=t.options;let e=t.properties.filter(o=>o!=="file.name");this.properties=["file.name",...e],this.colorName=t.colorName,this.cardColorMode=t.cardColorMode||"none"}render(t){let e=document.createElement("div");if(e.classList.add("board-card"),this.options.cardSize&&e.classList.add(`card-size-${this.options.cardSize}`),e.setAttribute("data-path",t.file.path),e.addEventListener("mouseup",n=>{(async()=>{if(n.button===0&&!n.target.closest(".metadata-property"))if(n.preventDefault(),n.stopPropagation(),this.options.openInSideView){let i=C.app.workspace,a=i.getLeaf(!1),s=null;i.iterateRootLeaves(l=>{l!==a&&(s=l)}),s?(i.setActiveLeaf(s,{focus:!0}),await i.getLeaf("tab").openFile(t.file)):await i.getLeaf("split").openFile(t.file)}else C.app.workspace.openLinkText(t.file.path,"",!0)})()}),e.addEventListener("contextmenu",n=>{n.preventDefault();let i=new oo.Menu;C.app.workspace.trigger("file-menu",i,t.file,"board-card"),i.showAtPosition({x:n.pageX,y:n.pageY})}),this.colorName&&this.cardColorMode!=="none"&&(this.cardColorMode==="full"?z.apply(e,this.colorName.toLowerCase()):this.cardColorMode==="minimal"&&z.applyBorderLine(e,this.colorName.toLowerCase())),this.options.imageProperty){let n=t.getValue(this.options.imageProperty);if(n!=null&&n.isTruthy()){let i=n==null?void 0:n.toString(),a=String(i),s=document.createElement("img");s.classList.add("card-image"),s.src=a,e.appendChild(s)}else if(!this.options.hideImagePlaceholder){let i=document.createElement("div");i.classList.add("card-image","placeholder"),e.appendChild(i)}}let o=new ee({options:this.options});for(let n of this.properties){let i=o.render(t,n);i&&e.appendChild(i)}return e}};var ro=z.getColorNames().map(r=>r.charAt(0).toUpperCase()+r.slice(1)),ne=class{constructor(t){this.isDragging=!1;this.container=t}render(t,e){if(this.data=t,this.isDragging)return;let o=this.container.querySelector(".board-board-wrapper"),n=0,i=0;o&&(n=o.scrollTop,i=o.scrollLeft),this.container.empty();let a=this.container.createDiv("board-board-wrapper");t.cardOptions.cardSize&&a.classList.add(`card-size-${t.cardOptions.cardSize}`);let s=a.createDiv("board-column-headers");t.rows.length>0&&s.createDiv("board-column-header-spacer");for(let c of t.columns){let d=s.createDiv("board-column-header");if(t.cardOptions.colorHeaders&&t.groupPropertyId){let m=d.createSpan("board-header-color-circle"),f=this.getColorName(c.id)||"grey";z.apply(m,f.toLowerCase())}let h=d.createSpan("board-header-chip");h.textContent=c.title;let D=d.createSpan("board-header-count");D.textContent=`${c.count}`;let w=d.createDiv("board-header-menu");(0,ft.setIcon)(w,"more-vertical"),w.addEventListener("click",m=>{m.stopPropagation();let f=new ft.Menu;f.addItem(b=>{b.setTitle("Color").setIcon("palette");let g=b.setSubmenu();ro.forEach(P=>{g.addItem(M=>{M.setTitle(P).onClick(()=>e.onSetColumnColor(c.id,P)).setIcon("circle")})})}),f.addItem(b=>{b.setTitle("Move left").setIcon("arrow-left").onClick(()=>{e.onMoveGroup(c.id,"left")})}),f.addItem(b=>{b.setTitle("Move right").setIcon("arrow-right").onClick(()=>{e.onMoveGroup(c.id,"right")})}),f.addItem(b=>{b.setTitle("Hide group").setIcon("eye-off").onClick(()=>{e.onHideGroup(c.id)})}),f.showAtMouseEvent(m)})}let l=a.createDiv("board-rows-container");if(!t.groupPropertyId&&!!t.subGroupPropertyId){l.classList.add("is-gallery");let c=t.columns.find(d=>d.id===B)||t.columns[0];if(c)for(let d of t.rows)this.renderRow(l,d,[c],t.items,e)}else if(t.rows.length>0)for(let c of t.rows)this.renderRow(l,c,t.columns,t.items,e);else this.renderRow(l,null,t.columns,t.items,e);(n>0||i>0)&&(a.scrollTop=n,a.scrollLeft=i)}renderRow(t,e,o,n,i){let a=t.createDiv("board-row-wrapper");if(e){let u=a.createDiv("board-row-header-bar"),c=u.createSpan("collapse-icon");if((0,ft.setIcon)(c,"chevron-down"),this.data.cardOptions.colorHeaders&&this.data.subGroupPropertyId&&!this.data.groupPropertyId){let w=u.createSpan("board-header-color-circle"),m=this.getColorName(e.id,!0)||"grey";z.apply(w,m.toLowerCase())}let d=u.createSpan("board-header-chip");d.classList.add("board-row-title"),d.textContent=e.title;let h=u.createSpan("board-header-count");h.textContent=`${e.count}`;let D=u.createDiv("board-header-menu");(0,ft.setIcon)(D,"more-vertical"),D.addEventListener("click",w=>{w.stopPropagation();let m=new ft.Menu;this.data.groupPropertyId||m.addItem(f=>{f.setTitle("Color").setIcon("palette");let b=f.setSubmenu();ro.forEach(g=>{b.addItem(P=>{P.setTitle(g).onClick(()=>i.onSetColumnColor(e.id,g,!0)).setIcon("circle")})})}),m.addItem(f=>{f.setTitle("Move up").setIcon("arrow-up").onClick(()=>{i.onMoveSubGroup(e.id,"up")})}),m.addItem(f=>{f.setTitle("Move down").setIcon("arrow-down").onClick(()=>{i.onMoveSubGroup(e.id,"down")})}),m.addItem(f=>{f.setTitle("Hide sub-group").setIcon("eye-off").onClick(()=>{i.onHideSubGroup(e.id)})}),m.showAtMouseEvent(w)}),u.addEventListener("click",()=>{a.classList.toggle("collapsed")})}let l=a.createDiv("board-row").createDiv("board-row-cells");for(let u of o){let c=l.createDiv("board-cell");c.setAttribute("data-group-id",u.id),e&&c.setAttribute("data-subgroup-id",e.id);let d="grey";this.data.groupPropertyId?d=this.getColorName(u.id)||"grey":this.data.subGroupPropertyId&&e&&(d=this.getColorName(e.id,!0)||"grey"),this.data.cardOptions.colorCells&&z.apply(c,d.toLowerCase());let h=this.data.cardOptions.colorCards?"minimal":"none",D=n[u.id]?n[u.id][e?e.id:"default"]||[]:[];for(let m of D){let b=new re({options:this.data.cardOptions,properties:this.data.cardProperties,colorName:d,cardColorMode:h}).render(m.data);b.setAttribute("data-item-id",m.id),b.addEventListener("mousedown",g=>{if(g.button===0){this.isDragging=!0;let P=()=>{setTimeout(()=>{this.isDragging&&(this.isDragging=!1)},100),document.removeEventListener("mouseup",P)};document.addEventListener("mouseup",P)}}),c.appendChild(b)}let w=c.createDiv("board-new-note-button");w.textContent="New note",w.addEventListener("click",()=>{i.onNewNoteClick(u.rawValue,e==null?void 0:e.rawValue)}),this.setupSortable(c,i)}}setupSortable(t,e){eo.create(t,{group:{name:"board",pull:"clone",put:!0},animation:150,sort:!1,ghostClass:"board-sortable-ghost",chosenClass:"board-sortable-chosen",onStart:o=>{o.from.classList.add("board-drag-source")},onMove:o=>{document.querySelectorAll(".board-item-drop-target-top, .board-item-drop-target-bottom").forEach(n=>{n.classList.remove("board-item-drop-target-top","board-item-drop-target-bottom")}),o.related.classList.add("board-item-drop-target-top")},onEnd:o=>{if(this.isDragging=!1,o.from.classList.remove("board-drag-source"),document.querySelectorAll(".board-item-drop-target-top, .board-item-drop-target-bottom").forEach(u=>{u.classList.remove("board-item-drop-target-top","board-item-drop-target-bottom")}),o.from===o.to)return;let n=o.item,i=n.getAttribute("data-item-id");n&&n.parentNode&&n.parentNode.removeChild(n);let a=o.to,s=a.getAttribute("data-group-id")||null,l=a.getAttribute("data-subgroup-id")||null;if(i&&s){let u=this.data.columns.find(D=>D.id===s),c=this.data.rows?this.data.rows.find(D=>D.id===l):null,d=u?u.rawValue:s,h=c?c.rawValue:l;e.onCardDrop(i,this.data.groupPropertyId,d,this.data.subGroupPropertyId,h)}}})}getColorName(t,e=!1){let n=`${e?this.data.subGroupPropertyId:this.data.groupPropertyId}:${t}`;return this.data.columnColors[n]||""}};var S={GROUP_PROPERTY:"groupProperty",SUB_GROUP_PROPERTY:"subGroupProperty",IMAGE_PROPERTY:"imageProperty",ICON_PROPERTY:"iconProperty",GROUP_ORDER:"groupOrder",SUB_GROUP_ORDER:"subGroupOrder",HIDE_EMPTY_GROUPS:"hideEmptyGroups",HIDE_EMPTY_SUB_GROUPS:"hideEmptySubGroups",CARD_SIZE:"cardSize",OPEN_IN_SIDE_VIEW:"openInSideView",HIDDEN_GROUPS:"hiddenGroups",HIDDEN_SUB_GROUPS:"hiddenSubGroups",HIDE_IMAGE_PLACEHOLDER:"hideImagePlaceholder",COLOR_HEADERS:"colorHeaders",COLOR_CELLS:"colorCells",COLOR_CARDS:"colorCards"},ie=class{constructor(t){this.config=t}extract(){let t={},e=this.config.get(S.GROUP_PROPERTY)||null,o=this.config.get(S.SUB_GROUP_PROPERTY)||null;if(e){let n=H(e);C.plugin.isPropertyEligibleForGrouping(n)||(console.warn(`Group property '${e}' is no longer eligible for grouping. Clearing it.`),this.config.set(S.GROUP_PROPERTY,null),e=null)}if(o){let n=H(o);C.plugin.isPropertyEligibleForGrouping(n)||(console.warn(`Sub-group property '${o}' is no longer eligible for grouping. Clearing it.`),this.config.set(S.SUB_GROUP_PROPERTY,null),o=null)}return t.groupProperty=e,t.subGroupProperty=o,t.imageProperty=this.config.get(S.IMAGE_PROPERTY)||null,t.iconProperty=this.config.get(S.ICON_PROPERTY)||null,t.groupOrder=this.config.get(S.GROUP_ORDER)||[],t.subGroupOrder=this.config.get(S.SUB_GROUP_ORDER)||[],t.hideEmptyGroups=this.config.get(S.HIDE_EMPTY_GROUPS)||!1,t.hideEmptySubGroups=this.config.get(S.HIDE_EMPTY_SUB_GROUPS)||!1,t.cardSize=this.config.get(S.CARD_SIZE)||"medium",t.openInSideView=this.config.get(S.OPEN_IN_SIDE_VIEW)||!0,t.hiddenGroups=this.config.get(S.HIDDEN_GROUPS)||[],t.hiddenSubGroups=this.config.get(S.HIDDEN_SUB_GROUPS)||[],t.hideImagePlaceholder=this.config.get(S.HIDE_IMAGE_PLACEHOLDER)||!1,t.colorHeaders=this.config.get(S.COLOR_HEADERS)||!0,t.colorCells=this.config.get(S.COLOR_CELLS)||!1,t.colorCards=this.config.get(S.COLOR_CARDS)||!0,t}};var B="Empty Group",ae=class extends se.BasesView{constructor(e,o){super(e);this.type=le;this.controller=e,this.containerEl=o.createDiv("board-view");let n=this.containerEl.createDiv("board-board-container");this.board=new ne(n),this.noteCreator=new Ht}onDataUpdated(){this.noteCreator.processPendingNote(),this.render()}render(){let e=this.extractOptions(),o=this.extractBoardData(e),n={onCardDrop:(...i)=>{this.handleCardDrop(...i)},onHideGroup:i=>this.hideGroup(i),onHideSubGroup:i=>this.hideSubGroup(i),onMoveGroup:(i,a)=>this.moveGroup(i,a),onMoveSubGroup:(i,a)=>this.moveSubGroup(i,a),onSetColumnColor:(i,a,s)=>{this.setColumnColor(i,a,s)},onNewNoteClick:(i,a)=>this.handleNewNoteClick(i,a)};this.board.render(o,n)}extractOptions(){return new ie(this.config).extract()}extractBoardData(e){return new kt(this.data,this.config).build(e)}async handleCardDrop(e,o,n,i,a){if(o.startsWith("formula.")||i!=null&&i.startsWith("formula.")){new se.Notice("Cannot drop card into formula group");return}let s=C.propertyManager.getFile(e);if(s){if(o&&n!==void 0){let l=H(o);await C.propertyManager.updateFrontmatter(s,l,n)}if(i&&a!==void 0){let l=H(i);await C.propertyManager.updateFrontmatter(s,l,a)}}}hideGroup(e){let o=this.config.get(S.HIDDEN_GROUPS)||[];o.includes(e)||this.config.set(S.HIDDEN_GROUPS,[...o,e])}hideSubGroup(e){let o=this.config.get(S.HIDDEN_SUB_GROUPS)||[];o.includes(e)||this.config.set(S.HIDDEN_SUB_GROUPS,[...o,e])}moveGroup(e,o){let n=this.extractOptions(),a=this.extractBoardData(n).columns.map(u=>u.id),s=a.indexOf(e);if(s===-1)return;let l=[...a];o==="left"?s>0&&([l[s-1],l[s]]=[l[s],l[s-1]]):s<l.length-1&&([l[s+1],l[s]]=[l[s],l[s+1]]),this.config.set(S.GROUP_ORDER,l)}moveSubGroup(e,o){let n=this.extractOptions(),a=this.extractBoardData(n).rows.map(u=>u.id),s=a.indexOf(e);if(s===-1)return;let l=[...a];o==="up"?s>0&&([l[s-1],l[s]]=[l[s],l[s-1]]):s<l.length-1&&([l[s+1],l[s]]=[l[s],l[s+1]]),this.config.set(S.SUB_GROUP_ORDER,l)}async setColumnColor(e,o,n=!1){let i=this.extractOptions(),a=n?i.subGroupProperty:i.groupProperty;if(!a)return;let s=`${a}:${e}`;C.settings.columnColors[s]=o,await C.plugin.saveSettings(),this.render()}handleNewNoteClick(e,o){let n=this.extractOptions();this.noteCreator.handleNewNoteClick(e,o,n.groupProperty,n.subGroupProperty)}};var le="board-view",ue=class extends no.Plugin{async onload(){await this.loadSettings(),C.initialize(this),Bt.initialize(),this.addSettingTab(new Lt(this.app,this)),this.registerBasesView(le,{name:"Board",icon:"columns",factory:(e,o)=>new ae(e,o),options:()=>[{type:"group",displayName:"Appearance",items:[{type:"dropdown",displayName:"Card size",key:S.CARD_SIZE,options:{small:"Small (0.5x)",medium:"Medium (0.75x)",large:"Large (1x)"},default:"medium",description:"Scale the card size"},{type:"property",displayName:"Icon Property",key:S.ICON_PROPERTY,filter:e=>C.plugin.isPropertyEligibleForGrouping(e),default:"",description:"Enter the property ID to display as card icon"},{type:"toggle",displayName:"Open in side view",key:S.OPEN_IN_SIDE_VIEW,default:!0,description:"Open file.name in side view"}]},{type:"group",displayName:"Colors",items:[{type:"toggle",displayName:"Color Headers",key:S.COLOR_HEADERS,default:!0,description:"Apply color to headers (chips)"},{type:"toggle",displayName:"Color Cells",key:S.COLOR_CELLS,default:!1,description:"Apply color to cells"},{type:"toggle",displayName:"Color Cards",key:S.COLOR_CARDS,default:!0,description:"Apply color to cards (minimal border)"}]},{type:"group",displayName:"Group",items:[{type:"property",displayName:"Group property",key:S.GROUP_PROPERTY,filter:e=>C.plugin.isPropertyEligibleForGrouping(e),default:"",description:"Enter the property ID to group columns by"},{type:"toggle",displayName:"Hide empty groups",key:S.HIDE_EMPTY_GROUPS,default:!1,description:"Hide empty groups (columns)"},{type:"multitext",displayName:"Hidden groups",key:S.HIDDEN_GROUPS,default:[],description:"List of hidden groups"},{type:"multitext",displayName:"Group order",key:S.GROUP_ORDER,default:[],description:"Order of main group (columns)"}]},{type:"group",displayName:"Sub-Group",items:[{type:"property",displayName:"Sub-group property",key:S.SUB_GROUP_PROPERTY,filter:e=>C.plugin.isPropertyEligibleForGrouping(e),default:"",description:"Enter the property ID to group rows by"},{type:"toggle",displayName:"Hide empty sub groups",key:S.HIDE_EMPTY_SUB_GROUPS,default:!1,description:"Hide empty sub group (rows)"},{type:"multitext",displayName:"Hidden sub-groups",key:S.HIDDEN_SUB_GROUPS,default:[],description:"List of hidden sub-groups"},{type:"multitext",displayName:"Sub Group order",key:S.SUB_GROUP_ORDER,default:[],description:"Order of sub group (rows)"}]},{type:"group",displayName:"Image",items:[{type:"property",displayName:"Image property",key:S.IMAGE_PROPERTY,filter:e=>C.plugin.isPropertyEligibleForGrouping(e),default:"",description:"Enter the property ID to display as card thumbnail"},{type:"toggle",displayName:"Hide image placeholder",key:S.HIDE_IMAGE_PLACEHOLDER,default:!0,description:"Hide grey placeholder if image is missing"}]}]})}onunload(){}async loadSettings(){this.settings=Object.assign({},Re,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}isPropertyEligibleForGrouping(e){if(e.startsWith("file."))return!1;let o=H(e),n=C.propertyManager.getPropertyType(o);return n!=="tags"&&n!=="multitext"&&n!=="aliases"}};
/*! Bundled license information:

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.6
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*/
