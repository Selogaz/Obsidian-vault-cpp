---
tags:
  - note/specific/code
  - category/java
aliases:
  - типы памяти в jvm
deck: obsidian::java
created: 2025-09-20T09:06:59+03:00
updated: 2025-09-28T20:48:48+03:00
---

**типы памяти в jvm**
—

- Heap (куча)
	- общая для всех потоков область памяти. Хранит все объекты, созданные с помощью оператора new
	- управляется сборщиком мусора
	- делится на [[young generation]](новые объекты) и [[old generation]](долгоживущие объекты)
	- при переполнении возникает OutOfMemoryError
- Stack (стек)
	- изолированная область для каждого потока. Хранит примитивы, ссылки на объекты, стек вызовов
	- переменные в стеке имеют область видимости, ограниченную выполнением метода, и удаляются при выходе из метода
	- при переполнении возникает StackOverflowError
	- удаляется при завершении работы потока
- Metaspace ([[Method area]])
	- Хранит информацию о классах, аннотациях, статические переменные-примитивы, пул констант. Если в статическом поле находится объект, сам он хранится в куче, а в metaspace хранится ссылка на него
	- В ранних версиях java эти функции выполняла область памяти PermGen
- Native Memory (Off-heap)
	- Хранит данные вне управления JVM. Не очищается GC, требует ручного управления памятью. Используется в высокопроизводительных приложениях, например, в Tensorflow, Ignite, Lucene, Netty
	- Базовый инструмент работы - [[java JNI|JNI]]. С Java 19 активно идет разработка фич Foreigh Function & Memory (FFM) для управления этим участком памяти на замену JNI
- Registers
	- хранит временные данные, указатели на текущие операции
- Основные флаги для управления размером областей:
	- `-Xms<size>` - начальный размер кучи
	- `-Xmx<size>` - максимальный размер кучи
	- `-Xss<size>` - размер стека потока

# Дополнительные материалы
[[Спецификация JVM]]
[[Устройство и работа JVM]]

![[java JNI]]
