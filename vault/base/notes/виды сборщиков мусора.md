---
tags:
  - note/specific/code
  - category/java
aliases: []
deck: obsidian::work
created: 2025-05-28 07:52:56+03:00
updated: 2025-10-02T17:36:15+03:00
sr-due: 2026-12-05
sr-interval: 429
sr-ease: 310
---

**Виды сборщиков мусора в HotSpot**
—
# Fill the gaps

- Serial GC: работает *в одном потоке*, все остальные потоки приложения в этот момент останавливаются ([[java stop the world|Stop The World]])
- Parallel GC: использует *несколько потоков* для параллельной сборки, остальные потоки приложения останавливаются ([[java stop the world|Stop The World]])
- CMS (Concurrent Mark Sweep): *граф объектов* строится параллельно с основным приложением. Объекты удаляются тоже параллельно.
	- Помечен Deprecated в Java 9, потому что по всем фронтам уступает G1
- G1 (Garbage first): делит кучу на регионы, *собирает мусор в наиболее наполненных* регионах. Сборщик мусора по умолчанию.

Предыдущие сборщики делили память на 3-4 большие области - одно для старого поколения и 2-3 для нового. *G1 делит память на тысячи регионов*, которым присваивается тип - свободный, young, survivor или old.

Плюсы такого подхода:
- ✅ Сборщик обрабатывает несколько регионов, а не всё поколение за раз
- ✅ Можно менять количество регионов и регулировать время паузы
- ✅ Приложения с большой памятью не тормозят, т.к. память обрабатывается по частям
- ✅ Если регион однородный, можно сразу поменять его тип. Был молодой - стал свободный. Был молодой - стал выживший
- ✅ Каждый регион мониторится отдельно. G1 выбирает перспективные регионы, куда недавно добралось много объектов. Отсюда и название - Garbage First.

В остальном G1 похож на предыдущие сборщики: Minor GC останавливает потоки приложения. Остальные сборки ненадолго останавливают работу приложения, но некоторые этапы работают параллельно.

G1 показывает отличные результаты в энтерпрайзе. В Java 9 стал сборщиком мусора по умолчанию.

- ZGC и Shenandoah: для приложений с памятью до 4ТБ, где нежелательны длинные задержки. Среднее время паузы не превышает 1мс. За такие короткие паузы придется платить накладными расходами - сборщики занимают до 15% процессорного времени.
- Epsilon GC - экспериментальный сборщик. Сборки мусора как таковой нет, заканчивается память - JVM завершает работу. Используется в разработке, когда нужно оценить производительность и занимаемую память без вмешательства сборщика мусора

# Java core
- [[Serial Garbage Collector|Serial]] - простой вариант для небольших, нетребовательных приложений
- Parallel - добавляет параллелизм и подстройку под нужную производительность
- Concurrent Mark Sweep(CMS) - нацелен на снижение максимальных задержек
- G1 - замена CMS для серверов с большими данными

у [Backend Interviewer](https://t.me/backend_interviewer) есть классный [пост](https://t.me/backend_interviewer/115) на тему сборщиков мусора.
![[java stop the world]]
