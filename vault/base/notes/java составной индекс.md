---
tags:
  - note/specific/code
  - category/java
aliases:
  - составной индекс
deck: obsidian::java
created: 2025-09-26T10:03:10+03:00
updated: 2025-10-08T18:37:40+03:00
sr-due: 2025-10-12
sr-interval: 4
sr-ease: 270
---

**составной индекс**
—
создается по нескольким столбцам таблицы одновременно. Полезен, когда запросы часто фильтруют или сортируют данные по комбинации полей.
```sql
CREATE INDEX name_idx ON test (last_name, first_name);
```

Порядок полей важен. Например, индекс по (фамилия, имя) можно использовать для запросов по фамилии и фамилии+имя. Условие только по имени не задействует индекс.

Составные индексы занимают больше места и требуют больше времени. Если запросы в основном используют разные столбцы по отдельности, лучше иметь несколько отдельных индексов по отдельности.

Индекс может не использоваться планировщиком запросов, если
- Селективность фильтра низкая, и полное сканирование таблицы оказывается быстрее
- Используются ф-ции или выражения, не поддерживающие индексацию
- Статистика устарела или не отражает реальное распределение данных
- При наличии большого количества блокировок или конфликтов
- Данных в таблице мало
