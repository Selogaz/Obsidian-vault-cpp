---
tags:
  - note/specific/code
  - category/java
aliases:
  - прокси JDK и CGLIB
deck: obsidian::java
created: 2025-06-15T11:53:47+03:00
updated: 2025-10-06T18:49:13+03:00
sr-due: 2025-11-29
sr-interval: 54
sr-ease: 277
---

**прокси JDK и CGLIB**
—
например, объект `roomService` вызывает метод `addExperience` у объекта `petService`. При обычном вызове это выглядит как:

![[Spring и Spring Boot. Разработка облачных приложений на Java Федор Урванов 2025-06-15 11.35.20]]
При использовании Spring [[AOP]] объект оборачивается в прокси. И вызывающий объект вызывает эту оболочку(прокси), а оболочка уже вызывает реальный метод.
![[Spring и Spring Boot. Разработка облачных приложений на Java Федор Урванов 2025-06-15 11.43.04]]
Для создания прокси Spring AOP использует 1 из двух способов:
- динамические прокси JDK
	- если проксируемый класс реализует хотя бы 1 интерфейс
	- немного медленнее
- библиотеку генерации байт-кода CGLIB (перепакованную внутри Spring)
	- если проксируемый класс НЕ реализует ни одного интерфейса
	- final-методы не могут быть переопределены в генерируемых дочерних классах, поэтому на них не работают аспекты

[[Spring Boot]] по умолчанию использует CGLIB. Для использования прокси JDK необходимо выставить настройку `spring.aop.proxy-target-class B false`
