---
tags:
  - note/specific/code
  - category/java
aliases:
  - основы git
deck: obsidian::java
created: 2025-10-02T16:55:30+03:00
updated: 2025-10-08T19:33:02+03:00
sr-due: 2025-10-12
sr-interval: 4
sr-ease: 270
---

**основы git**
—
Коммит - снимок состояния файлов на определенный момент времени. Состоит из:
- хэш, вычисляемый из содержимого коммита
- ссылка на предыдущий коммит
- набор измененных файлов
- ссылки на файлы, которые являются частью проекта, но не изменились

Ветка - указатель на конкретный коммит. По умолчанию создается ветка main/master.

История - цепочка коммитов, связанных друг с другом. Ветки создают разные линии истории, которые можно объединять.

# Стратегии работы в Git (Git Workflow)

Набор соглашений и правил, которые команда использует для совместной работы в репозитории.

- Feature Branch Workflow: каждая задача делается в отдельной ветке. После завершения работы ветка сливается с основной через Pull/Merge Request. Pull Request - это термин GitHub и Bitbucket, а Merge Request - GitLab.
- GitFlow Workflow: четко определяет типы веток (main - стабильная текущая версия, develop - версия в разработке, feature - для новых фич, release - для релиза, hotfix - для срочных исправлений) и правила их слияния.
- Trunk-Based Development (TBD): разработчики несколько раз в день сливают небольшие изменения в основную ветку (trunk). Фича-ветки либо не используются, либо живут недолго (1-2 дня). Чтобы недоделанные фичи не ломали основной код, они "прячутся" за флагом, который выключен в production.

# Основные команды: работа с коммитами

- git add добавляет изменения из рабочего каталога в индекс для подготовки к коммиту
- git commit создаёт коммит с проиндексированными файлами с указанным комментарием
- git commit --amend изменяет последний коммит: можно исправить сообщение или добавить пропущенные изменения.
- git log показывает историю коммитов
- git reset - откат коммитов или изменений
- git revert создаёт новый коммит, отменяющий изменения указанного коммита, при этом сохраняет историю
- git stash временно сохраняет незакоммиченные изменения для переключения веток
- git cherry-pick - взять конкретный коммит из другой ветки и применить его в текущую ветку

# Обмен данными между удаленным и локальным репозиторием

- git fetch забирает изменения из удаленного репозитория
- git pull - git fetch + сливает с локальной веткой
- git pull = git fetch + git merge
- git push отправляет локальные коммиты в удаленный репозиторий

# Слияние веток

- git merge объединяет две ветки. Сохраняет историю ветвления и хэши коммитов

Если коммит, на котором мы находимся, не является прямым родителем ветки, с которой мы выполняем слияние (в истории есть ветвления), и изменяются одни и те же файлы, то возможен конфликт. Git не может однозначно определить, какие изменения должны остаться. В случае конфликта при участии пользователя создается новый коммит с разрешением конфликтов.

Fast-forward - если конфликтов при объединении нет, git просто переносит указатель ветки вперед

- git rebase переносит коммиты из одной ветки в другую, накладывая изменения поверх кода в другой ветке. История становится линейной, хэши коммитов меняются

Часто rebase используется для работы над feature веткой, а merge для интеграции в main/develop. В системах вроде GitLab/BItbucket можно выбрать стратегию объединения (merge/rebase, squash) при создании PR.

Как объединить последние N коммитов в 1:
- git rebase -i HEAD~N, заменить второй и последующие pick на squash
- git reset --soft HEAD~N + git commit -m
- git merge --squash <имя ветки>

# Дополнительные материалы

[Документация Git](“Book” ([“Документация Git”](zotero://select/library/items/JMFPRMJ3)) ([snapshot](zotero://open-pdf/library/items/5IUHPCTB?sel=h1&annotation=SWBNTU3L)))
[Описание Gitflow](“Gitflow workflow” ([“Описание Gitflow”](zotero://select/library/items/H58FXWE7)) ([snapshot](zotero://open-pdf/library/items/TECZ5BM2?sel=h1&annotation=HXLID4ZZ)))
[Описание Trunk Based Development](“Introduction #” ([paul-hammant](zotero://select/library/items/EWYY9CZ3)) ([snapshot](zotero://open-pdf/library/items/FA6V9CIG?sel=article%20%3E%20div&annotation=ZLEDBRFP)))
