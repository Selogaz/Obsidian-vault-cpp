/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var $i=Object.create;var xt=Object.defineProperty;var Ri=Object.getOwnPropertyDescriptor;var zi=Object.getOwnPropertyNames;var Ui=Object.getPrototypeOf,qi=Object.prototype.hasOwnProperty;var Zi=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Yi=(n,e)=>{for(var t in e)xt(n,t,{get:e[t],enumerable:!0})},Xn=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zi(e))!qi.call(n,i)&&i!==t&&xt(n,i,{get:()=>e[i],enumerable:!(r=Ri(e,i))||r.enumerable});return n};var Gi=(n,e,t)=>(t=n!=null?$i(Ui(n)):{},Xn(e||!n||!n.__esModule?xt(t,"default",{value:n,enumerable:!0}):t,n)),Ji=n=>Xn(xt({},"__esModule",{value:!0}),n);var Si=Zi(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});require("obsidian");var Be=class extends Error{},un=class extends Be{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},an=class extends Be{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},ln=class extends Be{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},He=class extends Be{},Vt=class extends Be{constructor(e){super(`Invalid unit ${e}`)}},fe=class extends Be{},ve=class extends Be{constructor(){super("Zone is an abstract class")}},I="numeric",we="short",De="long",_t={year:I,month:I,day:I},Br={year:I,month:we,day:I},Ki={year:I,month:we,day:I,weekday:we},Ar={year:I,month:De,day:I},Nr={year:I,month:De,day:I,weekday:De},Lr={hour:I,minute:I},Ir={hour:I,minute:I,second:I},Vr={hour:I,minute:I,second:I,timeZoneName:we},_r={hour:I,minute:I,second:I,timeZoneName:De},Wr={hour:I,minute:I,hourCycle:"h23"},jr={hour:I,minute:I,second:I,hourCycle:"h23"},Hr={hour:I,minute:I,second:I,hourCycle:"h23",timeZoneName:we},Pr={hour:I,minute:I,second:I,hourCycle:"h23",timeZoneName:De},$r={year:I,month:I,day:I,hour:I,minute:I},Rr={year:I,month:I,day:I,hour:I,minute:I,second:I},zr={year:I,month:we,day:I,hour:I,minute:I},Ur={year:I,month:we,day:I,hour:I,minute:I,second:I},Qi={year:I,month:we,day:I,weekday:we,hour:I,minute:I},qr={year:I,month:De,day:I,hour:I,minute:I,timeZoneName:we},Zr={year:I,month:De,day:I,hour:I,minute:I,second:I,timeZoneName:we},Yr={year:I,month:De,day:I,weekday:De,hour:I,minute:I,timeZoneName:De},Gr={year:I,month:De,day:I,weekday:De,hour:I,minute:I,second:I,timeZoneName:De},Re=class{get type(){throw new ve}get name(){throw new ve}get ianaName(){return this.name}get isUniversal(){throw new ve}offsetName(e,t){throw new ve}formatOffset(e,t){throw new ve}offset(e){throw new ve}equals(e){throw new ve}get isValid(){throw new ve}},Qt=null,Xe=class extends Re{static get instance(){return Qt===null&&(Qt=new Xe),Qt}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return Kr(e,t,r)}formatOffset(e,t){return Dt(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}},Lt={};function Xi(n){return Lt[n]||(Lt[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Lt[n]}var es={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function ts(n,e){let t=n.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,i,s,u,a,c,o,m]=r;return[u,i,s,a,c,o,m]}function ns(n,e){let t=n.formatToParts(e),r=[];for(let i=0;i<t.length;i++){let{type:s,value:u}=t[i],a=es[s];s==="era"?r[a]=u:Z(a)||(r[a]=parseInt(u,10))}return r}var Mt={},be=class extends Re{static create(e){return Mt[e]||(Mt[e]=new be(e)),Mt[e]}static resetCache(){Mt={},Lt={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(t){return!1}}constructor(e){super(),this.zoneName=e,this.valid=be.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return Kr(e,t,r,this.name)}formatOffset(e,t){return Dt(this.offset(e),t)}offset(e){let t=new Date(e);if(isNaN(t))return NaN;let r=Xi(this.name),[i,s,u,a,c,o,m]=r.formatToParts?ns(r,t):ts(r,t);a==="BC"&&(i=-Math.abs(i)+1);let w=Ut({year:i,month:s,day:u,hour:c===24?0:c,minute:o,second:m,millisecond:0}),g=+t,b=g%1e3;return g-=b>=0?b:1e3+b,(w-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}},er={};function rs(n,e={}){let t=JSON.stringify([n,e]),r=er[t];return r||(r=new Intl.ListFormat(n,e),er[t]=r),r}var on={};function cn(n,e={}){let t=JSON.stringify([n,e]),r=on[t];return r||(r=new Intl.DateTimeFormat(n,e),on[t]=r),r}var fn={};function is(n,e={}){let t=JSON.stringify([n,e]),r=fn[t];return r||(r=new Intl.NumberFormat(n,e),fn[t]=r),r}var hn={};function ss(n,e={}){let{base:t,...r}=e,i=JSON.stringify([n,r]),s=hn[i];return s||(s=new Intl.RelativeTimeFormat(n,e),hn[i]=s),s}var ht=null;function us(){return ht||(ht=new Intl.DateTimeFormat().resolvedOptions().locale,ht)}function as(n){let e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));let t=n.indexOf("-u-");if(t===-1)return[n];{let r,i;try{r=cn(n).resolvedOptions(),i=n}catch(a){let c=n.substring(0,t);r=cn(c).resolvedOptions(),i=c}let{numberingSystem:s,calendar:u}=r;return[i,s,u]}}function ls(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function os(n){let e=[];for(let t=1;t<=12;t++){let r=j.utc(2009,t,1);e.push(n(r))}return e}function cs(n){let e=[];for(let t=1;t<=7;t++){let r=j.utc(2016,11,13+t);e.push(n(r))}return e}function Ot(n,e,t,r){let i=n.listingMode();return i==="error"?null:i==="en"?t(e):r(e)}function fs(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||new Intl.DateTimeFormat(n.intl).resolvedOptions().numberingSystem==="latn"}var dn=class{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;let{padTo:i,floor:s,...u}=r;if(!t||Object.keys(u).length>0){let a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=is(e,a)}}format(e){if(this.inf){let t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{let t=this.floor?Math.floor(e):kn(e,3);return ne(t,this.padTo)}}},Dn=class{constructor(e,t,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let u=-1*(e.offset/60),a=u>=0?`Etc/GMT+${u}`:`Etc/GMT${u}`;e.offset!==0&&be.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=cn(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){let r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:r}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},mn=class{constructor(e,t,r){this.opts={style:"long",...r},!t&&Jr()&&(this.rtf=ss(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):xs(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}},J=class{static fromOpts(e){return J.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,t,r,i=!1){let s=e||te.defaultLocale,u=s||(i?"en-US":us()),a=t||te.defaultNumberingSystem,c=r||te.defaultOutputCalendar;return new J(u,a,c,s)}static resetCache(){ht=null,on={},fn={},hn={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:r}={}){return J.create(e,t,r)}constructor(e,t,r,i){let[s,u,a]=as(e);this.locale=s,this.numberingSystem=t||u||null,this.outputCalendar=r||a||null,this.intl=ls(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=fs(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:J.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Ot(this,e,ei,()=>{let r=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=os(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,t=!1){return Ot(this,e,ri,()=>{let r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=cs(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Ot(this,void 0,()=>ii,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[j.utc(2016,11,13,9),j.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Ot(this,e,si,()=>{let t={era:e};return this.eraCache[e]||(this.eraCache[e]=[j.utc(-40,1,1),j.utc(2017,1,1)].map(r=>this.extract(r,t,"era"))),this.eraCache[e]})}extract(e,t,r){let i=this.dtFormatter(e,t),s=i.formatToParts(),u=s.find(a=>a.type.toLowerCase()===r);return u?u.value:null}numberFormatter(e={}){return new dn(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new Dn(e,this.intl,t)}relFormatter(e={}){return new mn(this.intl,this.isEnglish(),e)}listFormatter(e={}){return rs(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}},Xt=null,ae=class extends Re{static get utcInstance(){return Xt===null&&(Xt=new ae(0)),Xt}static instance(e){return e===0?ae.utcInstance:new ae(e)}static parseSpecifier(e){if(e){let t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new ae(qt(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Dt(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Dt(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Dt(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}},pn=class extends Re{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function Le(n,e){if(Z(n)||n===null)return e;if(n instanceof Re)return n;if(hs(n)){let t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Xe.instance:t==="utc"||t==="gmt"?ae.utcInstance:ae.parseSpecifier(t)||be.create(n)}else return $e(n)?ae.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new pn(n)}var tr=()=>Date.now(),nr="system",rr=null,ir=null,sr=null,ur=60,ar,te=class{static get now(){return tr}static set now(e){tr=e}static set defaultZone(e){nr=e}static get defaultZone(){return Le(nr,Xe.instance)}static get defaultLocale(){return rr}static set defaultLocale(e){rr=e}static get defaultNumberingSystem(){return ir}static set defaultNumberingSystem(e){ir=e}static get defaultOutputCalendar(){return sr}static set defaultOutputCalendar(e){sr=e}static get twoDigitCutoffYear(){return ur}static set twoDigitCutoffYear(e){ur=e%100}static get throwOnInvalid(){return ar}static set throwOnInvalid(e){ar=e}static resetCaches(){J.resetCache(),be.resetCache()}};function Z(n){return typeof n=="undefined"}function $e(n){return typeof n=="number"}function zt(n){return typeof n=="number"&&n%1===0}function hs(n){return typeof n=="string"}function ds(n){return Object.prototype.toString.call(n)==="[object Date]"}function Jr(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch(n){return!1}}function Ds(n){return Array.isArray(n)?n:[n]}function lr(n,e,t){if(n.length!==0)return n.reduce((r,i)=>{let s=[e(i),i];return r&&t(r[0],s[0])===r[0]?r:s},null)[1]}function ms(n,e){return e.reduce((t,r)=>(t[r]=n[r],t),{})}function et(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Se(n,e,t){return zt(n)&&n>=e&&n<=t}function ps(n,e){return n-e*Math.floor(n/e)}function ne(n,e=2){let t=n<0,r;return t?r="-"+(""+-n).padStart(e,"0"):r=(""+n).padStart(e,"0"),r}function Ne(n){if(!(Z(n)||n===null||n===""))return parseInt(n,10)}function We(n){if(!(Z(n)||n===null||n===""))return parseFloat(n)}function vn(n){if(!(Z(n)||n===null||n==="")){let e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function kn(n,e,t=!1){let r=10**e;return(t?Math.trunc:Math.round)(n*r)/r}function gt(n){return n%4===0&&(n%100!==0||n%400===0)}function dt(n){return gt(n)?366:365}function Wt(n,e){let t=ps(e-1,12)+1,r=n+(e-t)/12;return t===2?gt(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Ut(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function jt(n){let e=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7,t=n-1,r=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7;return e===4||r===3?53:52}function yn(n){return n>99?n:n>te.twoDigitCutoffYear?1900+n:2e3+n}function Kr(n,e,t,r=null){let i=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);let u={timeZoneName:e,...s},a=new Intl.DateTimeFormat(t,u).formatToParts(i).find(c=>c.type.toLowerCase()==="timezonename");return a?a.value:null}function qt(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);let r=parseInt(e,10)||0,i=t<0||Object.is(t,-0)?-r:r;return t*60+i}function Qr(n){let e=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(e))throw new fe(`Invalid unit value ${n}`);return e}function Ht(n,e){let t={};for(let r in n)if(et(n,r)){let i=n[r];if(i==null)continue;t[e(r)]=Qr(i)}return t}function Dt(n,e){let t=Math.trunc(Math.abs(n/60)),r=Math.trunc(Math.abs(n%60)),i=n>=0?"+":"-";switch(e){case"short":return`${i}${ne(t,2)}:${ne(r,2)}`;case"narrow":return`${i}${t}${r>0?`:${r}`:""}`;case"techie":return`${i}${ne(t,2)}${ne(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Zt(n){return ms(n,["hour","minute","second","millisecond"])}var ys=["January","February","March","April","May","June","July","August","September","October","November","December"],Xr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Fs=["J","F","M","A","M","J","J","A","S","O","N","D"];function ei(n){switch(n){case"narrow":return[...Fs];case"short":return[...Xr];case"long":return[...ys];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var ti=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ni=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],gs=["M","T","W","T","F","S","S"];function ri(n){switch(n){case"narrow":return[...gs];case"short":return[...ni];case"long":return[...ti];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var ii=["AM","PM"],Es=["Before Christ","Anno Domini"],ws=["BC","AD"],bs=["B","A"];function si(n){switch(n){case"narrow":return[...bs];case"short":return[...ws];case"long":return[...Es];default:return null}}function Cs(n){return ii[n.hour<12?0:1]}function vs(n,e){return ri(e)[n.weekday-1]}function ks(n,e){return ei(e)[n.month-1]}function Ts(n,e){return si(e)[n.year<0?0:1]}function xs(n,e,t="always",r=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){let d=n==="days";switch(e){case 1:return d?"tomorrow":`next ${i[n][0]}`;case-1:return d?"yesterday":`last ${i[n][0]}`;case 0:return d?"today":`this ${i[n][0]}`}}let u=Object.is(e,-0)||e<0,a=Math.abs(e),c=a===1,o=i[n],m=r?c?o[1]:o[2]||o[1]:c?i[n][0]:n;return u?`${a} ${m} ago`:`in ${a} ${m}`}function or(n,e){let t="";for(let r of n)r.literal?t+=r.val:t+=e(r.val);return t}var Ms={D:_t,DD:Br,DDD:Ar,DDDD:Nr,t:Lr,tt:Ir,ttt:Vr,tttt:_r,T:Wr,TT:jr,TTT:Hr,TTTT:Pr,f:$r,ff:zr,fff:qr,ffff:Yr,F:Rr,FF:Ur,FFF:Zr,FFFF:Gr},se=class{static create(e,t={}){return new se(e,t)}static parseFormat(e){let t=null,r="",i=!1,s=[];for(let u=0;u<e.length;u++){let a=e.charAt(u);a==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),t=null,r="",i=!i):i||a===t?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,t=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return Ms[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return ne(e,t);let r={...this.opts};return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,t){let r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(g,b)=>this.loc.extract(e,g,b),u=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",a=()=>r?Cs(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(g,b)=>r?ks(e,g):s(b?{month:g}:{month:g,day:"numeric"},"month"),o=(g,b)=>r?vs(e,g):s(b?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),m=g=>{let b=se.macroTokenToFormatOpts(g);return b?this.formatWithSystemDefault(e,b):g},d=g=>r?Ts(e,g):s({era:g},"era"),w=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return u({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return u({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return o("short",!0);case"cccc":return o("long",!0);case"ccccc":return o("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return o("short",!1);case"EEEE":return o("long",!1);case"EEEEE":return o("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return m(g)}};return or(se.parseFormat(t),w)}formatDurationFromString(e,t){let r=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=c=>o=>{let m=r(o);return m?this.num(c.get(m),o.length):o},s=se.parseFormat(t),u=s.reduce((c,{literal:o,val:m})=>o?c:c.concat(m),[]),a=e.shiftTo(...u.map(r).filter(c=>c));return or(s,i(a))}},de=class{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},ui=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function tt(...n){let e=n.reduce((t,r)=>t+r.source,"");return RegExp(`^${e}$`)}function nt(...n){return e=>n.reduce(([t,r,i],s)=>{let[u,a,c]=s(e,i);return[{...t,...u},a||r,c]},[{},null,1]).slice(0,2)}function rt(n,...e){if(n==null)return[null,null];for(let[t,r]of e){let i=t.exec(n);if(i)return r(i)}return[null,null]}function ai(...n){return(e,t)=>{let r={},i;for(i=0;i<n.length;i++)r[n[i]]=Ne(e[t+i]);return[r,null,t+i]}}var li=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Os=`(?:${li.source}?(?:\\[(${ui.source})\\])?)?`,Tn=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,oi=RegExp(`${Tn.source}${Os}`),xn=RegExp(`(?:T${oi.source})?`),Ss=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Bs=/(\d{4})-?W(\d\d)(?:-?(\d))?/,As=/(\d{4})-?(\d{3})/,Ns=ai("weekYear","weekNumber","weekDay"),Ls=ai("year","ordinal"),Is=/(\d{4})-(\d\d)-(\d\d)/,ci=RegExp(`${Tn.source} ?(?:${li.source}|(${ui.source}))?`),Vs=RegExp(`(?: ${ci.source})?`);function Qe(n,e,t){let r=n[e];return Z(r)?t:Ne(r)}function _s(n,e){return[{year:Qe(n,e),month:Qe(n,e+1,1),day:Qe(n,e+2,1)},null,e+3]}function it(n,e){return[{hours:Qe(n,e,0),minutes:Qe(n,e+1,0),seconds:Qe(n,e+2,0),milliseconds:vn(n[e+3])},null,e+4]}function Et(n,e){let t=!n[e]&&!n[e+1],r=qt(n[e+1],n[e+2]),i=t?null:ae.instance(r);return[{},i,e+3]}function wt(n,e){let t=n[e]?be.create(n[e]):null;return[{},t,e+1]}var Ws=RegExp(`^T?${Tn.source}$`),js=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Hs(n){let[e,t,r,i,s,u,a,c,o]=n,m=e[0]==="-",d=c&&c[0]==="-",w=(g,b=!1)=>g!==void 0&&(b||g&&m)?-g:g;return[{years:w(We(t)),months:w(We(r)),weeks:w(We(i)),days:w(We(s)),hours:w(We(u)),minutes:w(We(a)),seconds:w(We(c),c==="-0"),milliseconds:w(vn(o),d)}]}var Ps={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Mn(n,e,t,r,i,s,u){let a={year:e.length===2?yn(Ne(e)):Ne(e),month:Xr.indexOf(t)+1,day:Ne(r),hour:Ne(i),minute:Ne(s)};return u&&(a.second=Ne(u)),n&&(a.weekday=n.length>3?ti.indexOf(n)+1:ni.indexOf(n)+1),a}var $s=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Rs(n){let[,e,t,r,i,s,u,a,c,o,m,d]=n,w=Mn(e,i,r,t,s,u,a),g;return c?g=Ps[c]:o?g=0:g=qt(m,d),[w,new ae(g)]}function zs(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var Us=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,qs=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Zs=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function cr(n){let[,e,t,r,i,s,u,a]=n;return[Mn(e,i,r,t,s,u,a),ae.utcInstance]}function Ys(n){let[,e,t,r,i,s,u,a]=n;return[Mn(e,a,t,r,i,s,u),ae.utcInstance]}var Gs=tt(Ss,xn),Js=tt(Bs,xn),Ks=tt(As,xn),Qs=tt(oi),fi=nt(_s,it,Et,wt),Xs=nt(Ns,it,Et,wt),eu=nt(Ls,it,Et,wt),tu=nt(it,Et,wt);function nu(n){return rt(n,[Gs,fi],[Js,Xs],[Ks,eu],[Qs,tu])}function ru(n){return rt(zs(n),[$s,Rs])}function iu(n){return rt(n,[Us,cr],[qs,cr],[Zs,Ys])}function su(n){return rt(n,[js,Hs])}var uu=nt(it);function au(n){return rt(n,[Ws,uu])}var lu=tt(Is,Vs),ou=tt(ci),cu=nt(it,Et,wt);function fu(n){return rt(n,[lu,fi],[ou,cu])}var fr="Invalid Duration",hi={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},hu={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...hi},pe=146097/400,Ge=146097/4800,du={years:{quarters:4,months:12,weeks:pe/7,days:pe,hours:pe*24,minutes:pe*24*60,seconds:pe*24*60*60,milliseconds:pe*24*60*60*1e3},quarters:{months:3,weeks:pe/28,days:pe/4,hours:pe*24/4,minutes:pe*24*60/4,seconds:pe*24*60*60/4,milliseconds:pe*24*60*60*1e3/4},months:{weeks:Ge/7,days:Ge,hours:Ge*24,minutes:Ge*24*60,seconds:Ge*24*60*60,milliseconds:Ge*24*60*60*1e3},...hi},Pe=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Du=Pe.slice(0).reverse();function Ae(n,e,t=!1){let r={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new _(r)}function di(n,e){var r;let t=(r=e.milliseconds)!=null?r:0;for(let i of Du.slice(1))e[i]&&(t+=e[i]*n[i].milliseconds);return t}function hr(n,e){let t=di(n,e)<0?-1:1;Pe.reduceRight((r,i)=>{if(Z(e[i]))return r;if(r){let s=e[r]*t,u=n[i][r],a=Math.floor(s/u);e[i]+=a*t,e[r]-=a*u*t}return i},null),Pe.reduce((r,i)=>{if(Z(e[i]))return r;if(r){let s=e[r]%1;e[r]-=s,e[i]+=s*n[r][i]}return i},null)}function mu(n){let e={};for(let[t,r]of Object.entries(n))r!==0&&(e[t]=r);return e}var _=class{constructor(e){let t=e.conversionAccuracy==="longterm"||!1,r=t?du:hu;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||J.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return _.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new fe(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new _({values:Ht(e,_.normalizeUnit),loc:J.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if($e(e))return _.fromMillis(e);if(_.isDuration(e))return e;if(typeof e=="object")return _.fromObject(e);throw new fe(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){let[r]=su(e);return r?_.fromObject(r,t):_.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){let[r]=au(e);return r?_.fromObject(r,t):_.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new fe("need to specify a reason the Duration is invalid");let r=e instanceof de?e:new de(e,t);if(te.throwOnInvalid)throw new ln(r);return new _({invalid:r})}static normalizeUnit(e){let t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Vt(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){let r={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?se.create(this.loc,r).formatDurationFromString(this,e):fr}toHuman(e={}){if(!this.isValid)return fr;let t=Pe.map(r=>{let i=this.values[r];return Z(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=kn(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},j.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?di(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let t=_.fromDurationLike(e),r={};for(let i of Pe)(et(t.values,i)||et(this.values,i))&&(r[i]=t.get(i)+this.get(i));return Ae(this,{values:r},!0)}minus(e){if(!this.isValid)return this;let t=_.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;let t={};for(let r of Object.keys(this.values))t[r]=Qr(e(this.values[r],r));return Ae(this,{values:t},!0)}get(e){return this[_.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let t={...this.values,...Ht(e,_.normalizeUnit)};return Ae(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:i}={}){let u={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:r};return Ae(this,u)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return hr(this.matrix,e),Ae(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=mu(this.normalize().shiftToAll().toObject());return Ae(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(u=>_.normalizeUnit(u));let t={},r={},i=this.toObject(),s;for(let u of Pe)if(e.indexOf(u)>=0){s=u;let a=0;for(let o in r)a+=this.matrix[o][u]*r[o],r[o]=0;$e(i[u])&&(a+=i[u]);let c=Math.trunc(a);t[u]=c,r[u]=(a*1e3-c*1e3)/1e3}else $e(i[u])&&(r[u]=i[u]);for(let u in r)r[u]!==0&&(t[s]+=u===s?r[u]:r[u]/this.matrix[s][u]);return hr(this.matrix,t),Ae(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Ae(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(let r of Pe)if(!t(this.values[r],e.values[r]))return!1;return!0}},Je="Invalid Interval";function pu(n,e){return!n||!n.isValid?X.invalid("missing or invalid start"):!e||!e.isValid?X.invalid("missing or invalid end"):e<n?X.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}var X=class{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new fe("need to specify a reason the Interval is invalid");let r=e instanceof de?e:new de(e,t);if(te.throwOnInvalid)throw new an(r);return new X({invalid:r})}static fromDateTimes(e,t){let r=ct(e),i=ct(t),s=pu(r,i);return s==null?new X({start:r,end:i}):s}static after(e,t){let r=_.fromDurationLike(t),i=ct(e);return X.fromDateTimes(i,i.plus(r))}static before(e,t){let r=_.fromDurationLike(t),i=ct(e);return X.fromDateTimes(i.minus(r),i)}static fromISO(e,t){let[r,i]=(e||"").split("/",2);if(r&&i){let s,u;try{s=j.fromISO(r,t),u=s.isValid}catch(o){u=!1}let a,c;try{a=j.fromISO(i,t),c=a.isValid}catch(o){c=!1}if(u&&c)return X.fromDateTimes(s,a);if(u){let o=_.fromISO(i,t);if(o.isValid)return X.after(s,o)}else if(c){let o=_.fromISO(r,t);if(o.isValid)return X.before(a,o)}}return X.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;let t=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(t,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?X.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];let t=e.map(ct).filter(u=>this.contains(u)).sort(),r=[],{s:i}=this,s=0;for(;i<this.e;){let u=t[s]||this.e,a=+u>+this.e?this.e:u;r.push(X.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){let t=_.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:r}=this,i=1,s,u=[];for(;r<this.e;){let a=this.start.plus(t.mapUnits(c=>c*i));s=+a>+this.e?this.e:a,u.push(X.fromDateTimes(r,s)),r=s,i+=1}return u}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:X.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;let t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return X.fromDateTimes(t,r)}static merge(e){let[t,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],u)=>s?s.overlaps(u)||s.abutsStart(u)?[i,s.union(u)]:[i.concat([s]),u]:[i,u],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0,i=[],s=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),u=Array.prototype.concat(...s),a=u.sort((c,o)=>c.time-o.time);for(let c of a)r+=c.type==="s"?1:-1,r===1?t=c.time:(t&&+t!=+c.time&&i.push(X.fromDateTimes(t,c.time)),t=null);return X.merge(i)}difference(...e){return X.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Je}toLocaleString(e=_t,t={}){return this.isValid?se.create(this.s.loc.clone(t),e).formatInterval(this):Je}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Je}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Je}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Je}toFormat(e,{separator:t=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Je}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):_.invalid(this.invalidReason)}mapEndpoints(e){return X.fromDateTimes(e(this.s),e(this.e))}},Ke=class{static hasDST(e=te.defaultZone){let t=j.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return be.isValidZone(e)}static normalizeZone(e){return Le(e,te.defaultZone)}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||J.create(t,r,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||J.create(t,r,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||J.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||J.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return J.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return J.create(t,null,"gregory").eras(e)}static features(){return{relative:Jr()}}};function dr(n,e){let t=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=t(e)-t(n);return Math.floor(_.fromMillis(r).as("days"))}function yu(n,e,t){let r=[["years",(c,o)=>o.year-c.year],["quarters",(c,o)=>o.quarter-c.quarter+(o.year-c.year)*4],["months",(c,o)=>o.month-c.month+(o.year-c.year)*12],["weeks",(c,o)=>{let m=dr(c,o);return(m-m%7)/7}],["days",dr]],i={},s=n,u,a;for(let[c,o]of r)t.indexOf(c)>=0&&(u=c,i[c]=o(n,e),a=s.plus(i),a>e?(i[c]--,n=s.plus(i),n>e&&(a=n,i[c]--,n=s.plus(i))):n=a);return[n,i,a,u]}function Fu(n,e,t,r){let[i,s,u,a]=yu(n,e,t),c=e-i,o=t.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);o.length===0&&(u<e&&(u=i.plus({[a]:1})),u!==i&&(s[a]=(s[a]||0)+c/(u-i)));let m=_.fromObject(s,r);return o.length>0?_.fromMillis(c,r).shiftTo(...o).plus(m):m}var On={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},Dr={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},gu=On.hanidec.replace(/[\[|\]]/g,"").split("");function Eu(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(n[t].search(On.hanidec)!==-1)e+=gu.indexOf(n[t]);else for(let i in Dr){let[s,u]=Dr[i];r>=s&&r<=u&&(e+=r-s)}}return parseInt(e,10)}else return e}function Fe({numberingSystem:n},e=""){return new RegExp(`${On[n||"latn"]}${e}`)}var wu="missing Intl.DateTimeFormat.formatToParts support";function G(n,e=t=>t){return{regex:n,deser:([t])=>e(Eu(t))}}var bu=String.fromCharCode(160),Di=`[ ${bu}]`,mi=new RegExp(Di,"g");function Cu(n){return n.replace(/\./g,"\\.?").replace(mi,Di)}function mr(n){return n.replace(/\./g,"").replace(mi," ").toLowerCase()}function ge(n,e){return n===null?null:{regex:RegExp(n.map(Cu).join("|")),deser:([t])=>n.findIndex(r=>mr(t)===mr(r))+e}}function pr(n,e){return{regex:n,deser:([,t,r])=>qt(t,r),groups:e}}function St(n){return{regex:n,deser:([e])=>e}}function vu(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function ku(n,e){let t=Fe(e),r=Fe(e,"{2}"),i=Fe(e,"{3}"),s=Fe(e,"{4}"),u=Fe(e,"{6}"),a=Fe(e,"{1,2}"),c=Fe(e,"{1,3}"),o=Fe(e,"{1,6}"),m=Fe(e,"{1,9}"),d=Fe(e,"{2,4}"),w=Fe(e,"{4,6}"),g=F=>({regex:RegExp(vu(F.val)),deser:([T])=>T,literal:!0}),E=(F=>{if(n.literal)return g(F);switch(F.val){case"G":return ge(e.eras("short"),0);case"GG":return ge(e.eras("long"),0);case"y":return G(o);case"yy":return G(d,yn);case"yyyy":return G(s);case"yyyyy":return G(w);case"yyyyyy":return G(u);case"M":return G(a);case"MM":return G(r);case"MMM":return ge(e.months("short",!0),1);case"MMMM":return ge(e.months("long",!0),1);case"L":return G(a);case"LL":return G(r);case"LLL":return ge(e.months("short",!1),1);case"LLLL":return ge(e.months("long",!1),1);case"d":return G(a);case"dd":return G(r);case"o":return G(c);case"ooo":return G(i);case"HH":return G(r);case"H":return G(a);case"hh":return G(r);case"h":return G(a);case"mm":return G(r);case"m":return G(a);case"q":return G(a);case"qq":return G(r);case"s":return G(a);case"ss":return G(r);case"S":return G(c);case"SSS":return G(i);case"u":return St(m);case"uu":return St(a);case"uuu":return G(t);case"a":return ge(e.meridiems(),0);case"kkkk":return G(s);case"kk":return G(d,yn);case"W":return G(a);case"WW":return G(r);case"E":case"c":return G(t);case"EEE":return ge(e.weekdays("short",!1),1);case"EEEE":return ge(e.weekdays("long",!1),1);case"ccc":return ge(e.weekdays("short",!0),1);case"cccc":return ge(e.weekdays("long",!0),1);case"Z":case"ZZ":return pr(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return pr(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return St(/[a-z_+-/]{1,256}?/i);case" ":return St(/[^\S\n\r]/);default:return g(F)}})(n)||{invalidReason:wu};return E.token=n,E}var Tu={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function xu(n,e,t){let{type:r,value:i}=n;if(r==="literal"){let c=/^\s+$/.test(i);return{literal:!c,val:c?" ":i}}let s=e[r],u=r;r==="hour"&&(e.hour12!=null?u=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?u="hour12":u="hour24":u=t.hour12?"hour12":"hour24");let a=Tu[u];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function Mu(n){return[`^${n.map(t=>t.regex).reduce((t,r)=>`${t}(${r.source})`,"")}$`,n]}function Ou(n,e,t){let r=n.match(e);if(r){let i={},s=1;for(let u in t)if(et(t,u)){let a=t[u],c=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+c))),s+=c}return[r,i]}else return[r,{}]}function Su(n){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},t=null,r;return Z(n.z)||(t=be.create(n.z)),Z(n.Z)||(t||(t=new ae(n.Z)),r=n.Z),Z(n.q)||(n.M=(n.q-1)*3+1),Z(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),Z(n.u)||(n.S=vn(n.u)),[Object.keys(n).reduce((s,u)=>{let a=e(u);return a&&(s[a]=n[u]),s},{}),t,r]}var en=null;function Bu(){return en||(en=j.fromMillis(1555555555555)),en}function Au(n,e){if(n.literal)return n;let t=se.macroTokenToFormatOpts(n.val),r=Fi(t,e);return r==null||r.includes(void 0)?n:r}function pi(n,e){return Array.prototype.concat(...n.map(t=>Au(t,e)))}function yi(n,e,t){let r=pi(se.parseFormat(t),n),i=r.map(u=>ku(u,n)),s=i.find(u=>u.invalidReason);if(s)return{input:e,tokens:r,invalidReason:s.invalidReason};{let[u,a]=Mu(i),c=RegExp(u,"i"),[o,m]=Ou(e,c,a),[d,w,g]=m?Su(m):[null,null,void 0];if(et(m,"a")&&et(m,"H"))throw new He("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:c,rawMatches:o,matches:m,result:d,zone:w,specificOffset:g}}}function Nu(n,e,t){let{result:r,zone:i,specificOffset:s,invalidReason:u}=yi(n,e,t);return[r,i,s,u]}function Fi(n,e){if(!n)return null;let r=se.create(e,n).dtFormatter(Bu()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(u=>xu(u,n,s))}var gi=[0,31,59,90,120,151,181,212,243,273,304,334],Ei=[0,31,60,91,121,152,182,213,244,274,305,335];function ye(n,e){return new de("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function wi(n,e,t){let r=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);let i=r.getUTCDay();return i===0?7:i}function bi(n,e,t){return t+(gt(n)?Ei:gi)[e-1]}function Ci(n,e){let t=gt(n)?Ei:gi,r=t.findIndex(s=>s<e),i=e-t[r];return{month:r+1,day:i}}function Fn(n){let{year:e,month:t,day:r}=n,i=bi(e,t,r),s=wi(e,t,r),u=Math.floor((i-s+10)/7),a;return u<1?(a=e-1,u=jt(a)):u>jt(e)?(a=e+1,u=1):a=e,{weekYear:a,weekNumber:u,weekday:s,...Zt(n)}}function yr(n){let{weekYear:e,weekNumber:t,weekday:r}=n,i=wi(e,1,4),s=dt(e),u=t*7+r-i-3,a;u<1?(a=e-1,u+=dt(a)):u>s?(a=e+1,u-=dt(e)):a=e;let{month:c,day:o}=Ci(a,u);return{year:a,month:c,day:o,...Zt(n)}}function tn(n){let{year:e,month:t,day:r}=n,i=bi(e,t,r);return{year:e,ordinal:i,...Zt(n)}}function Fr(n){let{year:e,ordinal:t}=n,{month:r,day:i}=Ci(e,t);return{year:e,month:r,day:i,...Zt(n)}}function Lu(n){let e=zt(n.weekYear),t=Se(n.weekNumber,1,jt(n.weekYear)),r=Se(n.weekday,1,7);return e?t?r?!1:ye("weekday",n.weekday):ye("week",n.week):ye("weekYear",n.weekYear)}function Iu(n){let e=zt(n.year),t=Se(n.ordinal,1,dt(n.year));return e?t?!1:ye("ordinal",n.ordinal):ye("year",n.year)}function vi(n){let e=zt(n.year),t=Se(n.month,1,12),r=Se(n.day,1,Wt(n.year,n.month));return e?t?r?!1:ye("day",n.day):ye("month",n.month):ye("year",n.year)}function ki(n){let{hour:e,minute:t,second:r,millisecond:i}=n,s=Se(e,0,23)||e===24&&t===0&&r===0&&i===0,u=Se(t,0,59),a=Se(r,0,59),c=Se(i,0,999);return s?u?a?c?!1:ye("millisecond",i):ye("second",r):ye("minute",t):ye("hour",e)}var nn="Invalid DateTime",gr=864e13;function Bt(n){return new de("unsupported zone",`the zone "${n.name}" is not supported`)}function rn(n){return n.weekData===null&&(n.weekData=Fn(n.c)),n.weekData}function je(n,e){let t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new j({...t,...e,old:t})}function Ti(n,e,t){let r=n-e*60*1e3,i=t.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;let s=t.offset(r);return i===s?[r,i]:[n-Math.min(i,s)*60*1e3,Math.max(i,s)]}function At(n,e){n+=e*60*1e3;let t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function It(n,e,t){return Ti(Ut(n),e,t)}function Er(n,e){let t=n.o,r=n.c.year+Math.trunc(e.years),i=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:r,month:i,day:Math.min(n.c.day,Wt(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},u=_.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Ut(s),[c,o]=Ti(a,t,n.zone);return u!==0&&(c+=u,o=n.zone.offset(c)),{ts:c,o}}function ot(n,e,t,r,i,s){let{setZone:u,zone:a}=t;if(n&&Object.keys(n).length!==0||e){let c=e||a,o=j.fromObject(n,{...t,zone:c,specificOffset:s});return u?o:o.setZone(a)}else return j.invalid(new de("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Nt(n,e,t=!0){return n.isValid?se.create(J.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function sn(n,e){let t=n.c.year>9999||n.c.year<0,r="";return t&&n.c.year>=0&&(r+="+"),r+=ne(n.c.year,t?6:4),e?(r+="-",r+=ne(n.c.month),r+="-",r+=ne(n.c.day)):(r+=ne(n.c.month),r+=ne(n.c.day)),r}function wr(n,e,t,r,i,s){let u=ne(n.c.hour);return e?(u+=":",u+=ne(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(u+=":")):u+=ne(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(u+=ne(n.c.second),(n.c.millisecond!==0||!r)&&(u+=".",u+=ne(n.c.millisecond,3))),i&&(n.isOffsetFixed&&n.offset===0&&!s?u+="Z":n.o<0?(u+="-",u+=ne(Math.trunc(-n.o/60)),u+=":",u+=ne(Math.trunc(-n.o%60))):(u+="+",u+=ne(Math.trunc(n.o/60)),u+=":",u+=ne(Math.trunc(n.o%60)))),s&&(u+="["+n.zone.ianaName+"]"),u}var xi={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Vu={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},_u={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Mi=["year","month","day","hour","minute","second","millisecond"],Wu=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],ju=["year","ordinal","hour","minute","second","millisecond"];function br(n){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new Vt(n);return e}function Cr(n,e){let t=Le(e.zone,te.defaultZone),r=J.fromObject(e),i=te.now(),s,u;if(Z(n.year))s=i;else{for(let o of Mi)Z(n[o])&&(n[o]=xi[o]);let a=vi(n)||ki(n);if(a)return j.invalid(a);let c=t.offset(i);[s,u]=It(n,c,t)}return new j({ts:s,zone:t,loc:r,o:u})}function vr(n,e,t){let r=Z(t.round)?!0:t.round,i=(u,a)=>(u=kn(u,r||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(u,a)),s=u=>t.calendary?e.hasSame(n,u)?0:e.startOf(u).diff(n.startOf(u),u).get(u):e.diff(n,u).get(u);if(t.unit)return i(s(t.unit),t.unit);for(let u of t.units){let a=s(u);if(Math.abs(a)>=1)return i(a,u)}return i(n>e?-0:0,t.units[t.units.length-1])}function kr(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}var j=class{constructor(e){let t=e.zone||te.defaultZone,r=e.invalid||(Number.isNaN(e.ts)?new de("invalid input"):null)||(t.isValid?null:Bt(t));this.ts=Z(e.ts)?te.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,s]=[e.old.c,e.old.o];else{let a=t.offset(this.ts);i=At(this.ts,a),r=Number.isNaN(i.year)?new de("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=t,this.loc=e.loc||J.create(),this.invalid=r,this.weekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new j({})}static local(){let[e,t]=kr(arguments),[r,i,s,u,a,c,o]=t;return Cr({year:r,month:i,day:s,hour:u,minute:a,second:c,millisecond:o},e)}static utc(){let[e,t]=kr(arguments),[r,i,s,u,a,c,o]=t;return e.zone=ae.utcInstance,Cr({year:r,month:i,day:s,hour:u,minute:a,second:c,millisecond:o},e)}static fromJSDate(e,t={}){let r=ds(e)?e.valueOf():NaN;if(Number.isNaN(r))return j.invalid("invalid input");let i=Le(t.zone,te.defaultZone);return i.isValid?new j({ts:r,zone:i,loc:J.fromObject(t)}):j.invalid(Bt(i))}static fromMillis(e,t={}){if($e(e))return e<-gr||e>gr?j.invalid("Timestamp out of range"):new j({ts:e,zone:Le(t.zone,te.defaultZone),loc:J.fromObject(t)});throw new fe(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if($e(e))return new j({ts:e*1e3,zone:Le(t.zone,te.defaultZone),loc:J.fromObject(t)});throw new fe("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};let r=Le(t.zone,te.defaultZone);if(!r.isValid)return j.invalid(Bt(r));let i=te.now(),s=Z(t.specificOffset)?r.offset(i):t.specificOffset,u=Ht(e,br),a=!Z(u.ordinal),c=!Z(u.year),o=!Z(u.month)||!Z(u.day),m=c||o,d=u.weekYear||u.weekNumber,w=J.fromObject(t);if((m||a)&&d)throw new He("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&a)throw new He("Can't mix ordinal dates with month/day");let g=d||u.weekday&&!m,b,E,F=At(i,s);g?(b=Wu,E=Vu,F=Fn(F)):a?(b=ju,E=_u,F=tn(F)):(b=Mi,E=xi);let T=!1;for(let k of b){let y=u[k];Z(y)?T?u[k]=E[k]:u[k]=F[k]:T=!0}let M=g?Lu(u):a?Iu(u):vi(u),A=M||ki(u);if(A)return j.invalid(A);let D=g?yr(u):a?Fr(u):u,[B,V]=It(D,s,r),v=new j({ts:B,zone:r,o:V,loc:w});return u.weekday&&m&&e.weekday!==v.weekday?j.invalid("mismatched weekday",`you can't specify both a weekday of ${u.weekday} and a date of ${v.toISO()}`):v}static fromISO(e,t={}){let[r,i]=nu(e);return ot(r,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){let[r,i]=ru(e);return ot(r,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){let[r,i]=iu(e);return ot(r,i,t,"HTTP",t)}static fromFormat(e,t,r={}){if(Z(e)||Z(t))throw new fe("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:s=null}=r,u=J.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,c,o,m]=Nu(u,e,t);return m?j.invalid(m):ot(a,c,r,`format ${t}`,e,o)}static fromString(e,t,r={}){return j.fromFormat(e,t,r)}static fromSQL(e,t={}){let[r,i]=fu(e);return ot(r,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new fe("need to specify a reason the DateTime is invalid");let r=e instanceof de?e:new de(e,t);if(te.throwOnInvalid)throw new un(r);return new j({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){let r=Fi(e,J.fromObject(t));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,t={}){return pi(se.parseFormat(e),J.fromObject(t)).map(i=>i.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?rn(this).weekYear:NaN}get weekNumber(){return this.isValid?rn(this).weekNumber:NaN}get weekday(){return this.isValid?rn(this).weekday:NaN}get ordinal(){return this.isValid?tn(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ke.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ke.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ke.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ke.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,t=6e4,r=Ut(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),u=this.zone.offset(r-i*t),a=this.zone.offset(r-s*t);if(u===a)return[this];let c=r-u*t,o=r-a*t,m=At(c,u),d=At(o,a);return m.hour===d.hour&&m.minute===d.minute&&m.second===d.second&&m.millisecond===d.millisecond?[je(this,{ts:c}),je(this,{ts:o})]:[this]}get isInLeapYear(){return gt(this.year)}get daysInMonth(){return Wt(this.year,this.month)}get daysInYear(){return this.isValid?dt(this.year):NaN}get weeksInWeekYear(){return this.isValid?jt(this.weekYear):NaN}resolvedLocaleOptions(e={}){let{locale:t,numberingSystem:r,calendar:i}=se.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(ae.instance(e),t)}toLocal(){return this.setZone(te.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if(e=Le(e,te.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||r){let s=e.offset(this.ts),u=this.toObject();[i]=It(u,s,e)}return je(this,{ts:i,zone:e})}else return j.invalid(Bt(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){let i=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r});return je(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let t=Ht(e,br),r=!Z(t.weekYear)||!Z(t.weekNumber)||!Z(t.weekday),i=!Z(t.ordinal),s=!Z(t.year),u=!Z(t.month)||!Z(t.day),a=s||u,c=t.weekYear||t.weekNumber;if((a||i)&&c)throw new He("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&i)throw new He("Can't mix ordinal dates with month/day");let o;r?o=yr({...Fn(this.c),...t}):Z(t.ordinal)?(o={...this.toObject(),...t},Z(t.day)&&(o.day=Math.min(Wt(o.year,o.month),o.day))):o=Fr({...tn(this.c),...t});let[m,d]=It(o,this.o,this.zone);return je(this,{ts:m,o:d})}plus(e){if(!this.isValid)return this;let t=_.fromDurationLike(e);return je(this,Er(this,t))}minus(e){if(!this.isValid)return this;let t=_.fromDurationLike(e).negate();return je(this,Er(this,t))}startOf(e){if(!this.isValid)return this;let t={},r=_.normalizeUnit(e);switch(r){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0;break}if(r==="weeks"&&(t.weekday=1),r==="quarters"){let i=Math.ceil(this.month/3);t.month=(i-1)*3+1}return this.set(t)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,t={}){return this.isValid?se.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):nn}toLocaleString(e=_t,t={}){return this.isValid?se.create(this.loc.clone(t),e).formatDateTime(this):nn}toLocaleParts(e={}){return this.isValid?se.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;let u=e==="extended",a=sn(this,u);return a+="T",a+=wr(this,u,t,r,i,s),a}toISODate({format:e="extended"}={}){return this.isValid?sn(this,e==="extended"):null}toISOWeekDate(){return Nt(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:u="extended"}={}){return this.isValid?(i?"T":"")+wr(this,u==="extended",t,e,r,s):null}toRFC2822(){return Nt(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Nt(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?sn(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(r&&(i+=" "),t?i+="z":e&&(i+="ZZ")),Nt(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():nn}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return _.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=Ds(t).map(_.normalizeUnit),u=e.valueOf()>this.valueOf(),a=u?this:e,c=u?e:this,o=Fu(a,c,s,i);return u?o.negate():o}diffNow(e="milliseconds",t={}){return this.diff(j.now(),e,t)}until(e){return this.isValid?X.fromDateTimes(this,e):this}hasSame(e,t){if(!this.isValid)return!1;let r=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(t)<=r&&r<=i.endOf(t)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let t=e.base||j.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),vr(t,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?vr(e.base||j.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(j.isDateTime))throw new fe("min requires all arguments be DateTimes");return lr(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(j.isDateTime))throw new fe("max requires all arguments be DateTimes");return lr(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){let{locale:i=null,numberingSystem:s=null}=r,u=J.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return yi(u,e,t)}static fromStringExplain(e,t,r={}){return j.fromFormatExplain(e,t,r)}static get DATE_SHORT(){return _t}static get DATE_MED(){return Br}static get DATE_MED_WITH_WEEKDAY(){return Ki}static get DATE_FULL(){return Ar}static get DATE_HUGE(){return Nr}static get TIME_SIMPLE(){return Lr}static get TIME_WITH_SECONDS(){return Ir}static get TIME_WITH_SHORT_OFFSET(){return Vr}static get TIME_WITH_LONG_OFFSET(){return _r}static get TIME_24_SIMPLE(){return Wr}static get TIME_24_WITH_SECONDS(){return jr}static get TIME_24_WITH_SHORT_OFFSET(){return Hr}static get TIME_24_WITH_LONG_OFFSET(){return Pr}static get DATETIME_SHORT(){return $r}static get DATETIME_SHORT_WITH_SECONDS(){return Rr}static get DATETIME_MED(){return zr}static get DATETIME_MED_WITH_SECONDS(){return Ur}static get DATETIME_MED_WITH_WEEKDAY(){return Qi}static get DATETIME_FULL(){return qr}static get DATETIME_FULL_WITH_SECONDS(){return Zr}static get DATETIME_HUGE(){return Yr}static get DATETIME_HUGE_WITH_SECONDS(){return Gr}};function ct(n){if(j.isDateTime(n))return n;if(n&&n.valueOf&&$e(n.valueOf()))return j.fromJSDate(n);if(n&&typeof n=="object")return j.fromObject(n);throw new fe(`Unknown datetime argument: ${n}, of type ${typeof n}`)}var Sn={renderNullAs:"\\-",taskCompletionTracking:!1,taskCompletionUseEmojiShorthand:!1,taskCompletionText:"completion",taskCompletionDateFormat:"yyyy-MM-dd",recursiveSubTaskCompletion:!1,warnOnEmptyResult:!0,refreshEnabled:!0,refreshInterval:2500,defaultDateFormat:"MMMM dd, yyyy",defaultDateTimeFormat:"h:mm a - MMMM dd, yyyy",maxRecursiveRenderDepth:4,tableIdColumnName:"File",tableGroupColumnName:"Group",showResultCount:!0},Hu={allowHtml:!0};({...Sn,...Hu});var mt=class{constructor(e){this.value=e,this.successful=!0}map(e){return new mt(e(this.value))}flatMap(e){return e(this.value)}mapErr(e){return this}bimap(e,t){return this.map(e)}orElse(e){return this.value}cast(){return this}orElseThrow(e){return this.value}},pt=class{constructor(e){this.error=e,this.successful=!1}map(e){return this}flatMap(e){return this}mapErr(e){return new pt(e(this.error))}bimap(e,t){return this.mapErr(t)}orElse(e){return e}cast(){return this}orElseThrow(e){throw e?new Error(e(this.error)):new Error(""+this.error)}},Pt;(function(n){function e(s){return new mt(s)}n.success=e;function t(s){return new pt(s)}n.failure=t;function r(s,u,a){return s.successful?u.successful?a(s.value,u.value):t(u.error):t(s.error)}n.flatMap2=r;function i(s,u,a){return r(s,u,(c,o)=>e(a(c,o)))}n.map2=i})(Pt||(Pt={}));var Pu=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},$t={exports:{}};$t.exports;(function(n,e){(function(t,r){n.exports=r()})(typeof self!="undefined"?self:Pu,function(){return function(t){var r={};function i(s){if(r[s])return r[s].exports;var u=r[s]={i:s,l:!1,exports:{}};return t[s].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=t,i.c=r,i.d=function(s,u,a){i.o(s,u)||Object.defineProperty(s,u,{configurable:!1,enumerable:!0,get:a})},i.r=function(s){Object.defineProperty(s,"__esModule",{value:!0})},i.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(u,"a",u),u},i.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},i.p="",i(i.s=0)}([function(t,r,i){function s(l){if(!(this instanceof s))return new s(l);this._=l}var u=s.prototype;function a(l,h){for(var p=0;p<l;p++)h(p)}function c(l,h,p){return function(C,S){a(S.length,function(N){C(S[N],N,S)})}(function(C,S,N){h=l(h,C,S,N)},p),h}function o(l,h){return c(function(p,C,S,N){return p.concat([l(C,S,N)])},[],h)}function m(l,h){var p={v:0,buf:h};return a(l,function(){var C;p={v:p.v<<1|(C=p.buf,C[0]>>7),buf:function(S){var N=c(function(L,z,K,oe){return L.concat(K===oe.length-1?Buffer.from([z,0]).readUInt16BE(0):oe.readUInt16BE(K))},[],S);return Buffer.from(o(function(L){return(L<<1&65535)>>8},N))}(p.buf)}}),p}function d(){return typeof Buffer!="undefined"}function w(){if(!d())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function g(l){w();var h=c(function(N,L){return N+L},0,l);if(h%8!=0)throw new Error("The bits ["+l.join(", ")+"] add up to "+h+" which is not an even number of bytes; the total should be divisible by 8");var p,C=h/8,S=(p=function(N){return N>48},c(function(N,L){return N||(p(L)?L:N)},null,l));if(S)throw new Error(S+" bit range requested exceeds 48 bit (6 byte) Number max.");return new s(function(N,L){var z=C+L;return z>N.length?k(L,C.toString()+" bytes"):v(z,c(function(K,oe){var ue=m(oe,K.buf);return{coll:K.coll.concat(ue.v),buf:ue.buf}},{coll:[],buf:N.slice(L,z)},l).coll)})}function b(l,h){return new s(function(p,C){return w(),C+h>p.length?k(C,h+" bytes for "+l):v(C+h,p.slice(C,C+h))})}function E(l,h){if(typeof(p=h)!="number"||Math.floor(p)!==p||h<0||h>6)throw new Error(l+" requires integer length in range [0, 6].");var p}function F(l){return E("uintBE",l),b("uintBE("+l+")",l).map(function(h){return h.readUIntBE(0,l)})}function T(l){return E("uintLE",l),b("uintLE("+l+")",l).map(function(h){return h.readUIntLE(0,l)})}function M(l){return E("intBE",l),b("intBE("+l+")",l).map(function(h){return h.readIntBE(0,l)})}function A(l){return E("intLE",l),b("intLE("+l+")",l).map(function(h){return h.readIntLE(0,l)})}function D(l){return l instanceof s}function B(l){return{}.toString.call(l)==="[object Array]"}function V(l){return d()&&Buffer.isBuffer(l)}function v(l,h){return{status:!0,index:l,value:h,furthest:-1,expected:[]}}function k(l,h){return B(h)||(h=[h]),{status:!1,index:-1,value:null,furthest:l,expected:h}}function y(l,h){if(!h||l.furthest>h.furthest)return l;var p=l.furthest===h.furthest?function(C,S){if(function(){if(s._supportsSet!==void 0)return s._supportsSet;var Oe=typeof Set!="undefined";return s._supportsSet=Oe,Oe}()&&Array.from){for(var N=new Set(C),L=0;L<S.length;L++)N.add(S[L]);var z=Array.from(N);return z.sort(),z}for(var K={},oe=0;oe<C.length;oe++)K[C[oe]]=!0;for(var ue=0;ue<S.length;ue++)K[S[ue]]=!0;var Me=[];for(var he in K)({}).hasOwnProperty.call(K,he)&&Me.push(he);return Me.sort(),Me}(l.expected,h.expected):h.expected;return{status:l.status,index:l.index,value:l.value,furthest:h.furthest,expected:p}}var x={};function P(l,h){if(V(l))return{offset:h,line:-1,column:-1};l in x||(x[l]={});for(var p=x[l],C=0,S=0,N=0,L=h;L>=0;){if(L in p){C=p[L].line,N===0&&(N=p[L].lineStart);break}(l.charAt(L)===`
`||l.charAt(L)==="\r"&&l.charAt(L+1)!==`
`)&&(S++,N===0&&(N=L+1)),L--}var z=C+S,K=h-N;return p[h]={line:z,lineStart:N},{offset:h,line:z+1,column:K+1}}function O(l){if(!D(l))throw new Error("not a parser: "+l)}function H(l,h){return typeof l=="string"?l.charAt(h):l[h]}function U(l){if(typeof l!="number")throw new Error("not a number: "+l)}function q(l){if(typeof l!="function")throw new Error("not a function: "+l)}function W(l){if(typeof l!="string")throw new Error("not a string: "+l)}var R=2,Y=3,Q=8,le=5*Q,me=4*Q,ut="  ";function ce(l,h){return new Array(h+1).join(l)}function Ce(l,h,p){var C=h-l.length;return C<=0?l:ce(p,C)+l}function Rn(l,h,p,C){return{from:l-h>0?l-h:0,to:l+p>C?C:l+p}}function Bi(l,h){var p,C,S,N,L,z=h.index,K=z.offset,oe=1;if(K===l.length)return"Got the end of the input";if(V(l)){var ue=K-K%Q,Me=K-ue,he=Rn(ue,le,me+Q,l.length),Oe=o(function(re){return o(function(Ue){return Ce(Ue.toString(16),2,"0")},re)},function(re,Ue){var qe=re.length,_e=[],Ze=0;if(qe<=Ue)return[re.slice()];for(var Ye=0;Ye<qe;Ye++)_e[Ze]||_e.push([]),_e[Ze].push(re[Ye]),(Ye+1)%Ue==0&&Ze++;return _e}(l.slice(he.from,he.to).toJSON().data,Q));N=function(re){return re.from===0&&re.to===1?{from:re.from,to:re.to}:{from:re.from/Q,to:Math.floor(re.to/Q)}}(he),C=ue/Q,p=3*Me,Me>=4&&(p+=1),oe=2,S=o(function(re){return re.length<=4?re.join(" "):re.slice(0,4).join(" ")+"  "+re.slice(4).join(" ")},Oe),(L=(8*(N.to>0?N.to-1:N.to)).toString(16).length)<2&&(L=2)}else{var ze=l.split(/\r\n|[\n\r\u2028\u2029]/);p=z.column-1,C=z.line-1,N=Rn(C,R,Y,ze.length),S=ze.slice(N.from,N.to),L=N.to.toString().length}var Pi=C-N.from;return V(l)&&(L=(8*(N.to>0?N.to-1:N.to)).toString(16).length)<2&&(L=2),c(function(re,Ue,qe){var _e,Ze=qe===Pi,Ye=Ze?"> ":ut;return _e=V(l)?Ce((8*(N.from+qe)).toString(16),L,"0"):Ce((N.from+qe+1).toString(),L," "),[].concat(re,[Ye+_e+" | "+Ue],Ze?[ut+ce(" ",L)+" | "+Ce("",p," ")+ce("^",oe)]:[])},[],S).join(`
`)}function zn(l,h){return[`
`,"-- PARSING FAILED "+ce("-",50),`

`,Bi(l,h),`

`,(p=h.expected,p.length===1?`Expected:

`+p[0]:`Expected one of the following: 

`+p.join(", ")),`
`].join("");var p}function Un(l){return l.flags!==void 0?l.flags:[l.global?"g":"",l.ignoreCase?"i":"",l.multiline?"m":"",l.unicode?"u":"",l.sticky?"y":""].join("")}function bt(){for(var l=[].slice.call(arguments),h=l.length,p=0;p<h;p+=1)O(l[p]);return s(function(C,S){for(var N,L=new Array(h),z=0;z<h;z+=1){if(!(N=y(l[z]._(C,S),N)).status)return N;L[z]=N.value,S=N.index}return y(v(S,L),N)})}function Ie(){var l=[].slice.call(arguments);if(l.length===0)throw new Error("seqMap needs at least one argument");var h=l.pop();return q(h),bt.apply(null,l).map(function(p){return h.apply(null,p)})}function Ct(){var l=[].slice.call(arguments),h=l.length;if(h===0)return vt("zero alternates");for(var p=0;p<h;p+=1)O(l[p]);return s(function(C,S){for(var N,L=0;L<l.length;L+=1)if((N=y(l[L]._(C,S),N)).status)return N;return N})}function qn(l,h){return Gt(l,h).or(Ve([]))}function Gt(l,h){return O(l),O(h),Ie(l,h.then(l).many(),function(p,C){return[p].concat(C)})}function at(l){W(l);var h="'"+l+"'";return s(function(p,C){var S=C+l.length,N=p.slice(C,S);return N===l?v(S,N):k(C,h)})}function xe(l,h){(function(S){if(!(S instanceof RegExp))throw new Error("not a regexp: "+S);for(var N=Un(S),L=0;L<N.length;L++){var z=N.charAt(L);if(z!=="i"&&z!=="m"&&z!=="u"&&z!=="s")throw new Error('unsupported regexp flag "'+z+'": '+S)}})(l),arguments.length>=2?U(h):h=0;var p=function(S){return RegExp("^(?:"+S.source+")",Un(S))}(l),C=""+l;return s(function(S,N){var L=p.exec(S.slice(N));if(L){if(0<=h&&h<=L.length){var z=L[0],K=L[h];return v(N+z.length,K)}return k(N,"valid match group (0 to "+L.length+") in "+C)}return k(N,C)})}function Ve(l){return s(function(h,p){return v(p,l)})}function vt(l){return s(function(h,p){return k(p,l)})}function kt(l){if(D(l))return s(function(h,p){var C=l._(h,p);return C.index=p,C.value="",C});if(typeof l=="string")return kt(at(l));if(l instanceof RegExp)return kt(xe(l));throw new Error("not a string, regexp, or parser: "+l)}function Zn(l){return O(l),s(function(h,p){var C=l._(h,p),S=h.slice(p,C.index);return C.status?k(p,'not "'+S+'"'):v(p,null)})}function Tt(l){return q(l),s(function(h,p){var C=H(h,p);return p<h.length&&l(C)?v(p+1,C):k(p,"a character/byte matching "+l)})}function Yn(l,h){arguments.length<2&&(h=l,l=void 0);var p=s(function(C,S){return p._=h()._,p._(C,S)});return l?p.desc(l):p}function Jt(){return vt("fantasy-land/empty")}u.parse=function(l){if(typeof l!="string"&&!V(l))throw new Error(".parse must be called with a string or Buffer as its argument");var h,p=this.skip(Kt)._(l,0);return h=p.status?{status:!0,value:p.value}:{status:!1,index:P(l,p.furthest),expected:p.expected},delete x[l],h},u.tryParse=function(l){var h=this.parse(l);if(h.status)return h.value;var p=zn(l,h),C=new Error(p);throw C.type="ParsimmonError",C.result=h,C},u.assert=function(l,h){return this.chain(function(p){return l(p)?Ve(p):vt(h)})},u.or=function(l){return Ct(this,l)},u.trim=function(l){return this.wrap(l,l)},u.wrap=function(l,h){return Ie(l,this,h,function(p,C){return C})},u.thru=function(l){return l(this)},u.then=function(l){return O(l),bt(this,l).map(function(h){return h[1]})},u.many=function(){var l=this;return s(function(h,p){for(var C=[],S=void 0;;){if(!(S=y(l._(h,p),S)).status)return y(v(p,C),S);if(p===S.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");p=S.index,C.push(S.value)}})},u.tieWith=function(l){return W(l),this.map(function(h){if(function(S){if(!B(S))throw new Error("not an array: "+S)}(h),h.length){W(h[0]);for(var p=h[0],C=1;C<h.length;C++)W(h[C]),p+=l+h[C];return p}return""})},u.tie=function(){return this.tieWith("")},u.times=function(l,h){var p=this;return arguments.length<2&&(h=l),U(l),U(h),s(function(C,S){for(var N=[],L=void 0,z=void 0,K=0;K<l;K+=1){if(z=y(L=p._(C,S),z),!L.status)return z;S=L.index,N.push(L.value)}for(;K<h&&(z=y(L=p._(C,S),z),L.status);K+=1)S=L.index,N.push(L.value);return y(v(S,N),z)})},u.result=function(l){return this.map(function(){return l})},u.atMost=function(l){return this.times(0,l)},u.atLeast=function(l){return Ie(this.times(l),this.many(),function(h,p){return h.concat(p)})},u.map=function(l){q(l);var h=this;return s(function(p,C){var S=h._(p,C);return S.status?y(v(S.index,l(S.value)),S):S})},u.contramap=function(l){q(l);var h=this;return s(function(p,C){var S=h.parse(l(p.slice(C)));return S.status?v(C+p.length,S.value):S})},u.promap=function(l,h){return q(l),q(h),this.contramap(l).map(h)},u.skip=function(l){return bt(this,l).map(function(h){return h[0]})},u.mark=function(){return Ie(lt,this,lt,function(l,h,p){return{start:l,value:h,end:p}})},u.node=function(l){return Ie(lt,this,lt,function(h,p,C){return{name:l,value:p,start:h,end:C}})},u.sepBy=function(l){return qn(this,l)},u.sepBy1=function(l){return Gt(this,l)},u.lookahead=function(l){return this.skip(kt(l))},u.notFollowedBy=function(l){return this.skip(Zn(l))},u.desc=function(l){B(l)||(l=[l]);var h=this;return s(function(p,C){var S=h._(p,C);return S.status||(S.expected=l),S})},u.fallback=function(l){return this.or(Ve(l))},u.ap=function(l){return Ie(l,this,function(h,p){return h(p)})},u.chain=function(l){var h=this;return s(function(p,C){var S=h._(p,C);return S.status?y(l(S.value)._(p,S.index),S):S})},u.concat=u.or,u.empty=Jt,u.of=Ve,u["fantasy-land/ap"]=u.ap,u["fantasy-land/chain"]=u.chain,u["fantasy-land/concat"]=u.concat,u["fantasy-land/empty"]=u.empty,u["fantasy-land/of"]=u.of,u["fantasy-land/map"]=u.map;var lt=s(function(l,h){return v(h,P(l,h))}),Ai=s(function(l,h){return h>=l.length?k(h,"any character/byte"):v(h+1,H(l,h))}),Ni=s(function(l,h){return v(l.length,l.slice(h))}),Kt=s(function(l,h){return h<l.length?k(h,"EOF"):v(h,null)}),Li=xe(/[0-9]/).desc("a digit"),Ii=xe(/[0-9]*/).desc("optional digits"),Vi=xe(/[a-z]/i).desc("a letter"),_i=xe(/[a-z]*/i).desc("optional letters"),Wi=xe(/\s*/).desc("optional whitespace"),ji=xe(/\s+/).desc("whitespace"),Gn=at("\r"),Jn=at(`
`),Kn=at(`\r
`),Qn=Ct(Kn,Jn,Gn).desc("newline"),Hi=Ct(Qn,Kt);s.all=Ni,s.alt=Ct,s.any=Ai,s.cr=Gn,s.createLanguage=function(l){var h={};for(var p in l)({}).hasOwnProperty.call(l,p)&&function(C){h[C]=Yn(function(){return l[C](h)})}(p);return h},s.crlf=Kn,s.custom=function(l){return s(l(v,k))},s.digit=Li,s.digits=Ii,s.empty=Jt,s.end=Hi,s.eof=Kt,s.fail=vt,s.formatError=zn,s.index=lt,s.isParser=D,s.lazy=Yn,s.letter=Vi,s.letters=_i,s.lf=Jn,s.lookahead=kt,s.makeFailure=k,s.makeSuccess=v,s.newline=Qn,s.noneOf=function(l){return Tt(function(h){return l.indexOf(h)<0}).desc("none of '"+l+"'")},s.notFollowedBy=Zn,s.of=Ve,s.oneOf=function(l){for(var h=l.split(""),p=0;p<h.length;p++)h[p]="'"+h[p]+"'";return Tt(function(C){return l.indexOf(C)>=0}).desc(h)},s.optWhitespace=Wi,s.Parser=s,s.range=function(l,h){return Tt(function(p){return l<=p&&p<=h}).desc(l+"-"+h)},s.regex=xe,s.regexp=xe,s.sepBy=qn,s.sepBy1=Gt,s.seq=bt,s.seqMap=Ie,s.seqObj=function(){for(var l,h={},p=0,C=(l=arguments,Array.prototype.slice.call(l)),S=C.length,N=0;N<S;N+=1){var L=C[N];if(!D(L)){if(B(L)&&L.length===2&&typeof L[0]=="string"&&D(L[1])){var z=L[0];if(Object.prototype.hasOwnProperty.call(h,z))throw new Error("seqObj: duplicate key "+z);h[z]=!0,p++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(p===0)throw new Error("seqObj expects at least one named parser, found zero");return s(function(K,oe){for(var ue,Me={},he=0;he<S;he+=1){var Oe,ze;if(B(C[he])?(Oe=C[he][0],ze=C[he][1]):(Oe=null,ze=C[he]),!(ue=y(ze._(K,oe),ue)).status)return ue;Oe&&(Me[Oe]=ue.value),oe=ue.index}return y(v(oe,Me),ue)})},s.string=at,s.succeed=Ve,s.takeWhile=function(l){return q(l),s(function(h,p){for(var C=p;C<h.length&&l(H(h,C));)C++;return v(C,h.slice(p,C))})},s.test=Tt,s.whitespace=ji,s["fantasy-land/empty"]=Jt,s["fantasy-land/of"]=Ve,s.Binary={bitSeq:g,bitSeqObj:function(l){w();var h={},p=0,C=o(function(N){if(B(N)){var L=N;if(L.length!==2)throw new Error("["+L.join(", ")+"] should be length 2, got length "+L.length);if(W(L[0]),U(L[1]),Object.prototype.hasOwnProperty.call(h,L[0]))throw new Error("duplicate key in bitSeqObj: "+L[0]);return h[L[0]]=!0,p++,L}return U(N),[null,N]},l);if(p<1)throw new Error("bitSeqObj expects at least one named pair, got ["+l.join(", ")+"]");var S=o(function(N){return N[0]},C);return g(o(function(N){return N[1]},C)).map(function(N){return c(function(L,z){return z[0]!==null&&(L[z[0]]=z[1]),L},{},o(function(L,z){return[L,N[z]]},S))})},byte:function(l){if(w(),U(l),l>255)throw new Error("Value specified to byte constructor ("+l+"=0x"+l.toString(16)+") is larger in value than a single byte.");var h=(l>15?"0x":"0x0")+l.toString(16);return s(function(p,C){var S=H(p,C);return S===l?v(C+1,S):k(C,h)})},buffer:function(l){return b("buffer",l).map(function(h){return Buffer.from(h)})},encodedString:function(l,h){return b("string",h).map(function(p){return p.toString(l)})},uintBE:F,uint8BE:F(1),uint16BE:F(2),uint32BE:F(4),uintLE:T,uint8LE:T(1),uint16LE:T(2),uint32LE:T(4),intBE:M,int8BE:M(1),int16BE:M(2),int32BE:M(4),intLE:A,int8LE:A(1),int16LE:A(2),int32LE:A(4),floatBE:b("floatBE",4).map(function(l){return l.readFloatBE(0)}),floatLE:b("floatLE",4).map(function(l){return l.readFloatLE(0)}),doubleBE:b("doubleBE",8).map(function(l){return l.readDoubleBE(0)}),doubleLE:b("doubleLE",8).map(function(l){return l.readDoubleLE(0)})},t.exports=s}])})})($t,$t.exports);var f=$t.exports,Bn=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function Oi(n){return n==null?n:n.shiftToAll().normalize()}function Tr(n){return n.includes("/")&&(n=n.substring(n.lastIndexOf("/")+1)),n.endsWith(".md")&&(n=n.substring(0,n.length-3)),n}f.alt(f.regex(new RegExp(Bn(),"")),f.regex(/[0-9\p{Letter}_-]+/u).map(n=>n.toLocaleLowerCase()),f.whitespace.map(n=>"-"),f.any.map(n=>"")).many().map(n=>n.join(""));var $u=f.alt(f.regex(new RegExp(Bn(),"")),f.regex(/[0-9\p{Letter}_-]+/u),f.whitespace.map(n=>" "),f.any.map(n=>" ")).many().map(n=>n.join("").split(/\s+/).join(" ").trim());function Ru(n){return $u.tryParse(n)}function zu(n){return n=Oi(n),n=_.fromObject(Object.fromEntries(Object.entries(n.toObject()).filter(([,e])=>e!=0))),n.toHuman()}var yt;(function(n){function e(D,B=Sn,V=!1){let v=t(D);if(!v)return B.renderNullAs;switch(v.type){case"null":return B.renderNullAs;case"string":return v.value;case"number":case"boolean":return""+v.value;case"html":return v.value.outerHTML;case"widget":return v.value.markdown();case"link":return v.value.markdown();case"function":return"<function>";case"array":let k="";return V&&(k+="["),k+=v.value.map(y=>e(y,B,!0)).join(", "),V&&(k+="]"),k;case"object":return"{ "+Object.entries(v.value).map(y=>y[0]+": "+e(y[1],B,!0)).join(", ")+" }";case"date":return v.value.second==0&&v.value.hour==0&&v.value.minute==0?v.value.toFormat(B.defaultDateFormat):v.value.toFormat(B.defaultDateTimeFormat);case"duration":return zu(v.value)}}n.toString=e;function t(D){return w(D)?{type:"null",value:D}:o(D)?{type:"number",value:D}:c(D)?{type:"string",value:D}:b(D)?{type:"boolean",value:D}:d(D)?{type:"duration",value:D}:m(D)?{type:"date",value:D}:F(D)?{type:"widget",value:D}:g(D)?{type:"array",value:D}:E(D)?{type:"link",value:D}:A(D)?{type:"function",value:D}:T(D)?{type:"html",value:D}:M(D)?{type:"object",value:D}:void 0}n.wrapValue=t;function r(D,B){if(M(D)){let V={};for(let[v,k]of Object.entries(D))V[v]=r(k,B);return V}else if(g(D)){let V=[];for(let v of D)V.push(r(v,B));return V}else return B(D)}n.mapLeaves=r;function i(D,B,V){var v,k;if(D===void 0&&(D=null),B===void 0&&(B=null),D===null&&B===null)return 0;if(D===null)return-1;if(B===null)return 1;let y=t(D),x=t(B);if(y===void 0&&x===void 0)return 0;if(y===void 0)return-1;if(x===void 0)return 1;if(y.type!=x.type)return y.type.localeCompare(x.type);if(y.value===x.value)return 0;switch(y.type){case"string":return y.value.localeCompare(x.value);case"number":return y.value<x.value?-1:y.value==x.value?0:1;case"null":return 0;case"boolean":return y.value==x.value?0:y.value?1:-1;case"link":let P=y.value,O=x.value,H=V!=null?V:ce=>ce,U=H(P.path).localeCompare(H(O.path));if(U!=0)return U;let q=P.type.localeCompare(O.type);return q!=0?q:P.subpath&&!O.subpath?1:!P.subpath&&O.subpath?-1:!P.subpath&&!O.subpath?0:((v=P.subpath)!==null&&v!==void 0?v:"").localeCompare((k=O.subpath)!==null&&k!==void 0?k:"");case"date":return y.value<x.value?-1:y.value.equals(x.value)?0:1;case"duration":return y.value<x.value?-1:y.value.equals(x.value)?0:1;case"array":let W=y.value,R=x.value;for(let ce=0;ce<Math.min(W.length,R.length);ce++){let Ce=i(W[ce],R[ce]);if(Ce!=0)return Ce}return W.length-R.length;case"object":let Y=y.value,Q=x.value,le=Array.from(Object.keys(Y)),me=Array.from(Object.keys(Q));le.sort(),me.sort();let ut=i(le,me);if(ut!=0)return ut;for(let ce of le){let Ce=i(Y[ce],Q[ce]);if(Ce!=0)return Ce}return 0;case"widget":case"html":case"function":return 0}}n.compareValue=i;function s(D){var B;return(B=t(D))===null||B===void 0?void 0:B.type}n.typeOf=s;function u(D){let B=t(D);if(!B)return!1;switch(B.type){case"number":return B.value!=0;case"string":return B.value.length>0;case"boolean":return B.value;case"link":return!!B.value.path;case"date":return B.value.toMillis()!=0;case"duration":return B.value.as("seconds")!=0;case"object":return Object.keys(B.value).length>0;case"array":return B.value.length>0;case"null":return!1;case"html":case"widget":case"function":return!0}}n.isTruthy=u;function a(D){if(D==null)return D;if(n.isArray(D))return[].concat(D.map(B=>a(B)));if(n.isObject(D)){let B={};for(let[V,v]of Object.entries(D))B[V]=a(v);return B}else return D}n.deepCopy=a;function c(D){return typeof D=="string"}n.isString=c;function o(D){return typeof D=="number"}n.isNumber=o;function m(D){return D instanceof j}n.isDate=m;function d(D){return D instanceof _}n.isDuration=d;function w(D){return D==null}n.isNull=w;function g(D){return Array.isArray(D)}n.isArray=g;function b(D){return typeof D=="boolean"}n.isBoolean=b;function E(D){return D instanceof ie}n.isLink=E;function F(D){return D instanceof Ft}n.isWidget=F;function T(D){return typeof HTMLElement!="undefined"?D instanceof HTMLElement:!1}n.isHtml=T;function M(D){return typeof D=="object"&&!T(D)&&!F(D)&&!g(D)&&!d(D)&&!m(D)&&!E(D)&&D!==void 0&&!w(D)}n.isObject=M;function A(D){return typeof D=="function"}n.isFunction=A})(yt||(yt={}));var xr;(function(n){function e(i){return yt.isObject(i)&&Object.keys(i).length==2&&"key"in i&&"rows"in i}n.isElementGroup=e;function t(i){for(let s of i)if(!e(s))return!1;return!0}n.isGrouping=t;function r(i){if(t(i)){let s=0;for(let u of i)s+=r(u.rows);return s}else return i.length}n.count=r})(xr||(xr={}));var ie=class{static file(e,t=!1,r){return new ie({path:e,embed:t,display:r,subpath:void 0,type:"file"})}static infer(e,t=!1,r){if(e.includes("#^")){let i=e.split("#^");return ie.block(i[0],i[1],t,r)}else if(e.includes("#")){let i=e.split("#");return ie.header(i[0],i[1],t,r)}else return ie.file(e,t,r)}static header(e,t,r,i){return new ie({path:e,embed:r,display:i,subpath:Ru(t),type:"header"})}static block(e,t,r,i){return new ie({path:e,embed:r,display:i,subpath:t,type:"block"})}static fromObject(e){return new ie(e)}constructor(e){Object.assign(this,e)}equals(e){return e==null||e==null?!1:this.path==e.path&&this.type==e.type&&this.subpath==e.subpath}toString(){return this.markdown()}toObject(){return{path:this.path,type:this.type,subpath:this.subpath,display:this.display,embed:this.embed}}withPath(e){return new ie(Object.assign({},this,{path:e}))}withDisplay(e){return new ie(Object.assign({},this,{display:e}))}withHeader(e){return ie.header(this.path,e,this.embed,this.display)}toFile(){return ie.file(this.path,this.embed,this.display)}toEmbed(){if(this.embed)return this;{let e=new ie(this);return e.embed=!0,e}}fromEmbed(){if(this.embed){let e=new ie(this);return e.embed=!1,e}else return this}markdown(){let e=(this.embed?"!":"")+"[["+this.obsidianLink();return this.display?e+="|"+this.display:(e+="|"+Tr(this.path),(this.type=="header"||this.type=="block")&&(e+=" > "+this.subpath)),e+="]]",e}obsidianLink(){var e,t;let r=this.path.replace("|","\\|");return this.type=="header"?r+"#"+((e=this.subpath)===null||e===void 0?void 0:e.replace("|","\\|")):this.type=="block"?r+"#^"+((t=this.subpath)===null||t===void 0?void 0:t.replace("|","\\|")):r}fileName(){return Tr(this.path).replace(".md","")}},Ft=class{constructor(e){this.$widget=e}},gn=class extends Ft{constructor(e,t){super("dataview:list-pair"),this.key=e,this.value=t}markdown(){return`${yt.toString(this.key)}: ${yt.toString(this.value)}`}},En=class extends Ft{constructor(e,t){super("dataview:external-link"),this.url=e,this.display=t}markdown(){var e;return`[${(e=this.display)!==null&&e!==void 0?e:this.url}](${this.url})`}},Mr;(function(n){function e(u,a){return new gn(u,a)}n.listPair=e;function t(u,a){return new En(u,a)}n.externalLink=t;function r(u){return u.$widget==="dataview:list-pair"}n.isListPair=r;function i(u){return u.$widget==="dataview:external-link"}n.isExternalLink=i;function s(u){return r(u)||i(u)}n.isBuiltin=s})(Mr||(Mr={}));var ee;(function(n){function e(w){return{type:"variable",name:w}}n.variable=e;function t(w){return{type:"literal",value:w}}n.literal=t;function r(w,g,b){return{type:"binaryop",left:w,op:g,right:b}}n.binaryOp=r;function i(w,g){return{type:"index",object:w,index:g}}n.index=i;function s(w){let g=w.split("."),b=n.variable(g[0]);for(let E=1;E<g.length;E++)b=n.index(b,n.literal(g[E]));return b}n.indexVariable=s;function u(w,g){return{type:"lambda",arguments:w,value:g}}n.lambda=u;function a(w,g){return{type:"function",func:w,arguments:g}}n.func=a;function c(w){return{type:"list",values:w}}n.list=c;function o(w){return{type:"object",values:w}}n.object=o;function m(w){return{type:"negated",child:w}}n.negate=m;function d(w){return w=="<="||w=="<"||w==">"||w==">="||w=="!="||w=="="}n.isCompareOp=d,n.NULL=n.literal(null)})(ee||(ee={}));var ke;(function(n){function e(m){return{type:"tag",tag:m}}n.tag=e;function t(m){return{type:"csv",path:m}}n.csv=t;function r(m){return{type:"folder",folder:m}}n.folder=r;function i(m,d){return{type:"link",file:m,direction:d?"incoming":"outgoing"}}n.link=i;function s(m,d,w){return{type:"binaryop",left:m,op:d,right:w}}n.binaryOp=s;function u(m,d){return{type:"binaryop",left:m,op:"&",right:d}}n.and=u;function a(m,d){return{type:"binaryop",left:m,op:"|",right:d}}n.or=a;function c(m){return{type:"negate",child:m}}n.negate=c;function o(){return{type:"empty"}}n.empty=o})(ke||(ke={}));var Or=new RegExp(Bn(),""),wn={year:_.fromObject({years:1}),years:_.fromObject({years:1}),yr:_.fromObject({years:1}),yrs:_.fromObject({years:1}),month:_.fromObject({months:1}),months:_.fromObject({months:1}),mo:_.fromObject({months:1}),mos:_.fromObject({months:1}),week:_.fromObject({weeks:1}),weeks:_.fromObject({weeks:1}),wk:_.fromObject({weeks:1}),wks:_.fromObject({weeks:1}),w:_.fromObject({weeks:1}),day:_.fromObject({days:1}),days:_.fromObject({days:1}),d:_.fromObject({days:1}),hour:_.fromObject({hours:1}),hours:_.fromObject({hours:1}),hr:_.fromObject({hours:1}),hrs:_.fromObject({hours:1}),h:_.fromObject({hours:1}),minute:_.fromObject({minutes:1}),minutes:_.fromObject({minutes:1}),min:_.fromObject({minutes:1}),mins:_.fromObject({minutes:1}),m:_.fromObject({minutes:1}),second:_.fromObject({seconds:1}),seconds:_.fromObject({seconds:1}),sec:_.fromObject({seconds:1}),secs:_.fromObject({seconds:1}),s:_.fromObject({seconds:1})},bn={now:()=>j.local(),today:()=>j.local().startOf("day"),yesterday:()=>j.local().startOf("day").minus(_.fromObject({days:1})),tomorrow:()=>j.local().startOf("day").plus(_.fromObject({days:1})),sow:()=>j.local().startOf("week"),"start-of-week":()=>j.local().startOf("week"),eow:()=>j.local().endOf("week"),"end-of-week":()=>j.local().endOf("week"),soy:()=>j.local().startOf("year"),"start-of-year":()=>j.local().startOf("year"),eoy:()=>j.local().endOf("year"),"end-of-year":()=>j.local().endOf("year"),som:()=>j.local().startOf("month"),"start-of-month":()=>j.local().startOf("month"),eom:()=>j.local().endOf("month"),"end-of-month":()=>j.local().endOf("month")},Cn=["FROM","WHERE","LIMIT","GROUP","FLATTEN"];function Uu(n){let e=-1;for(;(e=n.indexOf("|",e+1))>=0;)if(!(e>0&&n[e-1]=="\\"))return[n.substring(0,e).replace(/\\\|/g,"|"),n.substring(e+1)];return[n.replace(/\\\|/g,"|"),void 0]}function qu(n){let[e,t]=Uu(n);return ie.infer(e,!1,t)}function ft(n,e,t){return f.seqMap(n,f.seq(f.optWhitespace,e,f.optWhitespace,n).many(),(r,i)=>{if(i.length==0)return r;let s=t(r,i[0][1],i[0][3]);for(let u=1;u<i.length;u++)s=t(s,i[u][1],i[u][3]);return s})}function Zu(n,...e){return f.custom((t,r)=>(i,s)=>{let u=n._(i,s);if(!u.status)return u;for(let a of e){let c=a(u.value)._(i,u.index);if(!c.status)return u;u=c}return u})}var Ee=f.createLanguage({number:n=>f.regexp(/-?[0-9]+(\.[0-9]+)?/).map(e=>Number.parseFloat(e)).desc("number"),string:n=>f.string('"').then(f.alt(n.escapeCharacter,f.noneOf('"\\')).atLeast(0).map(e=>e.join(""))).skip(f.string('"')).desc("string"),escapeCharacter:n=>f.string("\\").then(f.any).map(e=>e==='"'?'"':e==="\\"?"\\":"\\"+e),bool:n=>f.regexp(/true|false|True|False/).map(e=>e.toLowerCase()=="true").desc("boolean ('true' or 'false')"),tag:n=>f.seqMap(f.string("#"),f.alt(f.regexp(/[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]/).desc("text")).many(),(e,t)=>e+t.join("")).desc("tag ('#hello/stuff')"),identifier:n=>f.seqMap(f.alt(f.regexp(/\p{Letter}/u),f.regexp(Or).desc("text")),f.alt(f.regexp(/[0-9\p{Letter}_-]/u),f.regexp(Or).desc("text")).many(),(e,t)=>e+t.join("")).desc("variable identifier"),link:n=>f.regexp(/\[\[([^\[\]]*?)\]\]/u,1).map(e=>qu(e)).desc("file link"),embedLink:n=>f.seqMap(f.string("!").atMost(1),n.link,(e,t)=>(e.length>0&&(t.embed=!0),t)).desc("file link"),binaryPlusMinus:n=>f.regexp(/\+|-/).map(e=>e).desc("'+' or '-'"),binaryMulDiv:n=>f.regexp(/\*|\/|%/).map(e=>e).desc("'*' or '/' or '%'"),binaryCompareOp:n=>f.regexp(/>=|<=|!=|>|<|=/).map(e=>e).desc("'>=' or '<=' or '!=' or '=' or '>' or '<'"),binaryBooleanOp:n=>f.regexp(/and|or|&|\|/i).map(e=>e.toLowerCase()=="and"?"&":e.toLowerCase()=="or"?"|":e).desc("'and' or 'or'"),rootDate:n=>f.seqMap(f.regexp(/\d{4}/),f.string("-"),f.regexp(/\d{2}/),(e,t,r)=>j.fromObject({year:Number.parseInt(e),month:Number.parseInt(r)})).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),dateShorthand:n=>f.alt(...Object.keys(bn).sort((e,t)=>t.length-e.length).map(f.string)),date:n=>Zu(n.rootDate,e=>f.seqMap(f.string("-"),f.regexp(/\d{2}/),(t,r)=>e.set({day:Number.parseInt(r)})),e=>f.seqMap(f.string("T"),f.regexp(/\d{2}/),(t,r)=>e.set({hour:Number.parseInt(r)})),e=>f.seqMap(f.string(":"),f.regexp(/\d{2}/),(t,r)=>e.set({minute:Number.parseInt(r)})),e=>f.seqMap(f.string(":"),f.regexp(/\d{2}/),(t,r)=>e.set({second:Number.parseInt(r)})),e=>f.alt(f.seqMap(f.string("."),f.regexp(/\d{3}/),(t,r)=>e.set({millisecond:Number.parseInt(r)})),f.succeed(e)),e=>f.alt(f.seqMap(f.string("+").or(f.string("-")),f.regexp(/\d{1,2}(:\d{2})?/),(t,r)=>e.setZone("UTC"+t+r,{keepLocalTime:!0})),f.seqMap(f.string("Z"),()=>e.setZone("utc",{keepLocalTime:!0})),f.seqMap(f.string("["),f.regexp(/[0-9A-Za-z+-\/]+/u),f.string("]"),(t,r,i)=>e.setZone(r,{keepLocalTime:!0})))).assert(e=>e.isValid,"valid date").desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),datePlus:n=>f.alt(n.dateShorthand.map(e=>bn[e]()),n.date).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS] or in shorthand"),durationType:n=>f.alt(...Object.keys(wn).sort((e,t)=>t.length-e.length).map(f.string)),duration:n=>f.seqMap(n.number,f.optWhitespace,n.durationType,(e,t,r)=>wn[r].mapUnits(i=>i*e)).sepBy1(f.string(",").trim(f.optWhitespace).or(f.optWhitespace)).map(e=>e.reduce((t,r)=>t.plus(r))).desc("duration like 4hr2min"),rawNull:n=>f.string("null"),tagSource:n=>n.tag.map(e=>ke.tag(e)),csvSource:n=>f.seqMap(f.string("csv(").skip(f.optWhitespace),n.string,f.string(")"),(e,t,r)=>ke.csv(t)),linkIncomingSource:n=>n.link.map(e=>ke.link(e.path,!0)),linkOutgoingSource:n=>f.seqMap(f.string("outgoing(").skip(f.optWhitespace),n.link,f.string(")"),(e,t,r)=>ke.link(t.path,!1)),folderSource:n=>n.string.map(e=>ke.folder(e)),parensSource:n=>f.seqMap(f.string("("),f.optWhitespace,n.source,f.optWhitespace,f.string(")"),(e,t,r,i,s)=>r),negateSource:n=>f.seqMap(f.alt(f.string("-"),f.string("!")),n.atomSource,(e,t)=>ke.negate(t)),atomSource:n=>f.alt(n.parensSource,n.negateSource,n.linkOutgoingSource,n.linkIncomingSource,n.folderSource,n.tagSource,n.csvSource),binaryOpSource:n=>ft(n.atomSource,n.binaryBooleanOp.map(e=>e),ke.binaryOp),source:n=>n.binaryOpSource,variableField:n=>n.identifier.chain(e=>Cn.includes(e.toUpperCase())?f.fail("Variable fields cannot be a keyword ("+Cn.join(" or ")+")"):f.succeed(ee.variable(e))).desc("variable"),numberField:n=>n.number.map(e=>ee.literal(e)).desc("number"),stringField:n=>n.string.map(e=>ee.literal(e)).desc("string"),boolField:n=>n.bool.map(e=>ee.literal(e)).desc("boolean"),dateField:n=>f.seqMap(f.string("date("),f.optWhitespace,n.datePlus,f.optWhitespace,f.string(")"),(e,t,r,i,s)=>ee.literal(r)).desc("date"),durationField:n=>f.seqMap(f.string("dur("),f.optWhitespace,n.duration,f.optWhitespace,f.string(")"),(e,t,r,i,s)=>ee.literal(r)).desc("duration"),nullField:n=>n.rawNull.map(e=>ee.NULL),linkField:n=>n.link.map(e=>ee.literal(e)),listField:n=>n.field.sepBy(f.string(",").trim(f.optWhitespace)).wrap(f.string("[").skip(f.optWhitespace),f.optWhitespace.then(f.string("]"))).map(e=>ee.list(e)).desc("list ('[1, 2, 3]')"),objectField:n=>f.seqMap(n.identifier.or(n.string),f.string(":").trim(f.optWhitespace),n.field,(e,t,r)=>({name:e,value:r})).sepBy(f.string(",").trim(f.optWhitespace)).wrap(f.string("{").skip(f.optWhitespace),f.optWhitespace.then(f.string("}"))).map(e=>{let t={};for(let r of e)t[r.name]=r.value;return ee.object(t)}).desc("object ('{ a: 1, b: 2 }')"),atomInlineField:n=>f.alt(n.date,n.duration.map(e=>Oi(e)),n.string,n.tag,n.embedLink,n.bool,n.number,n.rawNull),inlineFieldList:n=>n.atomInlineField.sepBy(f.string(",").trim(f.optWhitespace).lookahead(n.atomInlineField)),inlineField:n=>f.alt(f.seqMap(n.atomInlineField,f.string(",").trim(f.optWhitespace),n.inlineFieldList,(e,t,r)=>[e].concat(r)),n.atomInlineField),atomField:n=>f.alt(n.embedLink.map(e=>ee.literal(e)),n.negatedField,n.linkField,n.listField,n.objectField,n.lambdaField,n.parensField,n.boolField,n.numberField,n.stringField,n.dateField,n.durationField,n.nullField,n.variableField),indexField:n=>f.seqMap(n.atomField,f.alt(n.dotPostfix,n.indexPostfix,n.functionPostfix).many(),(e,t)=>{let r=e;for(let i of t)switch(i.type){case"dot":r=ee.index(r,ee.literal(i.field));break;case"index":r=ee.index(r,i.field);break;case"function":r=ee.func(r,i.fields);break}return r}),negatedField:n=>f.seqMap(f.string("!"),n.indexField,(e,t)=>ee.negate(t)).desc("negated field"),parensField:n=>f.seqMap(f.string("("),f.optWhitespace,n.field,f.optWhitespace,f.string(")"),(e,t,r,i,s)=>r),lambdaField:n=>f.seqMap(n.identifier.sepBy(f.string(",").trim(f.optWhitespace)).wrap(f.string("(").trim(f.optWhitespace),f.string(")").trim(f.optWhitespace)),f.string("=>").trim(f.optWhitespace),n.field,(e,t,r)=>({type:"lambda",arguments:e,value:r})),dotPostfix:n=>f.seqMap(f.string("."),n.identifier,(e,t)=>({type:"dot",field:t})),indexPostfix:n=>f.seqMap(f.string("["),f.optWhitespace,n.field,f.optWhitespace,f.string("]"),(e,t,r,i,s)=>({type:"index",field:r})),functionPostfix:n=>f.seqMap(f.string("("),f.optWhitespace,n.field.sepBy(f.string(",").trim(f.optWhitespace)),f.optWhitespace,f.string(")"),(e,t,r,i,s)=>({type:"function",fields:r})),binaryMulDivField:n=>ft(n.indexField,n.binaryMulDiv,ee.binaryOp),binaryPlusMinusField:n=>ft(n.binaryMulDivField,n.binaryPlusMinus,ee.binaryOp),binaryCompareField:n=>ft(n.binaryPlusMinusField,n.binaryCompareOp,ee.binaryOp),binaryBooleanField:n=>ft(n.binaryCompareField,n.binaryBooleanOp,ee.binaryOp),binaryOpField:n=>n.binaryBooleanField,field:n=>n.binaryOpField});function Yu(n){try{return Pt.success(Ee.field.tryParse(n))}catch(e){return Pt.failure(""+e)}}var Rt;(function(n){function e(r,i){return{name:r,field:i}}n.named=e;function t(r,i){return{field:r,direction:i}}n.sortBy=t})(Rt||(Rt={}));function Gu(n){return f.custom((e,t)=>(r,i)=>{let s=n._(r,i);return s.status?Object.assign({},s,{value:[s.value,r.substring(i,s.index)]}):s})}function Ju(n){return n.split(/[\r\n]+/).map(e=>e.trim()).join("")}function Sr(n,e){return f.eof.map(n).or(f.whitespace.then(e))}var Ku=f.createLanguage({queryType:n=>f.alt(f.regexp(/TABLE|LIST|TASK|CALENDAR/i)).map(e=>e.toLowerCase()).desc("query type ('TABLE', 'LIST', 'TASK', or 'CALENDAR')"),explicitNamedField:n=>f.seqMap(Ee.field.skip(f.whitespace),f.regexp(/AS/i).skip(f.whitespace),Ee.identifier.or(Ee.string),(e,t,r)=>Rt.named(r,e)),namedField:n=>f.alt(n.explicitNamedField,Gu(Ee.field).map(([e,t])=>Rt.named(Ju(t),e))),sortField:n=>f.seqMap(Ee.field.skip(f.optWhitespace),f.regexp(/ASCENDING|DESCENDING|ASC|DESC/i).atMost(1),(e,t)=>{let r=t.length==0?"ascending":t[0].toLowerCase();return r=="desc"&&(r="descending"),r=="asc"&&(r="ascending"),{field:e,direction:r}}),headerClause:n=>n.queryType.chain(e=>{switch(e){case"table":return Sr(()=>({type:e,fields:[],showId:!0}),f.seqMap(f.regexp(/WITHOUT\s+ID/i).skip(f.optWhitespace).atMost(1),f.sepBy(n.namedField,f.string(",").trim(f.optWhitespace)),(t,r)=>({type:e,fields:r,showId:t.length==0})));case"list":return Sr(()=>({type:e,format:void 0,showId:!0}),f.seqMap(f.regexp(/WITHOUT\s+ID/i).skip(f.optWhitespace).atMost(1),Ee.field.atMost(1),(t,r)=>({type:e,format:r.length==1?r[0]:void 0,showId:t.length==0})));case"task":return f.succeed({type:e});case"calendar":return f.whitespace.then(f.seqMap(n.namedField,t=>({type:e,showId:!0,field:t})));default:return f.fail(`Unrecognized query type '${e}'`)}}).desc("TABLE or LIST or TASK or CALENDAR"),fromClause:n=>f.seqMap(f.regexp(/FROM/i),f.whitespace,Ee.source,(e,t,r)=>r),whereClause:n=>f.seqMap(f.regexp(/WHERE/i),f.whitespace,Ee.field,(e,t,r)=>({type:"where",clause:r})).desc("WHERE <expression>"),sortByClause:n=>f.seqMap(f.regexp(/SORT/i),f.whitespace,n.sortField.sepBy1(f.string(",").trim(f.optWhitespace)),(e,t,r)=>({type:"sort",fields:r})).desc("SORT field [ASC/DESC]"),limitClause:n=>f.seqMap(f.regexp(/LIMIT/i),f.whitespace,Ee.field,(e,t,r)=>({type:"limit",amount:r})).desc("LIMIT <value>"),flattenClause:n=>f.seqMap(f.regexp(/FLATTEN/i).skip(f.whitespace),n.namedField,(e,t)=>({type:"flatten",field:t})).desc("FLATTEN <value> [AS <name>]"),groupByClause:n=>f.seqMap(f.regexp(/GROUP BY/i).skip(f.whitespace),n.namedField,(e,t)=>({type:"group",field:t})).desc("GROUP BY <value> [AS <name>]"),clause:n=>f.alt(n.fromClause,n.whereClause,n.sortByClause,n.limitClause,n.groupByClause,n.flattenClause),query:n=>f.seqMap(n.headerClause.trim(f.optWhitespace),n.fromClause.trim(f.optWhitespace).atMost(1),n.clause.trim(f.optWhitespace).many(),(e,t,r)=>({header:e,source:t.length==0?ke.folder(""):t[0],operations:r,settings:Sn}))}),Qu=n=>{var e;return n?(e=n.plugins.plugins.dataview)===null||e===void 0?void 0:e.api:window.DataviewAPI},Xu=n=>n.plugins.enabledPlugins.has("dataview");Te.DATE_SHORTHANDS=bn;Te.DURATION_TYPES=wn;Te.EXPRESSION=Ee;Te.KEYWORDS=Cn;Te.QUERY_LANGUAGE=Ku;Te.getAPI=Qu;Te.isPluginEnabled=Xu;Te.parseField=Yu});var ta={};Yi(ta,{default:()=>Yt});module.exports=Ji(ta);var $=require("obsidian"),st=Gi(Si()),ea={mySetting:"default"};window.DIViews=window.DIViews||{};var An=class extends $.SuggestModal{constructor(t,r,i,s,u,a){super(t);this.plugin=r,this.resolve=i,this.reject=s,this.values=u,this.names=a}getSuggestions(t){return this.values.filter(r=>(r.startsWith("[[")&&(r=r.replace(/(.*)(\/)([^\/]+)(\]\])(.*)/,"$3$5").replace(/(\[\[)(.*)(\]\])(.*)/,"$2$4")),r.toLowerCase().includes(t.toLowerCase())))}renderSuggestion(t,r){let i=t;if(this.names&&(i=this.names[this.values.indexOf(t)]),i.startsWith("[[")){i=i.replace(/(.*)(\/)([^\/]+)(\]\])(.*)/,"$3$5").replace(/(\[\[)(.*)(\]\])(.*)/,"$2$4").replace(/(.*\|)(.*)/,"$2");let s=r.createEl("span",{cls:"inline-icon"}),u=r.createEl("span",{text:i});(0,$.setIcon)(s,"link")}else r.createEl("div",{text:i})}onChooseSuggestion(t){this.resolve(t)}},Nn=class extends $.FuzzySuggestModal{constructor(t,r,i,s,u,a){super(t);this.plugin=r,this.resolve=i,this.reject=s,this.values=u,this.names=a}getItems(){return this.values}getItemText(t){let r=t;return this.names&&(r=this.names[this.values.indexOf(t)]),r.startsWith("[[")&&(r=r.replace(/(.*)(\/)([^\/]+)(\]\])(.*)/,"$3$5").replace(/(\[\[)(.*)(\]\])(.*)/,"$2$4")),r}renderSuggestion(t,r){let i=t.item;if(this.names&&(i=this.names[this.values.indexOf(i)]),i.startsWith("[[")){i=i.replace(/(.*)(\/)([^\/]+)(\]\])(.*)/,"$3$5").replace(/(\[\[)(.*)(\]\])(.*)/,"$2$4").replace(/(.*\|)(.*)/,"$2");let s=r.createEl("span",{cls:"inline-icon"}),u=r.createEl("span",{text:i});(0,$.setIcon)(s,"link")}else r.createEl("div",{text:i})}onChooseItem(t){this.resolve(t)}},Ln=class extends $.Modal{constructor(t,r,i,s,u,a,c){super(t);this.resolve=a,this.reject=c,this.values=i,this.names=s,this.header=r,this.existingValues=u}onOpen(){let{contentEl:t}=this;t.createEl("h1",{text:this.header});let r=this.existingValues.include;r||(r=[]);let i=this.existingValues.exclude;i||(i=[]);let s=this.existingValues.allValues;s||(s=!1),this.result={include:r,exclude:i,allValues:s},new $.Setting(t).setName("Result fits all values").addToggle(u=>{u.setValue(this.result.allValues),u.onChange(a=>{this.result.allValues=a})}),new $.Setting(t).addButton(u=>u.setButtonText("Clear all").onClick(()=>{let a=document.querySelectorAll(".select-line .filter-checkbox.is-enabled");for(let c of a)c.click()}));for(let u of this.values){let a=this.values.indexOf(u),c="select-line-"+a,o=this.names[a];new $.Setting(t).setName(o).setClass(c).setClass("select-line").addToggle(w=>{this.existingValues.include.find(g=>g==u)&&w.setValue(!0),w.onChange(g=>{r=r.filter(E=>E!=u),g&&r.push(u),this.result.include=r;let b=document.querySelector("."+c+" .filter-checkbox:nth-child(2).is-enabled");g&&b&&b.click()})}).addToggle(w=>{this.existingValues.exclude.find(g=>g==u)&&w.setValue(!0),w.onChange(g=>{i=i.filter(E=>E!=u),g&&i.push(u),this.result.exclude=i;let b=document.querySelector("."+c+" .filter-checkbox:nth-child(1).is-enabled");g&&b&&b.click()})});let m=document.querySelector("."+c+" .checkbox-container:nth-child(1)");m.classList.add("include"),m.classList.add("filter-checkbox");let d=document.querySelector("."+c+" .checkbox-container:nth-child(2)");d.classList.add("exclude"),d.classList.add("filter-checkbox")}new $.Setting(t).addButton(u=>u.setButtonText("Submit").setCta().onClick(()=>{this.resolve(this.result),this.close()}))}onClose(){let{contentEl:t}=this;t.empty(),this.result&&this.resolve(this.result),this.reject("Task not submitted")}},In=class extends $.Modal{constructor(t,r,i,s,u){super(t);this.resolve=s,this.reject=u,this.name=r,this.defaultVal=i,this.eventInput=this.eventInput.bind(this)}eventInput(t){t.key==="Enter"&&(t.preventDefault(),this.resolve(this.result),this.close())}onOpen(){let{contentEl:t}=this;t.createEl("h1",{text:this.name});let r=new $.Setting(t);r.settingEl.style.display="grid",r.addTextArea(i=>{i.setValue(this.defaultVal),this.result=this.defaultVal,i.onChange(s=>{this.result=s}),i.inputEl.style.width="100%",i.inputEl.rows=10}),new $.Setting(t).addButton(i=>i.setButtonText("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C").setCta().onClick(()=>{this.resolve(this.result),this.close()})),t.addEventListener("keydown",this.eventInput)}onClose(){let{contentEl:t}=this;t.empty(),this.contentEl.removeEventListener("keydown",this.eventInput),this.reject("Not submitted")}},Vn=class extends $.Modal{constructor(t,r,i,s,u,a,c){super(t);this.resolve=r,this.reject=i,this.name=s,this.defaultVal=c||"",this.values=u,this.names=a,this.result=this.defaultVal,this.eventInput=this.eventInput.bind(this)}eventInput(t){t.key==="Enter"&&(t.preventDefault(),this.resolve(this.result),this.close())}onOpen(){this.modalEl.style.width="400px";let{contentEl:t}=this;t.createEl("h1",{text:this.name});let r=new $.Setting(t);r.settingEl.style.display="grid",r.addDropdown(i=>{this.values.forEach(s=>{let u=s;this.names&&(u=this.names[this.values.indexOf(s)]),i.addOption(s,u)}),i.onChange(s=>{this.result=s}),i.setValue(this.defaultVal),i.selectEl.style.width="100%"}),new $.Setting(t).addButton(i=>i.setButtonText("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C").setCta().onClick(()=>{this.resolve(this.result),this.close()})),t.addEventListener("keydown",this.eventInput)}onClose(){let{contentEl:t}=this;t.empty(),this.contentEl.removeEventListener("keydown",this.eventInput),this.reject("Not submitted")}},_n=class extends $.Modal{constructor(t,r,i,s,u){super(t);this.resolve=s,this.reject=u,this.name=r,this.defaultVal=i,this.eventInput=this.eventInput.bind(this)}eventInput(t){t.key==="Enter"&&(t.preventDefault(),this.resolve(this.result),this.close())}onOpen(){let{contentEl:t}=this;t.createEl("h1",{text:this.name});let r=new $.Setting(t);r.settingEl.style.display="grid",r.addButton(i=>i.setButtonText("-").setCta().onClick(()=>{this.result=Number(this.result-1);let s=t.querySelector(".number-input-el");s.value=this.result+""})),r.addText(i=>{i.inputEl.type="number",i.inputEl.className="number-input-el",i.setValue(this.defaultVal+""),this.result=this.defaultVal,i.onChange(s=>{s&&s!=""?this.result=Number(s):this.result=null}),i.inputEl.style.width="100%"}),r.addButton(i=>i.setButtonText("+").setCta().onClick(()=>{this.result=Number(this.result)+1;let s=t.querySelector(".number-input-el");s.value=this.result+""})),new $.Setting(t).addButton(i=>i.setButtonText("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C").setCta().onClick(()=>{this.resolve(this.result),this.close()})),t.addEventListener("keydown",this.eventInput)}onClose(){let{contentEl:t}=this;t.empty(),this.contentEl.removeEventListener("keydown",this.eventInput),this.reject("Not submitted")}},Wn=class extends $.Modal{constructor(t,r,i,s,u){super(t);this.resolve=s,this.reject=u,this.name=r,this.defaultVal=i,this.eventInput=this.eventInput.bind(this)}eventInput(t){t.key==="Enter"&&(t.preventDefault(),this.resolve(this.result),this.close())}onOpen(){let{contentEl:t}=this;t.classList.add("date-input-modal"),t.createEl("h1",{text:this.name});let r=new $.Setting(t);r.settingEl.style.display="grid",r.addText(i=>{i.setValue(this.defaultVal),this.result=this.defaultVal,i.onChange(s=>{this.result=s}),i.inputEl.style.width="100%",i.inputEl.type="date"}),new $.Setting(t).addButton(i=>i.setButtonText("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C").setCta().onClick(()=>{this.resolve(this.result),this.close()})),t.addEventListener("keydown",this.eventInput)}onClose(){let{contentEl:t}=this;t.empty(),this.contentEl.removeEventListener("keydown",this.eventInput),this.reject("Not submitted")}},jn=class extends $.Modal{constructor(t,r,i,s,u){super(t);this.resolve=s,this.reject=u,this.name=r,this.defaultVal=i,this.result={start:"",end:""},this.eventInput=this.eventInput.bind(this)}eventInput(t){t.key==="Enter"&&(t.preventDefault(),this.resolve(this.result),this.close())}onOpen(){let{contentEl:t}=this;t.classList.add("date-input-modal"),t.createEl("h1",{text:this.name});let r=new $.Setting(t);r.setName("Start date"),r.addText(s=>{this.startText=s,s.setValue(this.defaultVal),this.result.start=this.defaultVal,s.onChange(u=>{this.result.start=u,this.result.start!=""?this.endText.inputEl.setAttribute("min",this.result.start):this.endText.inputEl.removeAttribute("min")}),s.inputEl.style.width="120px",s.inputEl.type="date"});let i=new $.Setting(t);i.setName("End date"),i.addText(s=>{this.endText=s,s.setValue(this.defaultVal),this.result.end=this.defaultVal,s.onChange(u=>{this.result.end=u,this.result.end!=""?this.startText.inputEl.setAttribute("max",this.result.end):this.startText.inputEl.removeAttribute("max")}),s.inputEl.style.width="120px",s.inputEl.type="date"}),new $.Setting(t).addButton(s=>s.setButtonText("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C").setCta().onClick(()=>{this.resolve(this.result),this.close()})),t.addEventListener("keydown",this.eventInput)}onClose(){let{contentEl:t}=this;t.empty(),this.contentEl.removeEventListener("keydown",this.eventInput),this.reject("Not submitted")}},Hn=class extends $.Modal{constructor(t,r,i,s,u){super(t);this.resolve=s,this.reject=u,this.name=r,this.defaultVal=i,this.eventInput=this.eventInput.bind(this)}eventInput(t){t.key==="Enter"&&(t.preventDefault(),this.resolve(this.result),this.close())}onOpen(){let{contentEl:t}=this;t.classList.add("date-input-modal"),t.createEl("h1",{text:this.name});let r=new $.Setting(t);r.settingEl.style.display="grid",r.addText(i=>{i.setValue(this.defaultVal),this.result=this.defaultVal,i.onChange(s=>{this.result=s}),i.inputEl.style.width="100%",i.inputEl.type="datetime-local"}),new $.Setting(t).addButton(i=>i.setButtonText("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C").setCta().onClick(()=>{this.resolve(this.result),this.close()})),t.addEventListener("keydown",this.eventInput)}onClose(){let{contentEl:t}=this;t.empty(),this.contentEl.removeEventListener("keydown",this.eventInput),this.reject("Not submitted")}},Pn=class extends $.Modal{constructor(t,r){super(t);this.taskList=r}async onOpen(){let{contentEl:t}=this;t.createEl("h1",{text:"Tasks"}),t.append(this.taskList),new $.Setting(t).addButton(r=>r.setButtonText("Close").setCta().onClick(()=>{this.close()}))}onClose(){let{contentEl:t}=this;t.empty()}},$n=class{constructor(e,t){this.app=e,this.plugin=t}async refreshView(){setTimeout(async()=>{this.app.workspace.trigger("dataview:refresh-views")},250)}async forceRefreshView(){st.getAPI().index.touch(),setTimeout(async()=>{this.app.workspace.trigger("dataview:refresh-views")},250)}async forceRefreshViewImmediately(){st.getAPI().index.touch(),this.app.workspace.trigger("dataview:refresh-views")}async suggester(e,t){return new Promise((i,s)=>{new An(this.app,this.plugin,i,s,e,t).open()})}async fuzzySuggester(e,t){return new Promise((i,s)=>{new Nn(this.app,this.plugin,i,s,e,t).open()})}async selectSuggester(e,t,r,i){return i||(i=""),new Promise((u,a)=>{new Vn(this.app,u,a,e,t,r,i).open()}).catch(u=>{console.log(u)})}async multiSuggestDouble(e,t,r,i){return new Promise((u,a)=>{new Ln(this.app,e,t,r,i,u,a).open()})}async textInput(e,t){return t||(t=""),new Promise((i,s)=>{new In(this.app,e,t,i,s).open()}).catch(i=>{console.log(i)})}async numberInput(e,t){return!t&&t!==0&&(t=null),new Promise((i,s)=>{new _n(this.app,e,t,i,s).open()}).catch(i=>{console.log(i)})}async dateInput(e,t){return t||(t=""),new Promise((i,s)=>{new Wn(this.app,e,t,i,s).open()}).catch(i=>{console.log(i)})}async dateTimeInput(e,t){return t||(t=""),new Promise((i,s)=>{new Hn(this.app,e,t,i,s).open()}).catch(i=>{console.log(i)})}async datePeriodInput(e,t){return new Promise((i,s)=>{new jn(this.app,e,t,i,s).open()}).catch(i=>{console.log(i)})}async dateFilterInput(e,t){t||(t="");let r=await this.suggester(["-all-","-","day","week","month","year","period"]),i=r;if(r=="day"){let s=await this.suggester(["today","tomorrow","yesterday","date"]);s=="date"?i="date:"+(await this.dateInput(e,t)||""):i="relative:"+s}else if(r=="period"){let s=await this.datePeriodInput(e,t)||"";s!=""&&(i="period:start:"+s.start+":end:"+s.end)}else if(r=="week"){let s=await this.suggester(["current week","next week","last week","select"]);if(s=="select"){let u=this.dv.date("now").weekYear,a=this.dv.date("now").weekNumber,c=u+"W"+a,o=[],m=[];for(let w=-1;w<=1;w++){let g=u+w,b=this.dv.date(g+"-01-01").weeksInWeekYear;for(let E=1;E<=b;E++){let F=E+"";F.length==1&&(F="0"+F);let T=g+"W"+F;o.push(T);let M=window.moment(T).format("D MMMM"),A=window.moment(T).day(7).format("D MMMM"),D=g+" week "+E+" ("+M+" \u2014 "+A+")";m.push(D)}}i="week:"+await this.selectSuggester("Week",o,m,c)}else i="relative:"+s}else if(r=="month"){let s=await this.suggester(["current month","next month","last month","select"]);if(s=="select"){let u=this.dv.date("now").year,a=[],c=[];for(let w=-10;w<=10;w++){let g=u+w+"";for(let b=1;b<=12;b++){let E=b+"";E.length==1&&(E="0"+E);let F=g+"-"+E;a.push(F);let T=this.dv.date(F).monthLong;T=T[0].toUpperCase()+T.slice(1)+" "+g,c.push(T)}}let o=this.dv.date("now").month+"";o.length==1&&(o="0"+o);let m=u+"-"+o;i="month:"+await this.selectSuggester("Month",a,c,m)}else i="relative:"+s}else if(r=="year"){let s=await this.suggester(["current year","next year","last year","select"]);if(s=="select"){let u=this.dv.date("now").year,a=[];for(let o=-100;o<=100;o++)a.push(u+o+"");i="year:"+await this.selectSuggester("Year",a,a,u+"")}else i="relative:"+s}return i}async taskListModal(e){let t=document.createElement("ul");if(e.file&&e.file.tasks){let r=e.file.tasks;t.className="contains-task-list has-list-bullet";for(let i of r){let s=document.createElement("li");s.classList.add("task-list-item"),s.setAttribute("data-task",i.status);let u=document.createElement("input");u.type="checkbox",u.classList.add("task-list-item-checkbox"),u.classList.add("file-task-checkbox"),u.onchange=async()=>{let a=e.file.path,c=i.line,o=this.app.vault.getAbstractFileByPath(a),d=(await this.app.vault.cachedRead(o)).split(`
`),w=d[c];u.checked?w=w.replace("- [ ]","- [x]"):w=w.replace("- [x]","- [ ]"),d[c]=w;let g=d.join(`
`);await this.app.vault.modify(o,g),await this.refreshView()},i.checked&&(s.classList.add("is-checked"),u.setAttribute("checked","checked")),s.append(u),s.append(i.text.replaceAll(`
`,"")),t.append(s)}}new Pn(this.app,t).open()}isLink(e){return!!(e&&e.path)}isUrl(e){return!!(e&&typeof e=="string"&&e.startsWith("http"))}fixList(e){return e&&!Array.isArray(e)&&(e=[e]),e}getPropType(e){let t=this.app.metadataTypeManager.properties,r;return e=e.toLowerCase(),t[e]&&t[e].type&&(r=t[e].type),e.startsWith("file.")&&(r="no filter"),e=="file.path"||e=="file.name"||e=="file.link"||e=="file.folder"||e=="file.ext"?r="text":e=="file.outlinks"||e=="file.inlinks"||e=="file.etags"||e=="file.tags"||e=="file.aliases"||e=="tags"||e=="aliases"?r="multitext":e=="file.cday"||e=="file.mday"?r="date":e=="file.ctime"||e=="file.mtime"?r="datetime":e=="file.starred"?r="checkbox":e=="taskProgress"||e=="slider"||e=="excerpt"?r="no prop":e=="has_backlinks"&&(r="checkbox"),r||(r="text"),r}getVal(e,t){let r=e[t];if(t.startsWith("file.")){let i=t.split(".");r=e;for(let s of i)r=r[s]}return t=="folder"&&(e.file?r=e.file.folder+"/":e.parent&&(r=e.parent.path)),t=="tags"&&(r=e.file.etags),r}containsPath(e,t){return!!(e&&e.path&&e.path==t)}listContainsPath(e,t){if(e&&Array.isArray(e)&&e.find(r=>r.path&&r.path==t))return!0;if(e&&Array.isArray(e)){e=e.filter(r=>r.path);for(let r of e)if(!r.path.match(".md")&&(t==r.path+".md"||t.match("/"+r.path+".md")))return!0}else return!1}getWikilinkPath(e){let{dv:t}=this,r=e.replace("[[","").replace("]]","");return t.page(r).file.path}getValues(e){let t=this.app.metadataCache.getFrontmatterPropertyValuesForKey(e);return e=="tags"&&(t=t.map(r=>r.replace("#","")),t.sort()),t=[...new Set(t)],t.unshift(""),t}getValueNames(e,t){return e.map(i=>i=="all"?"-all-":((t==i||i.startsWith("[[")&&t&&t.path==this.getWikilinkPath(i))&&(i=i+" \u2714"),i))}async changeViewButton(e,t){let{dv:r}=this,i=r.current()["view_"+t];i||(i="table");let s="table-2";i=="list"&&(s="list"),i=="cards"&&(s="layout-grid");let u=document.createElement("button"),a=document.createElement("span");a.className="change-view-button-icon",(0,$.setIcon)(a,s),u.append(a),u.className="dvit-button change-view-button",u.onclick=async()=>{await this.changeView(t)},e.append(u)}async changeView(e){let{dv:t}=this,r=this.app.vault.getAbstractFileByPath(t.current().file.path),i=t.current()["view_"+e],s=["table","cards","list"],u=await this.suggester(s);u&&u!=i&&await this.app.fileManager.processFrontMatter(r,a=>{a["view_"+e]=u}),await this.refreshView()}async sortButton(e,t,r){let{dv:i}=this,s=i.current(),u="sort_direction_"+r,a=s[u],c=this.app.vault.getAbstractFileByPath(s.file.path),o="sort_"+r,m="sort-desc";a=="desc"&&(m="sort-asc");let d=e.map(E=>E.prop);d.unshift("-");let w=e.map(E=>E.name?E.name:E.prop);w.unshift("-");let g=document.createElement("button"),b=document.createElement("span");b.className="change-view-button-icon",(0,$.setIcon)(b,m),g.append(b),g.className="dvit-button sort-button",g.onclick=async()=>{let E=await this.suggester(d,w);E=="-"?(await this.app.fileManager.processFrontMatter(c,F=>{delete F[o],delete F[u]}),await this.refreshView()):(await this.app.fileManager.processFrontMatter(c,F=>{F[o]==E?!F[u]||F[u]=="desc"?F[u]="asc":F[u]="desc":(F[o]=E,F[u]="asc")}),await this.refreshView())},t.append(g)}sortByProp(e,t,r){return t&&!t.startsWith("file.")?e=e.sort(i=>i[t],r):t&&t.startsWith("file.")&&(t=t.replace("file.",""),e=e.sort(i=>i.file[t],r)),e}async filterButtonProps(e,t,r,i){e=e.filter(s=>s.filter);for(let s of e)await this.filterButton(s,t,r,i)}async filterButton(e,t,r,i){let{dv:s}=this,{prop:u,multiSelect:a,name:c,buttonName:o}=e,m=s.current(),d="filter_"+i+"_"+u;o||(o=u,c&&(o=c)),e.ignoreFilter&&(o=m[d]);let w="dvit-button";if(m[d]&&m[d]!="all"&&m[d].length!=0&&(w="dvit-button button-selected"),d=="filter_"+i+"_file.tasks"&&m[d]&&(w="dvit-button button-selected"),e.ignoreFilter&&m[d]==e.defaultValue&&(w="dvit-button"),a){let E="filter_include_"+i+"_"+u,F="filter_exclude_"+i+"_"+u;(m[E]&&m[E].length!=0||m[F]&&m[F].length!=0)&&(w="dvit-button button-selected")}let g=document.createElement("button"),b=o;if(e.icon){let E=document.createElement("span");if(E.className="filter-button-icon",(0,$.getIcon)(e.icon)?(0,$.setIcon)(E,e.icon):E.append("NO ICON"),g.append(E),o&&o.trim()!=""){let T=document.createElement("span");T.innerHTML=o,b=T}}g.append(b),g.className=w,g.onclick=async()=>{await this.changeProp(e,t,i)},r.append(g)}async filterProps(e,t,r){let{dv:i}=this;for(let u of e)u.ignoreFilter||(t=await this.filter(u,t,r));let s=i.current()["search_"+r];if(s&&s.length>0){let u=s.split(" ");for(let a of u)a.length>0&&(t=t.filter(c=>c.file.name.toLowerCase().includes(a.toLowerCase())))}return t}async filter(e,t,r){let{dv:i,isLink:s,containsPath:u,listContainsPath:a,fixList:c,getVal:o}=this,m=i.current(),{prop:d,multiSelect:w}=e,g=this.getPropType(d),b="filter_"+r+"_"+d,E=m[b];if(g=="text"||g=="number")return E=="-"?t.filter(F=>!o(F,d)):s(E)?t.filter(F=>u(o(F,d),E.path)):E&&E!="all"?d=="file.folder"?t.filter(F=>o(F,d).startsWith(E)):t.filter(F=>o(F,d)==E):t;if(g=="multitext")if(w){let F="filter_include_"+r+"_"+d,T="filter_exclude_"+r+"_"+d,M="filter_all_values_"+r+"_"+d,A=m[F],D=m[T],B=m[M];if(A||(A=[]),D||(D=[]),B){for(let V of A)V=="-"?t=t.filter(v=>!o(v,d)||o(v,d).length==0):s(V)?t=t.filter(v=>{let k=c(o(v,d));return a(k,V.path)}):V&&(t=t.filter(v=>{let k=o(v,d);return k?k.includes(V):!1}));for(let V of D)V=="-"?t=t.filter(v=>o(v,d)&&o(v,d).length!=0):s(V)?t=t.filter(v=>{let k=c(o(v,d));return!k||!k.find(y=>y.path==V.path)}):V&&(t=t.filter(v=>{let k=o(v,d);return k?!k.includes(V):!0}))}else A.length>0&&(t=t.map(V=>{let v=o(V,d);for(let k of A){if(k=="-"&&(!v||v.length==0))return V;if(k&&k.path&&v&&v.find(y=>y.path==k.path))return V;if(k&&v&&v.includes(k))return V}return!1}),t=t.filter(V=>V)),D.length>0&&(t=t.map(V=>{let v=o(V,d);for(let k of D){if(k=="-"&&(!v||v.length==0))return V;if(k.path&&(!v||!v.find(y=>y.path==k.path)))return V;if(!v||!v.includes(k))return V}return!1}),t=t.filter(V=>V));return t}else return E=="-"?t=t.filter(F=>!o(F,d)||o(F,d).length==0):s(E)?t=t.filter(F=>{let T=c(o(F,d));return a(T,E.path)}):E&&E!="all"&&(t=t.filter(F=>{let T=o(F,d);return T?T.includes(E):!1})),t;if(g=="checkbox")return E=="-"?t.filter(F=>o(F,d)===void 0):E===!1?t.filter(F=>o(F,d)===!1||o(F,d)===null):E!="all"&&E!=null?t.filter(F=>o(F,d)==E):t;if(g=="date"){if(E=="-")return t.filter(F=>o(F,d)===void 0);if(E!="all"&&E!=null){if(E.startsWith("date:")){let F=E.replace("date:","");return F.isLuxonDateTime&&(F=F.toFormat("yyyy-MM-dd")),t.filter(T=>{let M=o(T,d);return M?M.toFormat("yyyy-MM-dd")==F:!1})}else if(E.startsWith("period:")){let F=E.match(/(period:start:)([^:]*)(:end:)(.*)/);if(F){let T=F[2],M=F[4],A=i.date(T),D=i.date(M);return t.filter(B=>{let V=o(B,d);return V?A&&D?V.ts>=A.ts&&V.ts<=D.ts:A?V.ts>=A.ts:D?V.ts<=D.ts:!0:!1})}else return t}else if(E.startsWith("year:")){let F=E.replace("year:","");return t.filter(T=>{let M=o(T,d);return M?M.toFormat("yyyy")==F:!1})}else if(E.startsWith("month:")){let F=E.replace("month:","");return t.filter(T=>{let M=o(T,d);return M?M.toFormat("yyyy-MM")==F:!1})}else if(E.startsWith("week:")){let F=E.replace("week:","");return t.filter(T=>{let M=o(T,d);if(M){let A=M.weekNumber+"";return A.length==1&&(A="0"+A),M.weekYear+"W"+A==F}else return!1})}else if(E.startsWith("relative:")){let F=E.replace("relative:",""),T=i.date("today");if(F=="today")return t.filter(M=>{let A=o(M,d);return A?A.toISODate()==T.toISODate():!1});if(F=="tomorrow")return t.filter(M=>{let A=o(M,d);return A?A.toISODate()==i.date("tomorrow").toISODate():!1});if(F=="yesterday")return t.filter(M=>{let A=o(M,d);return A?A.toISODate()==i.date("yesterday").toISODate():!1});if(F=="current week")return t.filter(M=>{let A=o(M,d);return A?A.toFormat("W")==T.toFormat("W"):!1});if(F=="next week")return t.filter(M=>{let A=o(M,d);return A?A.toFormat("W")==T.plus(i.duration("1 week")).toFormat("W"):!1});if(F=="last week")return t.filter(M=>{let A=o(M,d);return A?A.toFormat("W")==T.minus(i.duration("1 week")).toFormat("W"):!1});if(F=="current month")return t.filter(M=>{let A=o(M,d);return A?A.toFormat("yyyy-MM")==T.toFormat("yyyy-MM"):!1});if(F=="next month")return t.filter(M=>{let A=o(M,d);return A?A.toFormat("yyyy-MM")==T.plus(i.duration("1 month")).toFormat("yyyy-MM"):!1});if(F=="last month")return t.filter(M=>{let A=o(M,d);return A?A.toFormat("yyyy-MM")==T.minus(i.duration("1 month")).toFormat("yyyy-MM"):!1});if(F=="current year")return t.filter(M=>{let A=o(M,d);return A?A.toFormat("yyyy")==T.toFormat("yyyy"):!1});if(F=="next year")return t.filter(M=>{let A=o(M,d);return A?A.toFormat("yyyy")==T.plus(i.duration("1 year")).toFormat("yyyy"):!1});if(F=="last year")return t.filter(M=>{let A=o(M,d);return A?A.toFormat("yyyy")==T.minus(i.duration("1 year")).toFormat("yyyy"):!1})}}return t}return g=="datetime"?E=="-"?t.filter(F=>o(F,d)===void 0):E!="all"&&E!=null?(E.isLuxonDateTime&&(E=E.toFormat("yyyy-MM-ddTHH:mm:ss")),t.filter(F=>{let T=o(F,d);return T?T.toFormat("yyyy-MM-ddTHH:mm:ss")==E:!1})):t:t}async changeProp(e,t,r){let{dv:i}=this,s=i.current(),{prop:u,multiSelect:a,fuzzySearch:c,valueOptions:o}=e,m="pagination_"+r,d=this.getVal,w=async(b,E)=>c?await this.fuzzySuggester(b,E):await this.suggester(b,E),g=this.getPropType(u);if(g=="text"){let b=this.app.vault.getAbstractFileByPath(s.file.path),E="filter_"+r+"_"+u,F=s[E],T=t.map(D=>d(D,u));T=T.map(D=>D&&D.path?"[["+D.path.replace(".md","")+"]]":D),T=[...new Set(T)],T=T.filter(D=>D),T.sort(),o&&(T=o.filter(D=>D)),e.ignoreFilter||(e.prop!="folder"&&T.unshift("-"),T.unshift("all"));let M=T.map(D=>D=="all"?"-all-":(F&&(F==D||F.path&&"[["+F.path.replace(".md","")+"]]"==D)&&(D=D+" \u2714"),D)),A=await w(T,M);A||(A="-"),A=="all"?await this.app.fileManager.processFrontMatter(b,D=>{delete D[E],D[m]=0}):await this.app.fileManager.processFrontMatter(b,D=>{D[E]=A,D[m]=0})}else if(g=="number"){let b=this.app.vault.getAbstractFileByPath(s.file.path),E="filter_"+r+"_"+u,F=t.map(M=>d(M,u));F=[...new Set(F)],F=F.filter(M=>M).map(M=>M+""),F.sort(),o&&(F=o.filter(M=>M).map(M=>M+"")),F.unshift("-"),F.unshift("all");let T=await this.suggester(F);T||(T="-"),T=="all"?await this.app.fileManager.processFrontMatter(b,M=>{delete M[E],M[m]=0}):await this.app.fileManager.processFrontMatter(b,M=>{M[E]=T,M[m]=0})}else if(g=="date"){let b=this.app.vault.getAbstractFileByPath(s.file.path),E="filter_"+r+"_"+u,F=await this.dateFilterInput("Date","")||"";F=="all"?await this.app.fileManager.processFrontMatter(b,T=>{delete T[E],T[m]=0}):await this.app.fileManager.processFrontMatter(b,T=>{T[E]=F,T[m]=0})}else if(g=="multitext"&&!a){let b=this.app.vault.getAbstractFileByPath(s.file.path),E="filter_"+r+"_"+u,F=s[E],T=t.map(B=>{let V=d(B,u);return V||[]}),M=[];for(let B of T)if(Array.isArray(B)||(B=[B]),B)for(let V of B)M.push(V);M=M.map(B=>B&&B.path?"[["+B.path.replace(".md","")+"]]":B),M=[...new Set(M)],M=M.filter(B=>B),M.sort(),o&&(M=o.filter(B=>B).map(B=>B+"")),M.unshift("-"),M.unshift("all");let A=M.map(B=>{let V;return B=="all"?V="-all-":V=B,F&&(F==B||F.path&&"[["+F.path.replace(".md","")+"]]"==B)?V+" \u2714":V}),D=await w(M,A);D||(D="-"),D=="all"?await this.app.fileManager.processFrontMatter(b,B=>{delete B[E],B[m]=0}):await this.app.fileManager.processFrontMatter(b,B=>{B[E]=D,B[m]=0})}else if(g=="multitext"&&a){let b=this.app.vault.getAbstractFileByPath(s.file.path),E="filter_include_"+r+"_"+u,F="filter_exclude_"+r+"_"+u,T="filter_all_values_"+r+"_"+u,M=s[E],A=s[F],D=s[T];!D&&D!==!1&&(D=!1),M?M=M.map(x=>x.path?"[["+x.path.replace(".md","")+"]]":x):M=[],A?A=A.map(x=>x.path?"[["+x.path.replace(".md","")+"]]":x):A=[];let B={include:M,exclude:A,allValues:D},V=t.map(x=>{let P=d(x,u);return P||[]}),v=[];for(let x of V)if(Array.isArray(x)||(x=[x]),x)for(let P of x)v.push(P);v=v.map(x=>x.path?"[["+x.path.replace(".md","")+"]]":x),v=[...new Set(v)],v=v.filter(x=>x),v.sort(),o&&(v=o.filter(x=>x)),v.unshift("-");let k=v.map(x=>{let P;return x=="all"?P="-all-":x.startsWith("[[")?P="\u2A48 "+x.replace(/(.*)(\/)([^\/]+)(\]\])/,"$3").replace(/(\[\[)(.*)(\]\])/,"$2"):P=x,P}),y=await this.multiSuggestDouble(u,k,v,B);(!y.include||y.include.length==0)&&(!y.exclude||y.exclude.length==0)?await this.app.fileManager.processFrontMatter(b,x=>{delete x[E],delete x[F],delete x[T],x[m]=0}):await this.app.fileManager.processFrontMatter(b,x=>{x[E]=y.include,x[F]=y.exclude,x[T]=y.allValues,x[m]=0})}else if(g=="checkbox"){let b=this.app.vault.getAbstractFileByPath(s.file.path),E="filter_"+r+"_"+u,F=["all","-","false","true"];e.prop=="has_backlinks"&&(F=["all","false","true"]);let T=await w(F,F);T=="false"&&(T=!1),T=="true"&&(T=!0),this.app.fileManager.processFrontMatter(b,M=>{M[E]=T,M[m]=0})}else if(e.prop=="file.tasks"){let b="filter_"+r+"_file.tasks",E=s[b],F=this.app.vault.getAbstractFileByPath(s.file.path),T=["all","completed","not completed"],M=T.map(D=>D=="all"?"-all-":(E==D&&(D=D+" \u2714"),D)),A=await w(T,M);A=="all"?await this.app.fileManager.processFrontMatter(F,D=>{delete D[b]}):await this.app.fileManager.processFrontMatter(F,D=>{D[b]=A})}await this.refreshView()}async newEntryButton(e,t){let{noteName:r,noteTemplate:i,noteFolder:s}=e,u=o=>{let m="";o>0&&(m=" "+o);let d=r+m+".md";return s&&s!=""&&(d=s+"/"+r+m+".md"),this.app.vault.getAbstractFileByPathInsensitive(d)?u(o+1):d},a=async o=>{let m=this.app.vault.getFiles().find(E=>E.basename==i),d="";m&&(d=await this.app.vault.read(m));let w=u(0),g=await this.app.vault.create(w,d),b=this.app.workspace.getLeaf();o=="split view"?b=this.app.workspace.getLeaf("split","vertical"):o=="new tab"&&(b=this.app.workspace.getLeaf(!0)),o!="none"&&b.openFile(g),(o=="none"||o=="split view")&&await this.refreshView()},c=document.createElement("button");c.append("+"),c.className="dvit-button",c.onclick=async o=>{o.ctrlKey&&o.altKey?await a("split view"):o.ctrlKey?await a("new tab"):o.shiftKey?await a("none"):await a("same tab")},t.append(c)}async refreshButton(e){let t=document.createElement("button");t.append("\u21BA"),t.className="dvit-button",t.onclick=async()=>{await this.forceRefreshViewImmediately()},e.append(t)}async searchButton(e,t){let{dv:r}=this,i=r.current(),s=this.app.vault.getAbstractFileByPath(i.file.path),u=document.createElement("button"),a=(0,$.getIcon)("search"),c=document.createElement("span");c.classList.add("search-button-icon"),c.append(a),u.append(c),u.className="dvit-button dvit-search-button",i["show_search_"+t]&&u.classList.add("button-selected"),u.onclick=async()=>{await this.app.fileManager.processFrontMatter(s,o=>{i["show_search_"+t]&&delete o["search_"+t],o["show_search_"+t]=!o["show_search_"+t]}),await this.refreshView()},e.append(u)}async searchInput(e,t){let{dv:r}=this,i=r.current(),s=this.app.vault.getAbstractFileByPath(i.file.path),u=document.createElement("input");u.classList.add("dvit-search-input"),u.value=i["search_"+t],i["search_"+t]||(u.value=""),u.addEventListener("keydown",async a=>{a.key=="Enter"&&await this.refreshView()}),u.oninput=async a=>{await this.app.fileManager.processFrontMatter(s,c=>{c["search_"+t]=u.value})},e.append(u)}async increasePagination(e,t){let{dv:r}=this,i=r.current(),s=this.app.vault.getAbstractFileByPath(i.file.path),u=i[t];u||(u=0),e&&(u++,await this.app.fileManager.processFrontMatter(s,a=>{a[t]=Number(u)}),await this.refreshView())}async decreasePagination(e){let{dv:t}=this,r=t.current(),i=this.app.vault.getAbstractFileByPath(r.file.path),s=r[e];s||(s=0),s>0&&(s--,await this.app.fileManager.processFrontMatter(i,u=>{u[e]=Number(s)}),await this.refreshView())}async nextPageButton(e,t){let{dv:r}=this,s=r.current()[t];s||(s=0);let u="dvit-button",a=!0;s+1>=e&&(u="dvit-button button-gray",a=!1);let c=document.createElement("button");return c.append(">>"),c.className=u,c.onclick=async()=>{await this.increasePagination(a,t)},c}async prevPageButton(e){let{dv:t}=this,r=t.current(),i="dvit-button",s=r[e];s||(s=0),s<=0&&(i="dvit-button button-gray");let u=document.createElement("button");return u.append("<<"),u.className=i,u.onclick=async()=>{await this.decreasePagination(e)},u}currentPagination(e){let{dv:t}=this,r=t.current()[e];return r||(r=0),+r+1}async paginationBlock(e,t,r,i){let s="pagination_"+i,u=e.length,a=u%t,c=(u-a)/t;a!=0&&c++;let o=await this.prevPageButton(s),m=await this.nextPageButton(c,s),d=document.createElement("span");d.append(o),d.append(this.currentPagination(s)+""),d.append(m),d.append(c+""),d.style.whiteSpace="nowrap",r.append(d)}paginate(e,t,r){let{dv:i}=this,s="pagination_"+r,u=i.current()[s];return u||(u=0),e.slice(t*u,t*(+u+1))}joinTags(e){let t="";if(e==null)return"";for(let r of e)t+=r+" ";return t}spanList(e){let t="";if(e==null)return"";for(let r of e)typeof r=="string"&&!r.startsWith("<svg")?t+="<span class='dv-tag dv-tag-"+r.replaceAll(" ","-")+"'>"+r+"</span> ":t.length==0?t=t+r:t=t+", "+r;return t}spanSingle(e){return e==null?"":"<span class='dv-tag dv-tag-"+e.replaceAll(" ","-")+"'>"+e+"</span> "}taskProgress(e){let t=e.file.tasks;t=t.filter(u=>u.children.length==0);let r=t.filter(u=>u.completed==!0),i=t.length,s=r.length;return i>0?"<div class='task-progress'><progress max="+i+" value="+s+"></progress> <span>"+s+" / "+i+"</span></div>":""}renderMarkdown(e){let t=this.dv.span(e),r=t.outerHTML;return r=r.replaceAll(`
`,""),t.remove(),r}async getExcerpt(e){let t=this.dv;if(e.file.path==t.current().file.path)return"";let r=this.app.vault.getAbstractFileByPath(e.file.path),i=await this.app.vault.cachedRead(r);return i=i.replace(/^---\n.*?\n---/ms,""),i=i.replace(/(```)(dataview\n)(.*?)(\n```)/ms,"````\n```dataview```\n````"),i=i.replace(/(```)(dataviewjs\n)(.*?)(\n```)/ms,"````\n```dataviewjs```\n````"),i=i.slice(0,1e3),this.renderMarkdown(i)}async getCanvasPages(){let{dv:e}=this,t=this.app.vault.getFiles().filter(i=>i.extension=="canvas");t=[...t];let r=t.map(i=>(i.parent.path=="/"||!i.parent.path?i.folder="":i.folder=i.parent.path+"/",i.ext=i.extension,i.name=i.basename+".canvas",i.link="[["+i.folder+i.name+"|"+i.basename+"]]",{file:i,type:"canvas"}));return e.array(r)}getDisplay(e){let t=e.display;return t||(t=e.path.replace(/(.*\/)([^/]+)(\.[^\.]+)/,"$2")),t}renderTaskList(e,t){let{dv:r}=this,i=document.createElement("ul");if(e.file&&e.file.tasks){let s=e.file.tasks,u=r.current()["filter_"+t+"_file.tasks"];u=="completed"&&(s=s.filter(a=>a.status=="x")),u=="not completed"&&(s=s.filter(a=>a.status==" ")),i.className="contains-task-list has-list-bullet";for(let a of s){let c=document.createElement("li");c.classList.add("task-list-item"),c.setAttribute("data-task",a.status);let o=document.createElement("input");o.type="checkbox",o.classList.add("task-list-item-checkbox"),o.classList.add("file-task-checkbox"),o.setAttribute("data-path",e.file.path),o.setAttribute("data-task-line",a.line),a.checked&&(c.classList.add("is-checked"),o.setAttribute("checked","checked")),c.append(o),c.append(a.text.replaceAll(`
`,"")),i.append(c)}}return i}async createList(e,t,r,i,s,u){let{dv:a}=this;r=await this.filterProps(e,r,u),i&&(r=this.paginate(r,i,u));let c=r.map(d=>{let w=d.file.link;return d.title&&(w.display=d.title),w}),o=a.markdownList(c),m=a.paragraph(o);s.append(m)}async createTable(e,t,r,i,s,u,a){var D,B,V,v;let{dv:c}=this;this.props=e,t=await this.filterProps(e,t,s),r&&(t=this.paginate(t,r,s));let o=e.filter(k=>k.column);this.app.isMobile&&(o=o.filter(k=>!k.hideOnMobile));let m=o.map(k=>{var U;let y="";if(k.icon){let q=(0,$.getIcon)(k.icon);q.classList.add("header-icon"),q?y=q.outerHTML:y="NO ICON"}let x=k.prop;x=="slider"&&(x=(U=k.propVal)!=null?U:"");let P=document.createElement("div");P.classList.add("header-sorting-button"),P.setAttribute("data-prop",x),P.setAttribute("data-view-id",s);let O=document.createElement("span");k.name?O.innerHTML=k.name:O.innerHTML=k.prop;let H=O.outerHTML;return O.innerHTML.trim()==""&&(H=""),P.innerHTML=y+H,P.outerHTML}),d=await Promise.all(t.map(async k=>await Promise.all(o.map(async y=>{var q;let x=y.prop,P=this.getPropType(x),O=this.getVal(k,x);if(P=="multitext"&&y.slice&&O&&Array.isArray(O)&&(O=O.map(W=>{let R=y.slice;if(W.path){let Y=W.display;Y||(Y=W.path.replace(/(.*?)([^\/]*)(\.md)/,"$2")),W.display=Y.slice(...R)}else W=W.slice(...R);return W})),P=="multitext"&&y.replace&&O&&Array.isArray(O)&&(O=O.map(W=>{if(W.path){let R=W.display;R||(R=W.path.replace(/(.*?)([^\/]*)(\.md)/,"$2")),y.replace.forEach(Y=>{if(Y[2]=="icon"){let Q=(0,$.getIcon)(Y[1]);Q&&(Y[1]=Q.outerHTML.replace("svg-icon","svg-icon dv-tag dv-tag-"+Y[0]))}W.display=R.replace(...Y)})}else y.replace.forEach(R=>{if(R[2]=="icon"){let Y=(0,$.getIcon)(R[1]);Y&&(R[1]=Y.outerHTML.replace("svg-icon","svg-icon dv-tag dv-tag-"+R[0]))}W=W.replace(...R)});return W})),P=="text"&&y.slice&&O)if(O.path){let W=O.display;W||(W=O.path.replace(/(.*?)([^\/]*)(\.md)/,"$2")),O.display=W.slice(...y.slice)}else O=O.slice(...y.slice);if(Array.isArray(O)&&y.span&&(O=this.spanList(O)),P=="text"&&!Array.isArray(O)&&y.span&&(O=this.spanSingle(O)),y.image){let W=100;y.width&&(W=y.width),O&&O.path&&!O.path.endsWith(".md")?O=c.fileLink(O.path,!0,W):O&&!O.path&&O.startsWith("http")?O="![|"+W+"]("+O+")":O=""}if(P=="file prop"){if(O=k.file[x],O&&y.slice)if(O.path){let W=O.display;W||(W=O.path.replace(/(.*?)([^\/]*)(\.md)/,"$2")),O.display=W.slice(...y.slice)}else O=O.slice(...y.slice);if(y.prepend){let W="";if(y.prepend.type=="list"){let R=k[y.prepend.prop];for(let Y of R)y.prepend.slice&&(Y=Y.slice(...y.prepend.slice).trim()),W=W+Y}else y.prepend.type=="text"&&(W=k[y.prepend.prop],y.prepend.slice&&(W=W.slice(...y.prepend.slice).trim()));O=W+" "+O}}x=="tags"&&(O=this.joinTags(k.file.etags)),x=="taskProgress"&&(O=this.taskProgress(k)),x=="excerpt"&&(O=await this.getExcerpt(k));let H=document.createElement("div");if(H.classList.add("edit-button"),y.hideInCardsView&&H.classList.add("hide-in-cards-view"),!x.startsWith("file.")){if(y.editButton=="select"&&(P=="text"||P=="multitext")&&H.setAttribute("data-type","select"),P=="text"&&y.editButton!="select"&&H.setAttribute("data-type","text"),P=="multitext"&&y.editButton!="select"&&H.setAttribute("data-type","list"),P=="date"&&(H.setAttribute("data-type","date"),O)){let W=st.getAPI().settings.defaultDateFormat,R=localStorage.getItem("language");O=O.toFormat(W,{locale:R})}if(P=="datetime"&&(H.setAttribute("data-type","datetime"),O)){let W=st.getAPI().settings.defaultDateFormat+" HH: mm",R=localStorage.getItem("language");O=O.toFormat(W,{locale:R})}P=="number"&&H.setAttribute("data-type","number")}if((x=="file.link"||x=="file.name")&&H.setAttribute("data-type","file name"),H.setAttribute("data-path",k.file.path),H.setAttribute("data-prop",x),Array.isArray(O)){let W=document.createElement("ul");for(let R of O){let Y=document.createElement("li");Y.append(R),W.append(Y)}O=W.outerHTML}if(H.innerHTML=O,!H.innerHTML||H.innerHTML=="null"||H.innerHTML=="undefined"||H.innerHTML=="<ul></ul>"){if(H.innerHTML=x,y.name&&(H.innerHTML=y.name),y.icon){let W=document.createElement("span");W.classList.add("inline-icon"),(0,$.setIcon)(W,y.icon);let R=document.createElement("span");R.innerHTML=H.innerHTML,H.innerHTML="",H.append(W),H.append(R)}H.classList.add("edit-button-empty")}let U="";if(y.width&&(U=U+"width: "+y.width+"px; "),y.maxWidth&&(U=U+"max-width: "+y.maxWidth+"px; "),y.minWidth&&(U=U+"min-width: "+y.minWidth+"px; "),y.height&&(U=U+"height: "+y.height+"px; overflow-y: scroll; "),y.maxHeight&&(U=U+"max-height: "+y.maxHeight+"px; overflow-y: scroll; "),y.minHeight&&(U=U+"min-height: "+y.minHeight+"px; overflow-y: scroll; "),H.style.cssText=U,O=H,P=="checkbox"&&(O='<input type="checkbox" class="prop-checkbox" data-path="'+k.file.path+'" data-prop="'+x+'">'),x=="slider"){let W=y.propVal,R=(q=y.propMax)!=null?q:0;if(k[R]){let Q='<input type="range" max='+k[R]+' step="1" class="slider table-property-slider" data-path="'+k.file.path+'" data-prop="'+W+'" data-prop="'+R+'">',le=document.createElement("div");le.innerHTML=Q,O=le}else O.innerHTML="Slider",O.classList.add("edit-button-empty"),O.setAttribute("data-type","number"),O.setAttribute("data-prop",R)}if(x=="taskProgress"&&H.setAttribute("data-type","task-progress"),x=="excerpt"&&H.setAttribute("data-type","excerpt"),y.alignBottom&&O.classList.add("align-bottom"),x=="file.tasks"){let W=document.createElement("ul");if(k.file&&k.file.tasks){let R=k.file.tasks,Y=c.current()["filter_"+s+"_file.tasks"];Y=="completed"&&(R=R.filter(Q=>Q.status=="x")),Y=="not completed"&&(R=R.filter(Q=>Q.status==" ")),W.className="contains-task-list has-list-bullet";for(let Q of R){let le=document.createElement("li");le.classList.add("task-list-item"),le.setAttribute("data-task",Q.status);let me=document.createElement("input");me.type="checkbox",me.classList.add("task-list-item-checkbox"),me.classList.add("file-task-checkbox"),me.setAttribute("data-path",k.file.path),me.setAttribute("data-task-line",Q.line),Q.checked&&(le.classList.add("is-checked"),me.setAttribute("checked","checked")),le.append(me),le.append(Q.text.replaceAll(`
`,"")),W.append(le)}}O=this.renderTaskList(k,s)}return O})))),w=c.markdownTable(m,d);w=w.replaceAll("&amp;","&");let g=c.paragraph(w);i.append(g),g.classList.add("dv-table-wrapper"),u&&g.classList.add("full-width"),a||g.classList.add("table"),a&&(g.classList.add("cards"),a.position&&g.classList.add("cards-"+a.position),a.cardsWidth&&g.classList.add("cards-width-"+a.cardsWidth));let b=document.querySelectorAll(".edit-button");for(let k of b){let y=k;y.onclick=async x=>{var O,H,U;if(x.target.localName!="a"){let q=(O=y.getAttribute("data-path"))!=null?O:"",W=(H=y.getAttribute("data-prop"))!=null?H:"",R=(U=y.getAttribute("data-type"))!=null?U:"";await this.editProp(R,q,W)}}}let E=document.querySelectorAll(".table-property-slider");for(let k of E){let y=k,x=(D=y.getAttribute("data-prop"))!=null?D:"",P=(B=y.getAttribute("data-path"))!=null?B:"",H=c.page(P)[x];H||(H=0),y.value=H,this.updateSlider(y),y.oninput=async()=>{this.updateSlider(y),await this.editSlider(y)},y.ondblclick=async()=>{await this.editSliderVal(y)}}let F=document.querySelectorAll(".prop-checkbox");for(let k of F){let y=k,x=(V=y.getAttribute("data-prop"))!=null?V:"",P=(v=y.getAttribute("data-path"))!=null?v:"",O=c.page(P);y.checked=O[x],y.onchange=async()=>{let H=this.app.vault.getAbstractFileByPath(P);await this.app.fileManager.processFrontMatter(H,U=>{U[x]=y.checked})}}let T=document.querySelectorAll(".file-task-checkbox");for(let k of T){let y=k;y.onchange=async()=>{var R,Y;let x=(R=y.getAttribute("data-path"))!=null?R:"",P=(Y=y.getAttribute("data-task-line"))!=null?Y:"",O=this.app.vault.getAbstractFileByPath(x),U=(await this.app.vault.cachedRead(O)).split(`
`),q=U[P];y.checked?q=q.replace("- [ ]","- [x]"):q=q.replace("- [x]","- [ ]"),U[P]=q;let W=U.join(`
`);await this.app.vault.modify(O,W),await this.refreshView()}}let M=document.querySelectorAll(".header-sorting-button");for(let k of M){let y=k,x=y.getAttribute("data-prop"),P=y.getAttribute("data-view-id"),O="sort_"+P,H="sort_direction_"+P,U=this.app.vault.getAbstractFileByPath(c.current().file.path);y.onclick=async()=>{await this.app.fileManager.processFrontMatter(U,q=>{q[O]==x?!q[H]||q[H]=="desc"?q[H]="asc":q[H]="desc":(q[O]=x,q[H]="asc")}),await this.refreshView()},y.onmousedown=async q=>{q.button==2&&(await this.app.fileManager.processFrontMatter(U,W=>{delete W[O],delete W[H]}),await this.refreshView())}}let A=document.querySelectorAll(".edit-button[data-type='excerpt']");for(let k of A)k.onclick=async y=>{var H;let x;y.ctrlKey&&y.shiftKey&&y.altKey?x=this.app.workspace.getLeaf("window"):y.ctrlKey&&y.altKey?x=this.app.workspace.getLeaf("split"):y.ctrlKey?x=this.app.workspace.getLeaf("tab"):x=this.app.workspace.getLeaf();let P=(H=k.getAttribute("data-path"))!=null?H:"",O=this.app.vault.getAbstractFileByPath(P);x.openFile(O)}}updateSlider(e){let t=e.value,r=e.max,i=this.getSliderPercents(Number(t),Number(r)),s="var(--color-red)";i>25&&(s="var(--color-yellow)"),i>50&&(s="var(--color-green)"),i>75&&(s="var(--color-cyan)"),i==100&&(s="var(--color-purple)"),e.style.backgroundSize=i+"% 100%",e.style.backgroundImage="linear-gradient("+s+", "+s+")",(0,$.setTooltip)(e,t,{placement:"top",delay:1})}getSliderPercents(e,t){let r=e;return r||(r=0),t||(r=0,t=0),Number(r)>Number(t)&&(r=t),Math.round(r*100/t)}async editSlider(e){var s,u;let t=(s=e.getAttribute("data-path"))!=null?s:"",r=(u=e.getAttribute("data-prop"))!=null?u:"",i=this.app.vault.getAbstractFileByPath(t);await this.app.fileManager.processFrontMatter(i,a=>{a[r]=Number(e.value)})}async editSliderVal(e){var i,s;let t=(i=e.getAttribute("data-path"))!=null?i:"",r=(s=e.getAttribute("data-prop"))!=null?s:"";await this.editProp("number",t,r)}async editProp(e,t,r){let{dv:i}=this,s=i.page(t),u=this.app.vault.getAbstractFileByPath(t);if(e=="file name"){let o=u.basename,m=await this.textInput("Title",o);m||(m=o);let d=u.parent.path,w=u.extension,g=m+"."+w;d!="/"&&(g=d+"/"+m+"."+w),await this.app.vault.rename(u,g),await this.refreshView();return}let a=s[r];this.isLink(a)&&(a="[["+this.getDisplay(a)+"]]"),Array.isArray(a)&&(a=a.map(o=>(this.isLink(o)&&(o="[["+this.getDisplay(o)+"]]"),o)));let c;if(e=="text")c=await this.textInput(r,a),c===void 0&&(c=a);else if(e=="list"){let o=this.getValues(r);o||(o=[]);let m=this.props.find(b=>b.prop==r);m&&m.valueOptions?o=[...m.valueOptions]:console.error("propItem is undefined or does not have valueOptions"),a||(a=[]),typeof a=="string"&&(a=[a]);let d=[...a],w=o.filter(b=>{for(let E of d)if(b==E)return!1;return b!=""});w.unshift("+ add new option");let g=await this.suggester(["add","remove"]);if(g=="add"){let b=await this.suggester(w);b&&b!="+ add new option"?d.push(b):b=="+ add new option"&&(b=await this.textInput(r,""),b&&d.push(b))}else if(g=="remove"){let b=await this.suggester(d);b&&(d=d.filter(E=>E!=b))}c=d}else if(e=="select"){let o=this.getValues(r),d=this.props.find(b=>b.prop==r).valueOptions;d&&(o=[...d]),o.unshift("+ add new option");let w=o.map(b=>b==""?"-":b);c=await this.suggester(o,w),c=="+ add new option"&&(c=await this.textInput(r,""),c===void 0&&(c=a)),this.getPropType(r)=="multitext"&&(c!=""?c=[c]:c=[])}else e=="number"?(c=await this.numberInput(r,a),c===void 0&&(c=a)):e=="date"?(a&&(a=a.toISODate()),c=await this.dateInput(r,a),c===void 0&&(c=a),c==""&&(c=null)):e=="datetime"?(a&&(a=a.toISODate()),c=await this.dateTimeInput(r,a),c===void 0&&(c=a),c==""&&(c=null)):e=="task-progress"&&this.taskListModal(s);c!==a&&(await this.app.fileManager.processFrontMatter(u,o=>{o[r]=c}),await this.refreshView())}async renderView(e,t,r,i,s){var V;if(s||(s=i.container),!i.current())return;this.dv=i;let u=(V=e.id)!=null?V:"no-id",a=s.createEl("div",{cls:"dvit-view-id-"+u}),c=i.current()["sort_"+u],o=i.current()["sort_direction_"+u];o||(o="asc"),r=this.sortByProp(r,c,o);let m=i.current()["view_"+u],d=e["cards image position"],w=e["cards width"],g=e["entries on page"],b=e["add new note button"],E=e["full width"],F=a.createEl("div"),T=a.createEl("div"),M=a.createEl("div"),A=async v=>{if(b){let k=e["new note name"],y=e["new note template"],x=e["new note folder"];k||(k="New note");let P={noteName:k,noteTemplate:y,noteFolder:x};await this.newEntryButton(P,v)}await this.filterButtonProps(t,r,v,u),await this.changeViewButton(v,u),m=="list"&&await this.sortButton(t,v,u),await this.refreshButton(v),g&&await this.paginationBlock(D,g,v,u)},D=[...r];D=await this.filterProps(t,D,u),await A(F),await this.searchButton(F,u),i.current()["show_search_"+u]&&await this.searchInput(F,u),!m||m=="table"?await this.createTable(t,D,g,T,u,E,null):m=="cards"?await this.createTable(t,D,g,T,u,E,{cards:!0,position:d,cardsWidth:w}):m=="list"&&await this.createList(t,r,D,g,T,u),e["button panel below"]&&await A(M);let B=F.querySelector(".dvit-search-input");B&&B.focus()}async renderGallery(e,t){this.dv=e;let i=e.current().filter_gallery_folder,s=this.app.vault.getFiles().filter(o=>o.extension=="jpg"||o.extension=="jpeg"||o.extension=="png"||o.extension=="gif"||o.extension=="svg"||o.extension=="webp"),u={prop:"folder",fuzzySearch:!0,icon:"folder",name:" "};await this.filterButton(u,s,e.container,"gallery"),s=s.filter(o=>{let m=!0;return i&&(m=o.parent.path==i),m}),await this.refreshButton(e.container),await this.paginationBlock(s,t,e.container,"gallery"),s=this.paginate(s,t,"gallery");let a="";for(let o of s){let m=e.fileLink(o.path,!0);a=a+"<span class='gallery-image'>"+m+"</span>"}e.paragraph(a);let c=document.querySelectorAll(".gallery-image > span");for(let o of c){let m=o;m.onclick=async d=>{var E;let w=(E=m.getAttribute("src"))!=null?E:"",g=this.app.vault.getAbstractFileByPath(w),b=this.app.workspace.getLeaf();d.ctrlKey&&d.altKey&&d.shiftKey?b=this.app.workspace.getLeaf("window"):d.ctrlKey&&d.altKey?b=this.app.workspace.getLeaf("split"):d.ctrlKey&&(b=this.app.workspace.getLeaf("tab")),await b.openFile(g)}}}async renderList(e,t,r){var m,d;this.dv=r;let i=(m=e["group by file"])!=null?m:!1,s=e["entries on page"],u=(d=e.id)!=null?d:"no-id",a=e.group;i&&(t=t.sort(w=>w.link));let c=async w=>{s&&(await this.paginationBlock(t,s,w,u),t=this.paginate(t,s,u)),await this.refreshButton(w)},o=r.container.createEl("div");if(await c(o),a){t=t.groupBy(w=>w[a]).sort(w=>window.moment(w.key.subpath,"DD MMMM YYYY \u2014 dddd").unix(),"desc");for(let w of t)r.el("h4",w.key),r.taskList(w.rows,i)}else r.taskList(t,i);if(e["button panel below"]){let w=r.container.createEl("div");await c(w)}}},Yt=class extends $.Plugin{async onload(){let t=new $n(this.app,this);this.api=t,window.DIViews=t,st.getAPI()&&t.forceRefreshViewImmediately(),this.registerEvent(this.app.metadataCache.on("dataview:index-ready",async()=>{await t.forceRefreshViewImmediately()}))}onunload(){delete this.api}async loadSettings(){this.settings=Object.assign({},ea,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
