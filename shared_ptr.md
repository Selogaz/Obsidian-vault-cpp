Данные не удаляются до тех пор, пока не исчезнет последний указатель на эти данные. В деструкторе shared_ptr ведется счетчик ссылок.

[[C++]] [[Умные указатели]] [[Указатель]] 